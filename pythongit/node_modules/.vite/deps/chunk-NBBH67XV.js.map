{
  "version": 3,
  "sources": ["../../@transloadit/prettier-bytes/src/prettierBytes.ts", "../../wildcard/index.js", "../../mime-match/index.js", "../../lodash/isObject.js", "../../lodash/_freeGlobal.js", "../../lodash/_root.js", "../../lodash/now.js", "../../lodash/_trimmedEndIndex.js", "../../lodash/_baseTrim.js", "../../lodash/_Symbol.js", "../../lodash/_getRawTag.js", "../../lodash/_objectToString.js", "../../lodash/_baseGetTag.js", "../../lodash/isObjectLike.js", "../../lodash/isSymbol.js", "../../lodash/toNumber.js", "../../lodash/debounce.js", "../../lodash/throttle.js", "../../namespace-emitter/index.js", "../../@uppy/utils/lib/hasProperty.js", "../../@uppy/utils/lib/AbortController.js", "../../@uppy/utils/lib/dataURItoBlob.js", "../../@uppy/utils/lib/ErrorWithCause.js", "../../@uppy/utils/lib/emaFilter.js", "../../@uppy/utils/lib/FOCUSABLE_ELEMENTS.js", "../../@uppy/utils/lib/NetworkError.js", "../../@uppy/utils/lib/fetchWithNetworkError.js", "../../@uppy/utils/lib/fileFilters.js", "../../@uppy/utils/lib/isDOMElement.js", "../../@uppy/utils/lib/findAllDOMElements.js", "../../@uppy/utils/lib/findDOMElement.js", "../../@uppy/utils/lib/getFileNameAndExtension.js", "../../@uppy/utils/lib/mimeTypes.js", "../../@uppy/utils/lib/getFileType.js", "../../@uppy/utils/lib/generateFileID.js", "../../@uppy/utils/lib/getAllowedMetaFields.js", "../../@uppy/utils/lib/toArray.js", "../../@uppy/utils/lib/getDroppedFiles/utils/fallbackApi.js", "../../@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getFilesAndDirectoriesFromDirectory.js", "../../@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/index.js", "../../@uppy/utils/lib/getDroppedFiles/index.js", "../../@uppy/utils/lib/getSocketHost.js", "../../@uppy/utils/lib/getTextDirection.js", "../../@uppy/utils/lib/getTimeStamp.js", "../../@uppy/utils/lib/isDragDropSupported.js", "../../@uppy/utils/lib/isObjectURL.js", "../../@uppy/utils/lib/isPreviewSupported.js", "../../@uppy/utils/lib/secondsToTime.js", "../../@uppy/utils/lib/prettyETA.js", "../../@uppy/utils/lib/RateLimitedQueue.js", "../../@uppy/utils/lib/remoteFileObjToLocal.js", "../../@uppy/utils/lib/Translator.js", "../../@uppy/utils/lib/truncateString.js", "../../@uppy/utils/lib/UserFacingApiError.js", "../../preact/src/constants.js", "../../preact/src/util.js", "../../preact/src/options.js", "../../preact/src/create-element.js", "../../preact/src/component.js", "../../preact/src/diff/props.js", "../../preact/src/create-context.js", "../../preact/src/diff/children.js", "../../preact/src/diff/index.js", "../../preact/src/render.js", "../../preact/src/clone-element.js", "../../preact/src/diff/catch-error.js", "../../preact/jsx-runtime/src/utils.js", "../../preact/src/constants.js", "../../preact/jsx-runtime/src/index.js", "../../preact/hooks/src/index.js", "../../@uppy/utils/lib/VirtualList.js", "../../@uppy/core/lib/BasePlugin.js", "../../@uppy/core/lib/EventManager.js", "../../@uppy/core/lib/loggers.js", "../../@uppy/core/lib/Restricter.js", "../../@uppy/core/lib/UIPlugin.js", "../../@uppy/store-default/package.json", "../../@uppy/store-default/lib/index.js", "../../@uppy/core/lib/Uppy.js", "../../@uppy/core/node_modules/nanoid/non-secure/index.js", "../../@uppy/core/package.json", "../../@uppy/core/lib/getFileName.js", "../../@uppy/core/lib/locale.js", "../../@uppy/core/lib/supportsUploadProgress.js"],
  "sourcesContent": ["// Adapted from https://github.com/Flet/prettier-bytes/\n// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB\n// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE\nexport = function prettierBytes(input: number): string {\n  if (typeof input !== 'number' || Number.isNaN(input)) {\n    throw new TypeError(`Expected a number, got ${typeof input}`)\n  }\n\n  const neg = input < 0\n  let num = Math.abs(input)\n\n  if (neg) {\n    num = -num\n  }\n\n  if (num === 0) {\n    return '0 B'\n  }\n\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const exponent = Math.min(Math.floor(Math.log(num) / Math.log(1024)), units.length - 1)\n  const value = Number(num / 1024 ** exponent)\n  const unit = units[exponent]\n\n  return `${value >= 10 || value % 1 === 0 ? Math.round(value) : value.toFixed(1)} ${unit}`\n}\n", "/* jshint node: true */\n'use strict';\n\n/**\n  # wildcard\n\n  Very simple wildcard matching, which is designed to provide the same\n  functionality that is found in the\n  [eve](https://github.com/adobe-webplatform/eve) eventing library.\n\n  ## Usage\n\n  It works with strings:\n\n  <<< examples/strings.js\n\n  Arrays:\n\n  <<< examples/arrays.js\n\n  Objects (matching against keys):\n\n  <<< examples/objects.js\n\n  While the library works in Node, if you are are looking for file-based\n  wildcard matching then you should have a look at:\n\n  <https://github.com/isaacs/node-glob>\n**/\n\nfunction WildcardMatcher(text, separator) {\n  this.text = text = text || '';\n  this.hasWild = ~text.indexOf('*');\n  this.separator = separator;\n  this.parts = text.split(separator);\n}\n\nWildcardMatcher.prototype.match = function(input) {\n  var matches = true;\n  var parts = this.parts;\n  var ii;\n  var partsCount = parts.length;\n  var testParts;\n\n  if (typeof input == 'string' || input instanceof String) {\n    if (!this.hasWild && this.text != input) {\n      matches = false;\n    } else {\n      testParts = (input || '').split(this.separator);\n      for (ii = 0; matches && ii < partsCount; ii++) {\n        if (parts[ii] === '*')  {\n          continue;\n        } else if (ii < testParts.length) {\n          matches = parts[ii] === testParts[ii];\n        } else {\n          matches = false;\n        }\n      }\n\n      // If matches, then return the component parts\n      matches = matches && testParts;\n    }\n  }\n  else if (typeof input.splice == 'function') {\n    matches = [];\n\n    for (ii = input.length; ii--; ) {\n      if (this.match(input[ii])) {\n        matches[matches.length] = input[ii];\n      }\n    }\n  }\n  else if (typeof input == 'object') {\n    matches = {};\n\n    for (var key in input) {\n      if (this.match(key)) {\n        matches[key] = input[key];\n      }\n    }\n  }\n\n  return matches;\n};\n\nmodule.exports = function(text, test, separator) {\n  var matcher = new WildcardMatcher(text, separator || /[\\/\\.]/);\n  if (typeof test != 'undefined') {\n    return matcher.match(test);\n  }\n\n  return matcher;\n};\n", "var wildcard = require('wildcard');\nvar reMimePartSplit = /[\\/\\+\\.]/;\n\n/**\n  # mime-match\n\n  A simple function to checker whether a target mime type matches a mime-type\n  pattern (e.g. image/jpeg matches image/jpeg OR image/*).\n\n  ## Example Usage\n\n  <<< example.js\n\n**/\nmodule.exports = function(target, pattern) {\n  function test(pattern) {\n    var result = wildcard(pattern, target, reMimePartSplit);\n\n    // ensure that we have a valid mime type (should have two parts)\n    return result && result.length >= 2;\n  }\n\n  return pattern ? test(pattern.split(';')[0]) : test;\n};\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n", "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n", "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n", "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n", "var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n", "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n", "var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n", "/**\n* Create an event emitter with namespaces\n* @name createNamespaceEmitter\n* @example\n* var emitter = require('./index')()\n*\n* emitter.on('*', function () {\n*   console.log('all events emitted', this.event)\n* })\n*\n* emitter.on('example', function () {\n*   console.log('example event emitted')\n* })\n*/\nmodule.exports = function createNamespaceEmitter () {\n  var emitter = {}\n  var _fns = emitter._fns = {}\n\n  /**\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\n  * @name emit\n  * @param {String} event – the name of the event, with optional namespace\n  * @param {...*} data – up to 6 arguments that are passed to the event listener\n  * @example\n  * emitter.emit('example')\n  * emitter.emit('demo:test')\n  * emitter.emit('data', { example: true}, 'a string', 1)\n  */\n  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {\n    var toEmit = getListeners(event)\n\n    if (toEmit.length) {\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])\n    }\n  }\n\n  /**\n  * Create en event listener.\n  * @name on\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.on('example', function () {})\n  * emitter.on('demo', function () {})\n  */\n  emitter.on = function on (event, fn) {\n    if (!_fns[event]) {\n      _fns[event] = []\n    }\n\n    _fns[event].push(fn)\n  }\n\n  /**\n  * Create en event listener that fires once.\n  * @name once\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.once('example', function () {})\n  * emitter.once('demo', function () {})\n  */\n  emitter.once = function once (event, fn) {\n    function one () {\n      fn.apply(this, arguments)\n      emitter.off(event, one)\n    }\n    this.on(event, one)\n  }\n\n  /**\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\n  * @name off\n  * @param {String} event\n  * @param {Function} [fn] – the specific handler\n  * @example\n  * emitter.off('example')\n  * emitter.off('demo', function () {})\n  */\n  emitter.off = function off (event, fn) {\n    var keep = []\n\n    if (event && fn) {\n      var fns = this._fns[event]\n      var i = 0\n      var l = fns ? fns.length : 0\n\n      for (i; i < l; i++) {\n        if (fns[i] !== fn) {\n          keep.push(fns[i])\n        }\n      }\n    }\n\n    keep.length ? this._fns[event] = keep : delete this._fns[event]\n  }\n\n  function getListeners (e) {\n    var out = _fns[e] ? _fns[e] : []\n    var idx = e.indexOf(':')\n    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]\n\n    var keys = Object.keys(_fns)\n    var i = 0\n    var l = keys.length\n\n    for (i; i < l; i++) {\n      var key = keys[i]\n      if (key === '*') {\n        out = out.concat(_fns[key])\n      }\n\n      if (args.length === 2 && args[0] === key) {\n        out = out.concat(_fns[key])\n        break\n      }\n    }\n\n    return out\n  }\n\n  function emitAll (e, fns, args) {\n    var i = 0\n    var l = fns.length\n\n    for (i; i < l; i++) {\n      if (!fns[i]) break\n      fns[i].event = e\n      fns[i].apply(fns[i], args)\n    }\n  }\n\n  return emitter\n}\n", "export default function hasProperty(object, key) {\n    return Object.hasOwn(object, key);\n}\n", "import hasProperty from './hasProperty.js';\n/**\n * Little AbortController proxy module so we can swap out the implementation easily later.\n */\nexport const { AbortController } = globalThis;\nexport const { AbortSignal } = globalThis;\nexport const createAbortError = (message = 'Aborted', options) => {\n    const err = new DOMException(message, 'AbortError');\n    if (options != null && hasProperty(options, 'cause')) {\n        Object.defineProperty(err, 'cause', {\n            // @ts-expect-error TS is drunk\n            __proto__: null,\n            configurable: true,\n            writable: true,\n            value: options.cause,\n        });\n    }\n    return err;\n};\n", "const DATA_URL_PATTERN = /^data:([^/]+\\/[^,;]+(?:[^,]*?))(;base64)?,([\\s\\S]*)$/;\nfunction dataURItoBlob(dataURI, opts, toFile) {\n    // get the base64 data\n    const dataURIData = DATA_URL_PATTERN.exec(dataURI);\n    // user may provide mime type, if not get it from data URI\n    const mimeType = opts.mimeType ?? dataURIData?.[1] ?? 'plain/text';\n    let data; // We add `!` to tell TS we're OK with `data` being not defined when the dataURI is invalid.\n    if (dataURIData?.[2] != null) {\n        const binary = atob(decodeURIComponent(dataURIData[3]));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        data = [bytes];\n    }\n    else if (dataURIData?.[3] != null) {\n        data = [decodeURIComponent(dataURIData[3])];\n    }\n    // Convert to a File?\n    if (toFile) {\n        return new File(data, opts.name || '', { type: mimeType });\n    }\n    return new Blob(data, { type: mimeType });\n}\nexport default dataURItoBlob;\n", "import hasProperty from './hasProperty.js';\nclass ErrorWithCause extends Error {\n    isNetworkError;\n    cause;\n    constructor(message, options) {\n        super(message);\n        this.cause = options?.cause;\n        if (this.cause && hasProperty(this.cause, 'isNetworkError')) {\n            this.isNetworkError = this.cause.isNetworkError;\n        }\n        else {\n            this.isNetworkError = false;\n        }\n    }\n}\nexport default ErrorWithCause;\n", "/**\n * Low-pass filter using Exponential Moving Averages (aka exponential smoothing)\n * Filters a sequence of values by updating the mixing the previous output value\n * with the new input using the exponential window function\n *\n * @param newValue the n-th value of the sequence\n * @param previousSmoothedValue the exponential average of the first n-1 values\n * @param halfLife value of `dt` to move the smoothed value halfway between `previousFilteredValue` and `newValue`\n * @param dt time elapsed between adding the (n-1)th and the n-th values\n * @returns the exponential average of the first n values\n */\nexport default function emaFilter(newValue, previousSmoothedValue, halfLife, dt) {\n    if (halfLife === 0 || newValue === previousSmoothedValue)\n        return newValue;\n    if (dt === 0)\n        return previousSmoothedValue;\n    return newValue + (previousSmoothedValue - newValue) * 2 ** (-dt / halfLife);\n}\n", "export default [\n    'a[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'area[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'input:not([disabled]):not([inert]):not([aria-hidden])',\n    'select:not([disabled]):not([inert]):not([aria-hidden])',\n    'textarea:not([disabled]):not([inert]):not([aria-hidden])',\n    'button:not([disabled]):not([inert]):not([aria-hidden])',\n    'iframe:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'object:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'embed:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[contenteditable]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[tabindex]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n];\n", "class NetworkError extends Error {\n    cause;\n    isNetworkError;\n    request;\n    constructor(error, xhr = null) {\n        super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n        this.cause = error;\n        this.isNetworkError = true;\n        this.request = xhr;\n    }\n}\nexport default NetworkError;\n", "import NetworkError from './NetworkError.js';\n/**\n * Wrapper around window.fetch that throws a NetworkError when appropriate\n */\nexport default function fetchWithNetworkError(...options) {\n    return fetch(...options).catch((err) => {\n        if (err.name === 'AbortError') {\n            throw err;\n        }\n        else {\n            throw new NetworkError(err);\n        }\n    });\n}\n", "export function filterNonFailedFiles(files) {\n    const hasError = (file) => 'error' in file && !!file.error;\n    return files.filter((file) => !hasError(file));\n}\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n    return files.filter((file) => !file.progress?.uploadStarted || !file.isRestored);\n}\n", "/**\n * Check if an object is a DOM element. Duck-typing based on `nodeType`.\n */\nexport default function isDOMElement(obj) {\n    if (typeof obj !== 'object' || obj === null)\n        return false;\n    if (!('nodeType' in obj))\n        return false;\n    return obj.nodeType === Node.ELEMENT_NODE;\n}\n", "import isDOMElement from './isDOMElement.js';\n/**\n * Find one or more DOM elements.\n */\nfunction findAllDOMElements(element) {\n    if (typeof element === 'string') {\n        const elements = document.querySelectorAll(element);\n        return elements.length === 0 ? null : Array.from(elements);\n    }\n    if (typeof element === 'object' && isDOMElement(element)) {\n        return [element];\n    }\n    return null;\n}\nexport default findAllDOMElements;\n", "import isDOMElement from './isDOMElement.js';\nfunction findDOMElement(element, context = document) {\n    if (typeof element === 'string') {\n        return context.querySelector(element);\n    }\n    if (isDOMElement(element)) {\n        return element;\n    }\n    return null;\n}\nexport default findDOMElement;\n", "/**\n * Takes a full filename string and returns an object {name, extension}\n */\nexport default function getFileNameAndExtension(fullFileName) {\n    const lastDot = fullFileName.lastIndexOf('.');\n    // these count as no extension: \"no-dot\", \"trailing-dot.\"\n    if (lastDot === -1 || lastDot === fullFileName.length - 1) {\n        return {\n            name: fullFileName,\n            extension: undefined,\n        };\n    }\n    return {\n        name: fullFileName.slice(0, lastDot),\n        extension: fullFileName.slice(lastDot + 1),\n    };\n}\n", "// ___Why not add the mime-types package?\n//    It's 19.7kB gzipped, and we only need mime types for well-known extensions (for file previews).\n// ___Where to take new extensions from?\n//    https://github.com/jshttp/mime-db/blob/master/db.json\nexport default {\n    __proto__: null,\n    md: 'text/markdown',\n    markdown: 'text/markdown',\n    mp4: 'video/mp4',\n    mp3: 'audio/mp3',\n    svg: 'image/svg+xml',\n    jpg: 'image/jpeg',\n    png: 'image/png',\n    webp: 'image/webp',\n    gif: 'image/gif',\n    heic: 'image/heic',\n    heif: 'image/heif',\n    yaml: 'text/yaml',\n    yml: 'text/yaml',\n    csv: 'text/csv',\n    tsv: 'text/tab-separated-values',\n    tab: 'text/tab-separated-values',\n    avi: 'video/x-msvideo',\n    mks: 'video/x-matroska',\n    mkv: 'video/x-matroska',\n    mov: 'video/quicktime',\n    dicom: 'application/dicom',\n    doc: 'application/msword',\n    msg: 'application/vnd.ms-outlook',\n    docm: 'application/vnd.ms-word.document.macroenabled.12',\n    docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    dot: 'application/msword',\n    dotm: 'application/vnd.ms-word.template.macroenabled.12',\n    dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n    xla: 'application/vnd.ms-excel',\n    xlam: 'application/vnd.ms-excel.addin.macroenabled.12',\n    xlc: 'application/vnd.ms-excel',\n    xlf: 'application/x-xliff+xml',\n    xlm: 'application/vnd.ms-excel',\n    xls: 'application/vnd.ms-excel',\n    xlsb: 'application/vnd.ms-excel.sheet.binary.macroenabled.12',\n    xlsm: 'application/vnd.ms-excel.sheet.macroenabled.12',\n    xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    xlt: 'application/vnd.ms-excel',\n    xltm: 'application/vnd.ms-excel.template.macroenabled.12',\n    xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n    xlw: 'application/vnd.ms-excel',\n    txt: 'text/plain',\n    text: 'text/plain',\n    conf: 'text/plain',\n    log: 'text/plain',\n    pdf: 'application/pdf',\n    zip: 'application/zip',\n    '7z': 'application/x-7z-compressed',\n    rar: 'application/x-rar-compressed',\n    tar: 'application/x-tar',\n    gz: 'application/gzip',\n    dmg: 'application/x-apple-diskimage',\n};\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nimport mimeTypes from './mimeTypes.js';\nexport default function getFileType(file) {\n    if (file.type)\n        return file.type;\n    const fileExtension = file.name\n        ? getFileNameAndExtension(file.name).extension?.toLowerCase()\n        : null;\n    if (fileExtension && fileExtension in mimeTypes) {\n        // else, see if we can map extension to a mime type\n        return mimeTypes[fileExtension];\n    }\n    // if all fails, fall back to a generic byte stream type\n    return 'application/octet-stream';\n}\n", "import getFileType from './getFileType.js';\nfunction encodeCharacter(character) {\n    return character.charCodeAt(0).toString(32);\n}\nfunction encodeFilename(name) {\n    let suffix = '';\n    return (name.replace(/[^A-Z0-9]/gi, (character) => {\n        suffix += `-${encodeCharacter(character)}`;\n        return '/';\n    }) + suffix);\n}\n/**\n * Takes a file object and turns it into fileID, by converting file.name to lowercase,\n * removing extra characters and adding type, size and lastModified\n */\nexport default function generateFileID(file, instanceId) {\n    // It's tempting to do `[items].filter(Boolean).join('-')` here, but that\n    // is slower! simple string concatenation is fast\n    let id = instanceId || 'uppy';\n    if (typeof file.name === 'string') {\n        id += `-${encodeFilename(file.name.toLowerCase())}`;\n    }\n    if (file.type !== undefined) {\n        id += `-${file.type}`;\n    }\n    if (file.meta && typeof file.meta.relativePath === 'string') {\n        id += `-${encodeFilename(file.meta.relativePath.toLowerCase())}`;\n    }\n    if (file.data.size !== undefined) {\n        id += `-${file.data.size}`;\n    }\n    if (file.data.lastModified !== undefined) {\n        id += `-${file.data.lastModified}`;\n    }\n    return id;\n}\n// If the provider has a stable, unique ID, then we can use that to identify the file.\n// Then we don't have to generate our own ID, and we can add the same file many times if needed (different path)\nfunction hasFileStableId(file) {\n    if (!file.isRemote || !file.remote)\n        return false;\n    // These are the providers that it seems like have stable IDs for their files. The other's I haven't checked yet.\n    const stableIdProviders = new Set([\n        'box',\n        'dropbox',\n        'drive',\n        'facebook',\n        'unsplash',\n    ]);\n    return stableIdProviders.has(file.remote.provider);\n}\nexport function getSafeFileId(file, instanceId) {\n    if (hasFileStableId(file))\n        return file.id;\n    const fileType = getFileType(file);\n    return generateFileID({\n        ...file,\n        type: fileType,\n    }, instanceId);\n}\n", "export default function getAllowedMetaFields(fields, meta) {\n    if (fields === true) {\n        return Object.keys(meta);\n    }\n    if (Array.isArray(fields)) {\n        return fields;\n    }\n    return [];\n}\n", "/**\n * Converts list into array\n */\nexport default Array.from;\n", "import toArray from '../../toArray.js';\n// .files fallback, should be implemented in any browser\nexport default function fallbackApi(dataTransfer) {\n    const files = toArray(dataTransfer.files);\n    return Promise.resolve(files);\n}\n", "/**\n * Recursive function, calls the original callback() when the directory is entirely parsed.\n */\nexport default function getFilesAndDirectoriesFromDirectory(directoryReader, oldEntries, logDropError, { onSuccess }) {\n    directoryReader.readEntries((entries) => {\n        const newEntries = [...oldEntries, ...entries];\n        // According to the FileSystem API spec, getFilesAndDirectoriesFromDirectory()\n        // must be called until it calls the onSuccess with an empty array.\n        if (entries.length) {\n            queueMicrotask(() => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, newEntries, logDropError, { onSuccess });\n            });\n            // Done iterating this particular directory\n        }\n        else {\n            onSuccess(newEntries);\n        }\n    }, \n    // Make sure we resolve on error anyway, it's fine if only one directory couldn't be parsed!\n    (error) => {\n        logDropError(error);\n        onSuccess(oldEntries);\n    });\n}\n", "import getFilesAndDirectoriesFromDirectory from './getFilesAndDirectoriesFromDirectory.js';\n/**\n * Polyfill for the new (experimental) getAsFileSystemHandle API (using the popular webkitGetAsEntry behind the scenes)\n * so that we can switch to the getAsFileSystemHandle API once it (hopefully) becomes standard\n */\nfunction getAsFileSystemHandleFromEntry(entry, logDropError) {\n    if (entry == null)\n        return entry;\n    return {\n        kind: entry.isFile\n            ? 'file'\n            : entry.isDirectory\n                ? 'directory'\n                : undefined,\n        name: entry.name,\n        getFile() {\n            return new Promise((resolve, reject) => entry.file(resolve, reject));\n        },\n        async *values() {\n            // If the file is a directory.\n            const directoryReader = entry.createReader();\n            const entries = await new Promise((resolve) => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, [], logDropError, {\n                    onSuccess: (dirEntries) => resolve(dirEntries.map((file) => getAsFileSystemHandleFromEntry(file, logDropError))),\n                });\n            });\n            yield* entries;\n        },\n        isSameEntry: undefined,\n    };\n}\nasync function* createPromiseToAddFileOrParseDirectory(entry, relativePath, lastResortFile = undefined) {\n    const getNextRelativePath = () => `${relativePath}/${entry.name}`;\n    // For each dropped item, - make sure it's a file/directory, and start deepening in!\n    if (entry.kind === 'file') {\n        const file = await entry.getFile();\n        if (file != null) {\n            ;\n            file.relativePath = relativePath ? getNextRelativePath() : null;\n            yield file;\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n    else if (entry.kind === 'directory') {\n        for await (const handle of entry.values()) {\n            // Recurse on the directory, appending the dir name to the relative path\n            yield* createPromiseToAddFileOrParseDirectory(handle, relativePath ? getNextRelativePath() : entry.name);\n        }\n    }\n    else if (lastResortFile != null)\n        yield lastResortFile;\n}\n/**\n * Load all files from data transfer, and recursively read any directories.\n * Note that IE is not supported for drag-drop, because IE doesn't support Data Transfers\n *\n * @param {DataTransfer} dataTransfer\n * @param {*} logDropError on error\n */\nexport default async function* getFilesFromDataTransfer(dataTransfer, logDropError) {\n    // Retrieving the dropped items must happen synchronously\n    // otherwise only the first item gets treated and the other ones are garbage collected.\n    // https://github.com/transloadit/uppy/pull/3998\n    const fileSystemHandles = await Promise.all(Array.from(dataTransfer.items, async (item) => {\n        // biome-ignore lint/style/useConst: ...\n        let fileSystemHandle;\n        // TODO enable getAsFileSystemHandle API once we can get it working with subdirectories\n        // IMPORTANT: Need to check isSecureContext *before* calling getAsFileSystemHandle\n        // or else Chrome will crash when running in HTTP: https://github.com/transloadit/uppy/issues/4133\n        // if (window.isSecureContext && item.getAsFileSystemHandle != null)\n        // fileSystemHandle = await item.getAsFileSystemHandle()\n        // `webkitGetAsEntry` exists in all popular browsers (including non-WebKit browsers),\n        // however it may be renamed to getAsEntry() in the future, so you should code defensively, looking for both.\n        // from https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\n        const getAsEntry = () => typeof item.getAsEntry === 'function'\n            ? item.getAsEntry()\n            : item.webkitGetAsEntry();\n        fileSystemHandle ??= getAsFileSystemHandleFromEntry(getAsEntry(), logDropError);\n        return {\n            fileSystemHandle,\n            lastResortFile: item.getAsFile(), // can be used as a fallback in case other methods fail\n        };\n    }));\n    for (const { lastResortFile, fileSystemHandle } of fileSystemHandles) {\n        // fileSystemHandle and lastResortFile can be null when we drop an url.\n        if (fileSystemHandle != null) {\n            try {\n                yield* createPromiseToAddFileOrParseDirectory(fileSystemHandle, '', lastResortFile);\n            }\n            catch (err) {\n                // Example: If dropping a symbolic link, Chromium will throw:\n                // \"DOMException: A requested file or directory could not be found at the time an operation was processed.\",\n                // So we will use lastResortFile instead. See https://github.com/transloadit/uppy/issues/3505.\n                if (lastResortFile != null) {\n                    yield lastResortFile;\n                }\n                else {\n                    logDropError(err);\n                }\n            }\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n}\n", "import fallbackApi from './utils/fallbackApi.js';\nimport webkitGetAsEntryApi from './utils/webkitGetAsEntryApi/index.js';\n/**\n * Returns a promise that resolves to the array of dropped files (if a folder is\n * dropped, and browser supports folder parsing - promise resolves to the flat\n * array of all files in all directories).\n * Each file has .relativePath prop appended to it (e.g. \"/docs/Prague/ticket_from_prague_to_ufa.pdf\")\n * if browser supports it. Otherwise it's undefined.\n *\n * @param dataTransfer\n * @param options\n * @param options.logDropError - a function that's called every time some\n * folder or some file error out (e.g. because of the folder name being too long\n * on Windows). Notice that resulting promise will always be resolved anyway.\n *\n * @returns {Promise} - Array<File>\n */\nexport default async function getDroppedFiles(dataTransfer, options) {\n    // Get all files from all subdirs. Works (at least) in Chrome, Mozilla, and Safari\n    const logDropError = options?.logDropError ?? Function.prototype;\n    try {\n        const accumulator = [];\n        for await (const file of webkitGetAsEntryApi(dataTransfer, logDropError)) {\n            accumulator.push(file);\n        }\n        return accumulator;\n        // Otherwise just return all first-order files\n    }\n    catch {\n        return fallbackApi(dataTransfer);\n    }\n}\n", "export default function getSocketHost(url) {\n    // get the host domain\n    const regex = /^(?:https?:\\/\\/|\\/\\/)?(?:[^@\\n]+@)?([^\\n]+)/i;\n    const host = regex.exec(url)?.[1];\n    const socketProtocol = /^http:\\/\\//i.test(url) ? 'ws' : 'wss';\n    return `${socketProtocol}://${host}`;\n}\n", "/**\n * Get the declared text direction for an element.\n */\nfunction getTextDirection(element) {\n    // There is another way to determine text direction using getComputedStyle(), as done here:\n    // https://github.com/pencil-js/text-direction/blob/2a235ce95089b3185acec3b51313cbba921b3811/text-direction.js\n    //\n    // We do not use that approach because we are interested specifically in the _declared_ text direction.\n    // If no text direction is declared, we have to provide our own explicit text direction so our\n    // bidirectional CSS style sheets work.\n    while (element && !element.dir) {\n        element = element.parentNode;\n    }\n    return element?.dir;\n}\nexport default getTextDirection;\n", "/**\n * Adds zero to strings shorter than two characters.\n */\nfunction pad(number) {\n    return number < 10 ? `0${number}` : number.toString();\n}\n/**\n * Returns a timestamp in the format of `hours:minutes:seconds`\n */\nexport default function getTimeStamp() {\n    const date = new Date();\n    const hours = pad(date.getHours());\n    const minutes = pad(date.getMinutes());\n    const seconds = pad(date.getSeconds());\n    return `${hours}:${minutes}:${seconds}`;\n}\n", "/**\n * Checks if the browser supports Drag & Drop (not supported on mobile devices, for example).\n */\nexport default function isDragDropSupported() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    const body = document.body;\n    // sometimes happens in the wild: https://github.com/transloadit/uppy/issues/5953\n    if (body == null || window == null) {\n        return false;\n    }\n    if (!('draggable' in body) ||\n        !('ondragstart' in body) ||\n        !('ondrop' in body)) {\n        return false;\n    }\n    if (!('FormData' in window)) {\n        return false;\n    }\n    if (!('FileReader' in window)) {\n        return false;\n    }\n    return true;\n}\n", "/**\n * Check if a URL string is an object URL from `URL.createObjectURL`.\n */\nexport default function isObjectURL(url) {\n    return url.startsWith('blob:');\n}\n", "export default function isPreviewSupported(fileType) {\n    if (!fileType)\n        return false;\n    // list of images that browsers can preview\n    return /^[^/]+\\/(jpe?g|gif|png|svg|svg\\+xml|bmp|webp|avif)$/.test(fileType);\n}\n", "export default function secondsToTime(rawSeconds) {\n    const hours = Math.floor(rawSeconds / 3600) % 24;\n    const minutes = Math.floor(rawSeconds / 60) % 60;\n    const seconds = Math.floor(rawSeconds % 60);\n    return { hours, minutes, seconds };\n}\n", "import secondsToTime from './secondsToTime.js';\nexport default function prettyETA(seconds) {\n    const time = secondsToTime(seconds);\n    // Only display hours and minutes if they are greater than 0 but always\n    // display minutes if hours is being displayed\n    // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s\n    const hoursStr = time.hours === 0 ? '' : `${time.hours}h`;\n    const minutesStr = time.minutes === 0\n        ? ''\n        : `${time.hours === 0\n            ? time.minutes\n            : ` ${time.minutes.toString(10).padStart(2, '0')}`}m`;\n    const secondsStr = time.hours !== 0\n        ? ''\n        : `${time.minutes === 0\n            ? time.seconds\n            : ` ${time.seconds.toString(10).padStart(2, '0')}`}s`;\n    return `${hoursStr}${minutesStr}${secondsStr}`;\n}\n", "function createCancelError(cause) {\n    return new Error('Cancelled', { cause });\n}\nfunction abortOn(signal) {\n    if (signal != null) {\n        const abortPromise = () => this.abort(signal.reason);\n        signal.addEventListener('abort', abortPromise, { once: true });\n        const removeAbortListener = () => {\n            signal.removeEventListener('abort', abortPromise);\n        };\n        this.then?.(removeAbortListener, removeAbortListener);\n    }\n    return this;\n}\nexport class RateLimitedQueue {\n    #activeRequests = 0;\n    #queuedHandlers = [];\n    #paused = false;\n    #pauseTimer;\n    #downLimit = 1;\n    #upperLimit;\n    #rateLimitingTimer;\n    limit;\n    constructor(limit) {\n        if (typeof limit !== 'number' || limit === 0) {\n            this.limit = Infinity;\n        }\n        else {\n            this.limit = limit;\n        }\n    }\n    #call(fn) {\n        this.#activeRequests += 1;\n        let done = false;\n        let cancelActive;\n        try {\n            cancelActive = fn();\n        }\n        catch (err) {\n            this.#activeRequests -= 1;\n            throw err;\n        }\n        return {\n            abort: (cause) => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                cancelActive?.(cause);\n                this.#queueNext();\n            },\n            done: () => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                this.#queueNext();\n            },\n        };\n    }\n    #queueNext() {\n        // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n        // one by one without continuously _advancing_ it (and starting new tasks before immediately\n        // aborting them)\n        queueMicrotask(() => this.#next());\n    }\n    #next() {\n        if (this.#paused || this.#activeRequests >= this.limit) {\n            return;\n        }\n        if (this.#queuedHandlers.length === 0) {\n            return;\n        }\n        // Dispatch the next request, and update the abort/done handlers\n        // so that cancelling it does the Right Thing (and doesn't just try\n        // to dequeue an already-running request).\n        const next = this.#queuedHandlers.shift();\n        if (next == null) {\n            throw new Error('Invariant violation: next is null');\n        }\n        const handler = this.#call(next.fn);\n        next.abort = handler.abort;\n        next.done = handler.done;\n    }\n    #queue(fn, options) {\n        const handler = {\n            fn,\n            priority: options?.priority || 0,\n            abort: () => {\n                this.#dequeue(handler);\n            },\n            done: () => {\n                throw new Error('Cannot mark a queued request as done: this indicates a bug');\n            },\n        };\n        const index = this.#queuedHandlers.findIndex((other) => {\n            return handler.priority > other.priority;\n        });\n        if (index === -1) {\n            this.#queuedHandlers.push(handler);\n        }\n        else {\n            this.#queuedHandlers.splice(index, 0, handler);\n        }\n        return handler;\n    }\n    #dequeue(handler) {\n        const index = this.#queuedHandlers.indexOf(handler);\n        if (index !== -1) {\n            this.#queuedHandlers.splice(index, 1);\n        }\n    }\n    run(fn, queueOptions) {\n        if (!this.#paused && this.#activeRequests < this.limit) {\n            return this.#call(fn);\n        }\n        return this.#queue(fn, queueOptions);\n    }\n    wrapSyncFunction(fn, queueOptions) {\n        return (...args) => {\n            const queuedRequest = this.run(() => {\n                fn(...args);\n                queueMicrotask(() => queuedRequest.done());\n                return () => { };\n            }, queueOptions);\n            return {\n                abortOn,\n                abort() {\n                    queuedRequest.abort();\n                },\n            };\n        };\n    }\n    wrapPromiseFunction(fn, queueOptions) {\n        return (...args) => {\n            let queuedRequest;\n            const outerPromise = new Promise((resolve, reject) => {\n                queuedRequest = this.run(() => {\n                    let cancelError;\n                    let innerPromise;\n                    try {\n                        innerPromise = Promise.resolve(fn(...args));\n                    }\n                    catch (err) {\n                        innerPromise = Promise.reject(err);\n                    }\n                    innerPromise.then((result) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            resolve(result);\n                        }\n                    }, (err) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            reject(err);\n                        }\n                    });\n                    return (cause) => {\n                        cancelError = createCancelError(cause);\n                    };\n                }, queueOptions);\n            });\n            outerPromise.abort = (cause) => {\n                queuedRequest.abort(cause);\n            };\n            outerPromise.abortOn = abortOn;\n            return outerPromise;\n        };\n    }\n    resume() {\n        this.#paused = false;\n        clearTimeout(this.#pauseTimer);\n        for (let i = 0; i < this.limit; i++) {\n            this.#queueNext();\n        }\n    }\n    #resume = () => this.resume();\n    /**\n     * Freezes the queue for a while or indefinitely.\n     *\n     * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n     *                                    If omitted, the queue won't resume automatically.\n     */\n    pause(duration = null) {\n        this.#paused = true;\n        clearTimeout(this.#pauseTimer);\n        if (duration != null) {\n            this.#pauseTimer = setTimeout(this.#resume, duration);\n        }\n    }\n    /**\n     * Pauses the queue for a duration, and lower the limit of concurrent requests\n     * when the queue resumes. When the queue resumes, it tries to progressively\n     * increase the limit in `this.#increaseLimit` until another call is made to\n     * `this.rateLimit`.\n     * Call this function when using the RateLimitedQueue for network requests and\n     * the remote server responds with 429 HTTP code.\n     *\n     * @param {number} duration in milliseconds.\n     */\n    rateLimit(duration) {\n        clearTimeout(this.#rateLimitingTimer);\n        this.pause(duration);\n        if (this.limit > 1 && Number.isFinite(this.limit)) {\n            this.#upperLimit = this.limit - 1;\n            this.limit = this.#downLimit;\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, duration);\n        }\n    }\n    #increaseLimit = () => {\n        if (this.#paused) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 0);\n            return;\n        }\n        this.#downLimit = this.limit;\n        this.limit = Math.ceil((this.#upperLimit + this.#downLimit) / 2);\n        for (let i = this.#downLimit; i <= this.limit; i++) {\n            this.#queueNext();\n        }\n        if (this.#upperLimit - this.#downLimit > 3) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 2000);\n        }\n        else {\n            this.#downLimit = Math.floor(this.#downLimit / 2);\n        }\n    };\n    get isPaused() {\n        return this.#paused;\n    }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nexport default function remoteFileObjToLocal(file) {\n    return {\n        ...file,\n        type: file.mimeType,\n        extension: file.name ? getFileNameAndExtension(file.name).extension : null,\n    };\n}\n", "function insertReplacement(source, rx, replacement) {\n    const newParts = [];\n    source.forEach((chunk) => {\n        // When the source contains multiple placeholders for interpolation,\n        // we should ignore chunks that are not strings, because those\n        // can be JSX objects and will be otherwise incorrectly turned into strings.\n        // Without this condition we’d get this: [object Object] hello [object Object] my <button>\n        if (typeof chunk !== 'string') {\n            return newParts.push(chunk);\n        }\n        return rx[Symbol.split](chunk).forEach((raw, i, list) => {\n            if (raw !== '') {\n                newParts.push(raw);\n            }\n            // Interlace with the `replacement` value\n            if (i < list.length - 1) {\n                newParts.push(replacement);\n            }\n        });\n    });\n    return newParts;\n}\n/**\n * Takes a string with placeholder variables like `%{smart_count} file selected`\n * and replaces it with values from options `{smart_count: 5}`\n *\n * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n *\n * @param phrase that needs interpolation, with placeholders\n * @param options with values that will be used to replace placeholders\n */\nfunction interpolate(phrase, options) {\n    const dollarRegex = /\\$/g;\n    const dollarBillsYall = '$$$$';\n    let interpolated = [phrase];\n    if (options == null)\n        return interpolated;\n    for (const arg of Object.keys(options)) {\n        if (arg !== '_') {\n            // Ensure replacement value is escaped to prevent special $-prefixed\n            // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n            // be escaped with \"$\" itself, and we need two in the resulting output.\n            let replacement = options[arg];\n            if (typeof replacement === 'string') {\n                replacement = dollarRegex[Symbol.replace](replacement, dollarBillsYall);\n            }\n            // We create a new `RegExp` each time instead of using a more-efficient\n            // string replace so that the same argument can be replaced multiple times\n            // in the same phrase.\n            interpolated = insertReplacement(interpolated, new RegExp(`%\\\\{${arg}\\\\}`, 'g'), replacement);\n        }\n    }\n    return interpolated;\n}\nconst defaultOnMissingKey = (key) => {\n    throw new Error(`missing string: ${key}`);\n};\n/**\n * Translates strings with interpolation & pluralization support.\n * Extensible with custom dictionaries and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n */\nexport default class Translator {\n    locale;\n    constructor(locales, { onMissingKey = defaultOnMissingKey } = {}) {\n        this.locale = {\n            strings: {},\n            pluralize(n) {\n                if (n === 1) {\n                    return 0;\n                }\n                return 1;\n            },\n        };\n        if (Array.isArray(locales)) {\n            locales.forEach(this.#apply, this);\n        }\n        else {\n            this.#apply(locales);\n        }\n        this.#onMissingKey = onMissingKey;\n    }\n    #onMissingKey;\n    #apply(locale) {\n        if (!locale?.strings) {\n            return;\n        }\n        const prevLocale = this.locale;\n        Object.assign(this.locale, {\n            strings: { ...prevLocale.strings, ...locale.strings },\n            pluralize: locale.pluralize || prevLocale.pluralize,\n        });\n    }\n    /**\n     * Public translate method\n     *\n     * @param key\n     * @param options with values that will be used later to replace placeholders in string\n     * @returns string translated (and interpolated)\n     */\n    translate(key, options) {\n        return this.translateArray(key, options).join('');\n    }\n    /**\n     * Get a translation and return the translated and interpolated parts as an array.\n     *\n     * @returns The translated and interpolated parts, in order.\n     */\n    translateArray(key, options) {\n        let string = this.locale.strings[key];\n        if (string == null) {\n            this.#onMissingKey(key);\n            string = key;\n        }\n        const hasPluralForms = typeof string === 'object';\n        if (hasPluralForms) {\n            if (options && typeof options.smart_count !== 'undefined') {\n                const plural = this.locale.pluralize(options.smart_count);\n                return interpolate(string[plural], options);\n            }\n            throw new Error('Attempted to use a string with plural forms, but no value was given for %{smart_count}');\n        }\n        if (typeof string !== 'string') {\n            throw new Error(`string was not a string`);\n        }\n        return interpolate(string, options);\n    }\n}\n", "/**\n * Truncates a string to the given number of chars (maxLength) by inserting '...' in the middle of that string.\n * Partially taken from https://stackoverflow.com/a/5723274/3192470.\n */\nconst separator = '...';\nexport default function truncateString(string, maxLength) {\n    // Return the empty string if maxLength is zero\n    if (maxLength === 0)\n        return '';\n    // Return original string if it's already shorter than maxLength\n    if (string.length <= maxLength)\n        return string;\n    // Return truncated substring appended of the ellipsis char if string can't be meaningfully truncated\n    if (maxLength <= separator.length + 1)\n        return `${string.slice(0, maxLength - 1)}…`;\n    const charsToShow = maxLength - separator.length;\n    const frontChars = Math.ceil(charsToShow / 2);\n    const backChars = Math.floor(charsToShow / 2);\n    return string.slice(0, frontChars) + separator + string.slice(-backChars);\n}\n", "class UserFacingApiError extends Error {\n    name = 'UserFacingApiError';\n}\nexport default UserFacingApiError;\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && childVNode.key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original == oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nconst STYLE_INNER = {\n    position: 'relative',\n    // Disabled for our use case: the wrapper elements around FileList already deal with overflow,\n    // and this additional property would hide things that we want to show.\n    //\n    // overflow: 'hidden',\n    width: '100%',\n    minHeight: '100%',\n};\nconst STYLE_CONTENT = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // Because the `top` value gets set to some offset, this `height` being 100% would make the scrollbar\n    // stretch far beyond the content. For our use case, the content div actually can get its height from\n    // the elements inside it, so we don't need to specify a `height` property at all.\n    //\n    // height: '100%',\n    width: '100%',\n    overflow: 'visible',\n};\nexport default function VirtualList({ data, rowHeight, renderRow, overscanCount = 10, padding = 4, ...props }) {\n    const scrollerRef = useRef(null);\n    const [offset, setOffset] = useState(0);\n    const [height, setHeight] = useState(0);\n    useEffect(() => {\n        function resize() {\n            if (scrollerRef.current != null &&\n                height !== scrollerRef.current.offsetHeight) {\n                setHeight(scrollerRef.current.offsetHeight);\n            }\n        }\n        resize();\n        window.addEventListener('resize', resize);\n        return () => {\n            window.removeEventListener('resize', resize);\n        };\n    }, [height]);\n    const handleScroll = useCallback(() => {\n        if (scrollerRef.current)\n            setOffset(scrollerRef.current.scrollTop);\n    }, []);\n    // first visible row index\n    let start = Math.floor(offset / rowHeight);\n    // actual number of visible rows (without overscan)\n    let visibleRowCount = Math.floor(height / rowHeight);\n    // Overscan: render blocks of rows modulo an overscan row count\n    // This dramatically reduces DOM writes during scrolling\n    if (overscanCount) {\n        start = Math.max(0, start - (start % overscanCount));\n        visibleRowCount += overscanCount;\n    }\n    const end = start + visibleRowCount + padding;\n    // data slice currently in viewport plus overscan items\n    const selection = data.slice(start, end);\n    const styleInner = { ...STYLE_INNER, height: data.length * rowHeight };\n    const styleContent = { ...STYLE_CONTENT, top: start * rowHeight };\n    // The `role=\"presentation\"` attributes ensure that these wrapper elements are not treated as list\n    // items by accessibility and outline tools.\n    return (_jsx(\"div\", { onScroll: handleScroll, ref: scrollerRef, ...props, children: _jsx(\"div\", { role: \"presentation\", style: styleInner, children: _jsx(\"div\", { role: \"presentation\", style: styleContent, children: selection.map(renderRow) }) }) }));\n}\n", "/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\nimport { Translator } from '@uppy/utils';\nexport default class BasePlugin {\n    uppy;\n    opts;\n    id;\n    defaultLocale;\n    i18n;\n    i18nArray;\n    type;\n    VERSION;\n    constructor(uppy, opts) {\n        this.uppy = uppy;\n        this.opts = opts ?? {};\n    }\n    getPluginState() {\n        const { plugins } = this.uppy.getState();\n        return (plugins?.[this.id] || {});\n    }\n    setPluginState(update) {\n        const { plugins } = this.uppy.getState();\n        this.uppy.setState({\n            plugins: {\n                ...plugins,\n                [this.id]: {\n                    ...plugins[this.id],\n                    ...update,\n                },\n            },\n        });\n    }\n    setOptions(newOpts) {\n        this.opts = { ...this.opts, ...newOpts };\n        this.setPluginState(undefined); // so that UI re-renders with new options\n        this.i18nInit();\n    }\n    i18nInit() {\n        const translator = new Translator([\n            this.defaultLocale,\n            this.uppy.locale,\n            this.opts.locale,\n        ]);\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.setPluginState(undefined); // so that UI re-renders and we see the updated locale\n    }\n    /**\n     * Extendable methods\n     * ==================\n     * These methods are here to serve as an overview of the extendable methods as well as\n     * making them not conditional in use, such as `if (this.afterUpdate)`.\n     */\n    addTarget(plugin) {\n        throw new Error(\"Extend the addTarget method to add your plugin to another plugin's target\");\n    }\n    install() { }\n    uninstall() { }\n    update(state) { }\n    // Called after every state update, after everything's mounted. Debounced.\n    afterUpdate() { }\n}\n", "/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n    #uppy;\n    #events = [];\n    constructor(uppy) {\n        this.#uppy = uppy;\n    }\n    on(event, fn) {\n        this.#events.push([event, fn]);\n        return this.#uppy.on(event, fn);\n    }\n    remove() {\n        for (const [event, fn] of this.#events.splice(0)) {\n            this.#uppy.off(event, fn);\n        }\n    }\n    onFilePause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                cb(isPaused);\n            }\n        });\n    }\n    onFileRemove(fileID, cb) {\n        this.on('file-removed', (file) => {\n            if (fileID === file.id)\n                cb(file.id);\n        });\n    }\n    onPause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                // const isPaused = this.#uppy.pauseResume(fileID)\n                cb(isPaused);\n            }\n        });\n    }\n    onRetry(fileID, cb) {\n        this.on('upload-retry', (file) => {\n            if (fileID === file?.id) {\n                cb();\n            }\n        });\n    }\n    onRetryAll(fileID, cb) {\n        this.on('retry-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onPauseAll(fileID, cb) {\n        this.on('pause-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onCancelAll(fileID, eventHandler) {\n        this.on('cancel-all', (...args) => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            eventHandler(...args);\n        });\n    }\n    onResumeAll(fileID, cb) {\n        this.on('resume-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n}\n", "import { getTimeStamp } from '@uppy/utils';\n// Swallow all logs, except errors.\n// default if logger is not set or debug: false\nconst justErrorsLogger = {\n    debug: () => { },\n    warn: () => { },\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\n// Print logs to console with namespace + timestamp,\n// set by logger: Uppy.debugLogger or debug: true\nconst debugLogger = {\n    debug: (...args) => console.debug(`[Uppy] [${getTimeStamp()}]`, ...args),\n    warn: (...args) => console.warn(`[Uppy] [${getTimeStamp()}]`, ...args),\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\nexport { justErrorsLogger, debugLogger };\n", "import prettierBytes from '@transloadit/prettier-bytes';\n// @ts-ignore untyped\nimport match from 'mime-match';\nconst defaultOptions = {\n    maxFileSize: null,\n    minFileSize: null,\n    maxTotalFileSize: null,\n    maxNumberOfFiles: null,\n    minNumberOfFiles: null,\n    allowedFileTypes: null,\n    requiredMetaFields: [],\n};\nclass RestrictionError extends Error {\n    isUserFacing;\n    file;\n    constructor(message, opts) {\n        super(message);\n        this.isUserFacing = opts?.isUserFacing ?? true;\n        if (opts?.file) {\n            this.file = opts.file; // only some restriction errors are related to a particular file\n        }\n    }\n    isRestriction = true;\n}\nclass Restricter {\n    getI18n;\n    getOpts;\n    constructor(getOpts, getI18n) {\n        this.getI18n = getI18n;\n        this.getOpts = () => {\n            const opts = getOpts();\n            if (opts.restrictions?.allowedFileTypes != null &&\n                !Array.isArray(opts.restrictions.allowedFileTypes)) {\n                throw new TypeError('`restrictions.allowedFileTypes` must be an array');\n            }\n            return opts;\n        };\n    }\n    // Because these operations are slow, we cannot run them for every file (if we are adding multiple files)\n    validateAggregateRestrictions(existingFiles, addingFiles) {\n        const { maxTotalFileSize, maxNumberOfFiles } = this.getOpts().restrictions;\n        if (maxNumberOfFiles) {\n            const nonGhostFiles = existingFiles.filter((f) => !f.isGhost);\n            if (nonGhostFiles.length + addingFiles.length > maxNumberOfFiles) {\n                throw new RestrictionError(`${this.getI18n()('youCanOnlyUploadX', {\n                    smart_count: maxNumberOfFiles,\n                })}`);\n            }\n        }\n        if (maxTotalFileSize) {\n            const totalFilesSize = [...existingFiles, ...addingFiles].reduce((total, f) => total + (f.size ?? 0), 0);\n            if (totalFilesSize > maxTotalFileSize) {\n                throw new RestrictionError(this.getI18n()('aggregateExceedsSize', {\n                    sizeAllowed: prettierBytes(maxTotalFileSize),\n                    size: prettierBytes(totalFilesSize),\n                }));\n            }\n        }\n    }\n    validateSingleFile(file) {\n        const { maxFileSize, minFileSize, allowedFileTypes } = this.getOpts().restrictions;\n        if (allowedFileTypes) {\n            const isCorrectFileType = allowedFileTypes.some((type) => {\n                // check if this is a mime-type\n                if (type.includes('/')) {\n                    if (!file.type)\n                        return false;\n                    return match(file.type.replace(/;.*?$/, ''), type);\n                }\n                // otherwise this is likely an extension\n                if (type[0] === '.' && file.extension) {\n                    return file.extension.toLowerCase() === type.slice(1).toLowerCase();\n                }\n                return false;\n            });\n            if (!isCorrectFileType) {\n                const allowedFileTypesString = allowedFileTypes.join(', ');\n                throw new RestrictionError(this.getI18n()('youCanOnlyUploadFileTypes', {\n                    types: allowedFileTypesString,\n                }), { file });\n            }\n        }\n        // We can't check maxFileSize if the size is unknown.\n        if (maxFileSize && file.size != null && file.size > maxFileSize) {\n            throw new RestrictionError(this.getI18n()('exceedsSize', {\n                size: prettierBytes(maxFileSize),\n                file: file.name ?? this.getI18n()('unnamed'),\n            }), { file });\n        }\n        // We can't check minFileSize if the size is unknown.\n        if (minFileSize && file.size != null && file.size < minFileSize) {\n            throw new RestrictionError(this.getI18n()('inferiorSize', {\n                size: prettierBytes(minFileSize),\n            }), { file });\n        }\n    }\n    validate(existingFiles, addingFiles) {\n        addingFiles.forEach((addingFile) => {\n            this.validateSingleFile(addingFile);\n        });\n        this.validateAggregateRestrictions(existingFiles, addingFiles);\n    }\n    validateMinNumberOfFiles(files) {\n        const { minNumberOfFiles } = this.getOpts().restrictions;\n        if (minNumberOfFiles && Object.keys(files).length < minNumberOfFiles) {\n            throw new RestrictionError(this.getI18n()('youHaveToAtLeastSelectX', {\n                smart_count: minNumberOfFiles,\n            }));\n        }\n    }\n    getMissingRequiredMetaFields(file) {\n        const error = new RestrictionError(this.getI18n()('missingRequiredMetaFieldOnFile', {\n            fileName: file.name ?? this.getI18n()('unnamed'),\n        }));\n        const { requiredMetaFields } = this.getOpts().restrictions;\n        const missingFields = [];\n        for (const field of requiredMetaFields) {\n            if (!Object.hasOwn(file.meta, field) || file.meta[field] === '') {\n                missingFields.push(field);\n            }\n        }\n        return { missingFields, error };\n    }\n}\nexport { Restricter, defaultOptions, RestrictionError };\n", "import { findDOMElement, getTextDirection } from '@uppy/utils';\nimport { render } from 'preact';\nimport BasePlugin from './BasePlugin.js';\n/**\n * Defer a frequent call to the microtask queue.\n */\nfunction debounce(fn) {\n    let calling = null;\n    let latestArgs;\n    return (...args) => {\n        latestArgs = args;\n        if (!calling) {\n            calling = Promise.resolve().then(() => {\n                calling = null;\n                // At this point `args` may be different from the most\n                // recent state, if multiple calls happened since this task\n                // was queued. So we use the `latestArgs`, which definitely\n                // is the most recent call.\n                return fn(...latestArgs);\n            });\n        }\n        return calling;\n    };\n}\n/**\n * UIPlugin is the extended version of BasePlugin to incorporate rendering with Preact.\n * Use this for plugins that need a user interface.\n *\n * For plugins without an user interface, see BasePlugin.\n */\nclass UIPlugin extends BasePlugin {\n    #updateUI;\n    isTargetDOMEl;\n    el;\n    parent;\n    title;\n    getTargetPlugin(target) {\n        let targetPlugin;\n        if (typeof target?.addTarget === 'function') {\n            // Targeting a plugin *instance*\n            targetPlugin = target;\n            if (!(targetPlugin instanceof UIPlugin)) {\n                console.warn(new Error('The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.', { cause: { targetPlugin, UIPlugin } }));\n            }\n        }\n        else if (typeof target === 'function') {\n            // Targeting a plugin type\n            const Target = target;\n            // Find the target plugin instance.\n            this.uppy.iteratePlugins((p) => {\n                if (p instanceof Target) {\n                    targetPlugin = p;\n                }\n            });\n        }\n        return targetPlugin;\n    }\n    /**\n     * Check if supplied `target` is a DOM element or an `object`.\n     * If it’s an object — target is a plugin, and we search `plugins`\n     * for a plugin with same name and return its target.\n     */\n    mount(target, plugin) {\n        const callerPluginName = plugin.id;\n        const targetElement = findDOMElement(target);\n        if (targetElement) {\n            this.isTargetDOMEl = true;\n            // When target is <body> with a single <div> element,\n            // Preact thinks it’s the Uppy root element in there when doing a diff,\n            // and destroys it. So we are creating a fragment (could be empty div)\n            const uppyRootElement = document.createElement('div');\n            uppyRootElement.classList.add('uppy-Root');\n            // API for plugins that require a synchronous rerender.\n            this.#updateUI = debounce((state) => {\n                // plugin could be removed, but this.rerender is debounced below,\n                // so it could still be called even after uppy.removePlugin or uppy.destroy\n                // hence the check\n                if (!this.uppy.getPlugin(this.id))\n                    return;\n                render(this.render(state, uppyRootElement), uppyRootElement);\n                this.afterUpdate();\n            });\n            this.uppy.log(`Installing ${callerPluginName} to a DOM element '${target}'`);\n            if (this.opts.replaceTargetContent) {\n                // Doing render(h(null), targetElement), which should have been\n                // a better way, since because the component might need to do additional cleanup when it is removed,\n                // stopped working — Preact just adds null into target, not replacing\n                targetElement.innerHTML = '';\n            }\n            render(this.render(this.uppy.getState(), uppyRootElement), uppyRootElement);\n            this.el = uppyRootElement;\n            targetElement.appendChild(uppyRootElement);\n            // Set the text direction if the page has not defined one.\n            uppyRootElement.dir =\n                this.opts.direction || getTextDirection(uppyRootElement) || 'ltr';\n            this.onMount();\n            return this.el;\n        }\n        const targetPlugin = this.getTargetPlugin(target);\n        if (targetPlugin) {\n            this.uppy.log(`Installing ${callerPluginName} to ${targetPlugin.id}`);\n            this.parent = targetPlugin;\n            this.el = targetPlugin.addTarget(plugin);\n            this.onMount();\n            return this.el;\n        }\n        this.uppy.log(`Not installing ${callerPluginName}`);\n        let message = `Invalid target option given to ${callerPluginName}.`;\n        if (typeof target === 'function') {\n            message +=\n                ' The given target is not a Plugin class. ' +\n                    \"Please check that you're not specifying a React Component instead of a plugin. \" +\n                    'If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: ' +\n                    'run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.';\n        }\n        else {\n            message +=\n                'If you meant to target an HTML element, please make sure that the element exists. ' +\n                    'Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. ' +\n                    '(see https://github.com/transloadit/uppy/issues/1042)\\n\\n' +\n                    'If you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.';\n        }\n        throw new Error(message);\n    }\n    /**\n     * Called when plugin is mounted, whether in DOM or into another plugin.\n     * Needed because sometimes plugins are mounted separately/after `install`,\n     * so this.el and this.parent might not be available in `install`.\n     * This is the case with @uppy/react plugins, for example.\n     */\n    render(state, container) {\n        throw new Error('Extend the render method to add your plugin to a DOM element');\n    }\n    update(state) {\n        if (this.el != null) {\n            this.#updateUI?.(state);\n        }\n    }\n    unmount() {\n        if (this.isTargetDOMEl) {\n            this.el?.remove();\n        }\n        this.onUnmount();\n    }\n    onMount() { }\n    onUnmount() { }\n}\nexport default UIPlugin;\n", "{\n  \"name\": \"@uppy/store-default\",\n  \"description\": \"The default simple object-based store for Uppy.\",\n  \"version\": \"5.0.0\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-store\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ]\n}", "import packageJson from '../package.json' with { type: 'json' };\n/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n    static VERSION = packageJson.version;\n    state = {};\n    #callbacks = new Set();\n    getState() {\n        return this.state;\n    }\n    setState(patch) {\n        const prevState = { ...this.state };\n        const nextState = { ...this.state, ...patch };\n        this.state = nextState;\n        this.#publish(prevState, nextState, patch);\n    }\n    subscribe(listener) {\n        this.#callbacks.add(listener);\n        return () => {\n            this.#callbacks.delete(listener);\n        };\n    }\n    #publish(...args) {\n        this.#callbacks.forEach((listener) => {\n            listener(...args);\n        });\n    }\n}\nexport default DefaultStore;\n", "/* global AggregateError */\nimport DefaultStore, {} from '@uppy/store-default';\nimport { getFileNameAndExtension, getFileType, getSafeFileId, Translator, } from '@uppy/utils';\nimport throttle from 'lodash/throttle.js';\n// @ts-ignore untyped\nimport ee from 'namespace-emitter';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport getFileName from './getFileName.js';\nimport locale from './locale.js';\nimport { debugLogger, justErrorsLogger } from './loggers.js';\nimport { defaultOptions as defaultRestrictionOptions, Restricter, RestrictionError, } from './Restricter.js';\nimport supportsUploadProgress from './supportsUploadProgress.js';\nconst defaultUploadState = {\n    totalProgress: 0,\n    allowNewUpload: true,\n    error: null,\n    recoveredState: null,\n};\n/**\n * Uppy Core module.\n * Manages plugins, state updates, acts as an event bus,\n * adds/removes files and metadata.\n */\nexport class Uppy {\n    static VERSION = packageJson.version;\n    #plugins = Object.create(null);\n    #restricter;\n    #storeUnsubscribe;\n    #emitter = ee();\n    #preProcessors = new Set();\n    #uploaders = new Set();\n    #postProcessors = new Set();\n    defaultLocale;\n    locale;\n    // The user optionally passes in options, but we set defaults for missing options.\n    // We consider all options present after the contructor has run.\n    opts;\n    store;\n    // Warning: do not use this from a plugin, as it will cause the plugins' translations to be missing\n    i18n;\n    i18nArray;\n    scheduledAutoProceed = null;\n    wasOffline = false;\n    /**\n     * Instantiate Uppy\n     */\n    constructor(opts) {\n        this.defaultLocale = locale;\n        const defaultOptions = {\n            id: 'uppy',\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            debug: false,\n            restrictions: defaultRestrictionOptions,\n            meta: {},\n            onBeforeFileAdded: (file, files) => !Object.hasOwn(files, file.id),\n            onBeforeUpload: (files) => files,\n            store: new DefaultStore(),\n            logger: justErrorsLogger,\n            infoTimeout: 5000,\n        };\n        const merged = { ...defaultOptions, ...opts };\n        // Merge default options with the ones set by user,\n        // making sure to merge restrictions too\n        this.opts = {\n            ...merged,\n            restrictions: {\n                ...defaultOptions.restrictions,\n                ...opts?.restrictions,\n            },\n        };\n        // Support debug: true for backwards-compatability, unless logger is set in opts\n        // opts instead of this.opts to avoid comparing objects — we set logger: justErrorsLogger in defaultOptions\n        if (opts?.logger && opts.debug) {\n            this.log('You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.', 'warning');\n        }\n        else if (opts?.debug) {\n            this.opts.logger = debugLogger;\n        }\n        this.log(`Using Core v${Uppy.VERSION}`);\n        this.i18nInit();\n        this.store = this.opts.store;\n        this.setState({\n            ...defaultUploadState,\n            plugins: {},\n            files: {},\n            currentUploads: {},\n            capabilities: {\n                uploadProgress: supportsUploadProgress(),\n                individualCancellation: true,\n                resumableUploads: false,\n            },\n            meta: { ...this.opts.meta },\n            info: [],\n        });\n        this.#restricter = new Restricter(() => this.opts, () => this.i18n);\n        this.#storeUnsubscribe = this.store.subscribe((prevState, nextState, patch) => {\n            this.emit('state-update', prevState, nextState, patch);\n            this.updateAll(nextState);\n        });\n        // Exposing uppy object on window for debugging and testing\n        if (this.opts.debug && typeof window !== 'undefined') {\n            // @ts-ignore Mutating the global object for debug purposes\n            window[this.opts.id] = this;\n        }\n        this.#addListeners();\n    }\n    emit(event, ...args) {\n        this.#emitter.emit(event, ...args);\n    }\n    on(event, callback) {\n        this.#emitter.on(event, callback);\n        return this;\n    }\n    once(event, callback) {\n        this.#emitter.once(event, callback);\n        return this;\n    }\n    off(event, callback) {\n        this.#emitter.off(event, callback);\n        return this;\n    }\n    /**\n     * Iterate on all plugins and run `update` on them.\n     * Called each time state changes.\n     *\n     */\n    updateAll(state) {\n        this.iteratePlugins((plugin) => {\n            plugin.update(state);\n        });\n    }\n    /**\n     * Updates state with a patch\n     */\n    setState(patch) {\n        this.store.setState(patch);\n    }\n    /**\n     * Returns current state.\n     */\n    getState() {\n        return this.store.getState();\n    }\n    patchFilesState(filesWithNewState) {\n        const existingFilesState = this.getState().files;\n        this.setState({\n            files: {\n                ...existingFilesState,\n                ...Object.fromEntries(Object.entries(filesWithNewState).map(([fileID, newFileState]) => [\n                    fileID,\n                    {\n                        ...existingFilesState[fileID],\n                        ...newFileState,\n                    },\n                ])),\n            },\n        });\n    }\n    /**\n     * Shorthand to set state for a specific file.\n     */\n    setFileState(fileID, state) {\n        if (!this.getState().files[fileID]) {\n            throw new Error(`Can’t set state for ${fileID} (the file could have been removed)`);\n        }\n        this.patchFilesState({ [fileID]: state });\n    }\n    i18nInit() {\n        const onMissingKey = (key) => this.log(`Missing i18n string: ${key}`, 'error');\n        const translator = new Translator([this.defaultLocale, this.opts.locale], {\n            onMissingKey,\n        });\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.locale = translator.locale;\n    }\n    setOptions(newOpts) {\n        this.opts = {\n            ...this.opts,\n            ...newOpts,\n            restrictions: {\n                ...this.opts.restrictions,\n                ...newOpts?.restrictions,\n            },\n        };\n        if (newOpts.meta) {\n            this.setMeta(newOpts.meta);\n        }\n        this.i18nInit();\n        if (newOpts.locale) {\n            this.iteratePlugins((plugin) => {\n                plugin.setOptions(newOpts);\n            });\n        }\n        // Note: this is not the preact `setState`, it's an internal function that has the same name.\n        this.setState(undefined); // so that UI re-renders with new options\n    }\n    resetProgress() {\n        const defaultProgress = {\n            percentage: 0,\n            bytesUploaded: false,\n            uploadComplete: false,\n            uploadStarted: null,\n        };\n        const files = { ...this.getState().files };\n        const updatedFiles = Object.create(null);\n        Object.keys(files).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...files[fileID],\n                progress: {\n                    ...files[fileID].progress,\n                    ...defaultProgress,\n                },\n                // @ts-expect-error these typed are inserted\n                // into the namespace in their respective packages\n                // but core isn't ware of those\n                tus: undefined,\n                transloadit: undefined,\n            };\n        });\n        this.setState({ files: updatedFiles, ...defaultUploadState });\n    }\n    clear() {\n        const { capabilities, currentUploads } = this.getState();\n        if (Object.keys(currentUploads).length > 0 &&\n            !capabilities.individualCancellation) {\n            throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n        }\n        this.setState({ ...defaultUploadState, files: {} });\n    }\n    addPreProcessor(fn) {\n        this.#preProcessors.add(fn);\n    }\n    removePreProcessor(fn) {\n        return this.#preProcessors.delete(fn);\n    }\n    addPostProcessor(fn) {\n        this.#postProcessors.add(fn);\n    }\n    removePostProcessor(fn) {\n        return this.#postProcessors.delete(fn);\n    }\n    addUploader(fn) {\n        this.#uploaders.add(fn);\n    }\n    removeUploader(fn) {\n        return this.#uploaders.delete(fn);\n    }\n    setMeta(data) {\n        const updatedMeta = { ...this.getState().meta, ...data };\n        const updatedFiles = { ...this.getState().files };\n        Object.keys(updatedFiles).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                meta: { ...updatedFiles[fileID].meta, ...data },\n            };\n        });\n        this.log('Adding metadata:');\n        this.log(data);\n        this.setState({\n            meta: updatedMeta,\n            files: updatedFiles,\n        });\n    }\n    setFileMeta(fileID, data) {\n        const updatedFiles = { ...this.getState().files };\n        if (!updatedFiles[fileID]) {\n            this.log(`Was trying to set metadata for a file that has been removed: ${fileID}`);\n            return;\n        }\n        const newMeta = { ...updatedFiles[fileID].meta, ...data };\n        updatedFiles[fileID] = { ...updatedFiles[fileID], meta: newMeta };\n        this.setState({ files: updatedFiles });\n    }\n    /**\n     * Get a file object.\n     */\n    getFile(fileID) {\n        return this.getState().files[fileID];\n    }\n    /**\n     * Get all files in an array.\n     */\n    getFiles() {\n        const { files } = this.getState();\n        return Object.values(files);\n    }\n    getFilesByIds(ids) {\n        return ids.map((id) => this.getFile(id));\n    }\n    getObjectOfFilesPerState() {\n        const { files: filesObject, totalProgress, error } = this.getState();\n        const files = Object.values(filesObject);\n        const inProgressFiles = [];\n        const newFiles = [];\n        const startedFiles = [];\n        const uploadStartedFiles = [];\n        const pausedFiles = [];\n        const completeFiles = [];\n        const erroredFiles = [];\n        const inProgressNotPausedFiles = [];\n        const processingFiles = [];\n        for (const file of files) {\n            const { progress } = file;\n            if (!progress.uploadComplete && progress.uploadStarted) {\n                inProgressFiles.push(file);\n                if (!file.isPaused) {\n                    inProgressNotPausedFiles.push(file);\n                }\n            }\n            if (!progress.uploadStarted) {\n                newFiles.push(file);\n            }\n            if (progress.uploadStarted ||\n                progress.preprocess ||\n                progress.postprocess) {\n                startedFiles.push(file);\n            }\n            if (progress.uploadStarted) {\n                uploadStartedFiles.push(file);\n            }\n            if (file.isPaused) {\n                pausedFiles.push(file);\n            }\n            if (progress.uploadComplete) {\n                completeFiles.push(file);\n            }\n            if (file.error) {\n                erroredFiles.push(file);\n            }\n            if (progress.preprocess || progress.postprocess) {\n                processingFiles.push(file);\n            }\n        }\n        return {\n            newFiles,\n            startedFiles,\n            uploadStartedFiles,\n            pausedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted: uploadStartedFiles.length > 0,\n            isAllComplete: totalProgress === 100 &&\n                completeFiles.length === files.length &&\n                processingFiles.length === 0,\n            isAllErrored: !!error && erroredFiles.length === files.length,\n            isAllPaused: inProgressFiles.length !== 0 &&\n                pausedFiles.length === inProgressFiles.length,\n            isUploadInProgress: inProgressFiles.length > 0,\n            isSomeGhost: files.some((file) => file.isGhost),\n        };\n    }\n    #informAndEmit(errors) {\n        for (const error of errors) {\n            if (error.isRestriction) {\n                this.emit('restriction-failed', error.file, error);\n            }\n            else {\n                this.emit('error', error, error.file);\n            }\n            this.log(error, 'warning');\n        }\n        const userFacingErrors = errors.filter((error) => error.isUserFacing);\n        // don't flood the user: only show the first 4 toasts\n        const maxNumToShow = 4;\n        const firstErrors = userFacingErrors.slice(0, maxNumToShow);\n        const additionalErrors = userFacingErrors.slice(maxNumToShow);\n        firstErrors.forEach(({ message, details = '' }) => {\n            this.info({ message, details }, 'error', this.opts.infoTimeout);\n        });\n        if (additionalErrors.length > 0) {\n            this.info({\n                message: this.i18n('additionalRestrictionsFailed', {\n                    count: additionalErrors.length,\n                }),\n            });\n        }\n    }\n    validateRestrictions(file, files = this.getFiles()) {\n        try {\n            this.#restricter.validate(files, [file]);\n        }\n        catch (err) {\n            return err;\n        }\n        return null;\n    }\n    validateSingleFile(file) {\n        try {\n            this.#restricter.validateSingleFile(file);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    validateAggregateRestrictions(files) {\n        const existingFiles = this.getFiles();\n        try {\n            this.#restricter.validateAggregateRestrictions(existingFiles, files);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    #checkRequiredMetaFieldsOnFile(file) {\n        const { missingFields, error } = this.#restricter.getMissingRequiredMetaFields(file);\n        if (missingFields.length > 0) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: missingFields,\n                error: error.message,\n            });\n            this.log(error.message);\n            this.emit('restriction-failed', file, error);\n            return false;\n        }\n        if (missingFields.length === 0 && file.missingRequiredMetaFields) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: [],\n            });\n        }\n        return true;\n    }\n    #checkRequiredMetaFields(files) {\n        let success = true;\n        for (const file of Object.values(files)) {\n            if (!this.#checkRequiredMetaFieldsOnFile(file)) {\n                success = false;\n            }\n        }\n        return success;\n    }\n    #assertNewUploadAllowed(file) {\n        const { allowNewUpload } = this.getState();\n        if (allowNewUpload === false) {\n            const error = new RestrictionError(this.i18n('noMoreFilesAllowed'), {\n                file,\n            });\n            this.#informAndEmit([error]);\n            throw error;\n        }\n    }\n    checkIfFileAlreadyExists(fileID) {\n        const { files } = this.getState();\n        if (files[fileID] && !files[fileID].isGhost) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Create a file state object based on user-provided `addFile()` options.\n     */\n    #transformFile(fileDescriptorOrFile) {\n        // Uppy expects files in { name, type, size, data } format.\n        // If the actual File object is passed from input[type=file] or drag-drop,\n        // we normalize it to match Uppy file object\n        const file = (fileDescriptorOrFile instanceof File\n            ? {\n                name: fileDescriptorOrFile.name,\n                type: fileDescriptorOrFile.type,\n                size: fileDescriptorOrFile.size,\n                data: fileDescriptorOrFile,\n            }\n            : fileDescriptorOrFile);\n        const fileType = getFileType(file);\n        const fileName = getFileName(fileType, file);\n        const fileExtension = getFileNameAndExtension(fileName).extension;\n        const id = getSafeFileId(file, this.getID());\n        const meta = file.meta || {};\n        meta.name = fileName;\n        meta.type = fileType;\n        // `null` means the size is unknown.\n        const size = Number.isFinite(file.data.size)\n            ? file.data.size\n            : null;\n        return {\n            source: file.source || '',\n            id,\n            name: fileName,\n            extension: fileExtension || '',\n            meta: {\n                ...this.getState().meta,\n                ...meta,\n            },\n            type: fileType,\n            data: file.data,\n            progress: {\n                percentage: 0,\n                bytesUploaded: false,\n                bytesTotal: size,\n                uploadComplete: false,\n                uploadStarted: null,\n            },\n            size,\n            isGhost: false,\n            isRemote: file.isRemote || false,\n            remote: file.remote,\n            preview: file.preview,\n        };\n    }\n    // Schedule an upload if `autoProceed` is enabled.\n    #startIfAutoProceed() {\n        if (this.opts.autoProceed && !this.scheduledAutoProceed) {\n            this.scheduledAutoProceed = setTimeout(() => {\n                this.scheduledAutoProceed = null;\n                this.upload().catch((err) => {\n                    if (!err.isRestriction) {\n                        this.log(err.stack || err.message || err);\n                    }\n                });\n            }, 4);\n        }\n    }\n    #checkAndUpdateFileState(filesToAdd) {\n        let { files: existingFiles } = this.getState();\n        // create a copy of the files object only once\n        let nextFilesState = { ...existingFiles };\n        const validFilesToAdd = [];\n        const errors = [];\n        for (const fileToAdd of filesToAdd) {\n            try {\n                let newFile = this.#transformFile(fileToAdd);\n                // If a file has been recovered (Golden Retriever), but we were unable to recover its data (probably too large),\n                // users are asked to re-select these half-recovered files and then this method will be called again.\n                // In order to keep the progress, meta and everything else, we keep the existing file,\n                // but we replace `data`, and we remove `isGhost`, because the file is no longer a ghost now\n                const isGhost = existingFiles[newFile.id]?.isGhost;\n                if (isGhost) {\n                    const existingFileState = existingFiles[newFile.id];\n                    newFile = {\n                        ...existingFileState,\n                        isGhost: false,\n                        data: fileToAdd.data,\n                    };\n                    this.log(`Replaced the blob in the restored ghost file: ${newFile.name}, ${newFile.id}`);\n                }\n                const onBeforeFileAddedResult = this.opts.onBeforeFileAdded(newFile, nextFilesState);\n                // update state after onBeforeFileAdded\n                existingFiles = this.getState().files;\n                nextFilesState = { ...existingFiles, ...nextFilesState };\n                if (!onBeforeFileAddedResult &&\n                    this.checkIfFileAlreadyExists(newFile.id)) {\n                    throw new RestrictionError(this.i18n('noDuplicates', {\n                        fileName: newFile.name ?? this.i18n('unnamed'),\n                    }), { file: fileToAdd });\n                }\n                // Pass through reselected files from Golden Retriever\n                if (onBeforeFileAddedResult === false && !isGhost) {\n                    // Don’t show UI info for this error, as it should be done by the developer\n                    throw new RestrictionError('Cannot add the file because onBeforeFileAdded returned false.', { isUserFacing: false, file: fileToAdd });\n                }\n                else if (typeof onBeforeFileAddedResult === 'object' &&\n                    onBeforeFileAddedResult !== null) {\n                    newFile = onBeforeFileAddedResult;\n                }\n                this.#restricter.validateSingleFile(newFile);\n                // need to add it to the new local state immediately, so we can use the state to validate the next files too\n                nextFilesState[newFile.id] = newFile;\n                validFilesToAdd.push(newFile);\n            }\n            catch (err) {\n                errors.push(err);\n            }\n        }\n        try {\n            // need to run this separately because it's much more slow, so if we run it inside the for-loop it will be very slow\n            // when many files are added\n            this.#restricter.validateAggregateRestrictions(Object.values(existingFiles), validFilesToAdd);\n        }\n        catch (err) {\n            errors.push(err);\n            // If we have any aggregate error, don't allow adding this batch\n            return {\n                nextFilesState: existingFiles,\n                validFilesToAdd: [],\n                errors,\n            };\n        }\n        return {\n            nextFilesState,\n            validFilesToAdd,\n            errors,\n        };\n    }\n    /**\n     * Add a new file to `state.files`. This will run `onBeforeFileAdded`,\n     * try to guess file type in a clever way, check file against restrictions,\n     * and start an upload if `autoProceed === true`.\n     */\n    addFile(file) {\n        this.#assertNewUploadAllowed(file);\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState([file]);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        if (errors.length > 0)\n            throw errors[0];\n        this.setState({ files: nextFilesState });\n        const [firstValidFileToAdd] = validFilesToAdd;\n        this.emit('file-added', firstValidFileToAdd);\n        this.emit('files-added', validFilesToAdd);\n        this.log(`Added file: ${firstValidFileToAdd.name}, ${firstValidFileToAdd.id}, mime type: ${firstValidFileToAdd.type}`);\n        this.#startIfAutoProceed();\n        return firstValidFileToAdd.id;\n    }\n    /**\n     * Add multiple files to `state.files`. See the `addFile()` documentation.\n     *\n     * If an error occurs while adding a file, it is logged and the user is notified.\n     * This is good for UI plugins, but not for programmatic use.\n     * Programmatic users should usually still use `addFile()` on individual files.\n     */\n    addFiles(fileDescriptors) {\n        this.#assertNewUploadAllowed();\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState(fileDescriptors);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        const nonRestrictionErrors = errors.filter((error) => !error.isRestriction);\n        if (nonRestrictionErrors.length > 0) {\n            let message = 'Multiple errors occurred while adding files:\\n';\n            nonRestrictionErrors.forEach((subError) => {\n                message += `\\n * ${subError.message}`;\n            });\n            this.info({\n                message: this.i18n('addBulkFilesFailed', {\n                    smart_count: nonRestrictionErrors.length,\n                }),\n                details: message,\n            }, 'error', this.opts.infoTimeout);\n            if (typeof AggregateError === 'function') {\n                throw new AggregateError(nonRestrictionErrors, message);\n            }\n            else {\n                const err = new Error(message);\n                // @ts-expect-error fallback when AggregateError is not available\n                err.errors = nonRestrictionErrors;\n                throw err;\n            }\n        }\n        // OK, we haven't thrown an error, we can start updating state and emitting events now:\n        this.setState({ files: nextFilesState });\n        validFilesToAdd.forEach((file) => {\n            this.emit('file-added', file);\n        });\n        this.emit('files-added', validFilesToAdd);\n        if (validFilesToAdd.length > 5) {\n            this.log(`Added batch of ${validFilesToAdd.length} files`);\n        }\n        else {\n            Object.values(validFilesToAdd).forEach((file) => {\n                this.log(`Added file: ${file.name}\\n id: ${file.id}\\n type: ${file.type}`);\n            });\n        }\n        if (validFilesToAdd.length > 0) {\n            this.#startIfAutoProceed();\n        }\n    }\n    removeFiles(fileIDs) {\n        const { files, currentUploads } = this.getState();\n        const updatedFiles = { ...files };\n        const updatedUploads = { ...currentUploads };\n        const removedFiles = Object.create(null);\n        fileIDs.forEach((fileID) => {\n            if (files[fileID]) {\n                removedFiles[fileID] = files[fileID];\n                delete updatedFiles[fileID];\n            }\n        });\n        // Remove files from the `fileIDs` list in each upload.\n        function fileIsNotRemoved(uploadFileID) {\n            return removedFiles[uploadFileID] === undefined;\n        }\n        Object.keys(updatedUploads).forEach((uploadID) => {\n            const newFileIDs = currentUploads[uploadID].fileIDs.filter(fileIsNotRemoved);\n            // Remove the upload if no files are associated with it anymore.\n            if (newFileIDs.length === 0) {\n                delete updatedUploads[uploadID];\n                return;\n            }\n            const { capabilities } = this.getState();\n            if (newFileIDs.length !== currentUploads[uploadID].fileIDs.length &&\n                !capabilities.individualCancellation) {\n                throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n            }\n            updatedUploads[uploadID] = {\n                ...currentUploads[uploadID],\n                fileIDs: newFileIDs,\n            };\n        });\n        const stateUpdate = {\n            currentUploads: updatedUploads,\n            files: updatedFiles,\n        };\n        // If all files were removed - allow new uploads,\n        // and clear recoveredState\n        if (Object.keys(updatedFiles).length === 0) {\n            stateUpdate.allowNewUpload = true;\n            stateUpdate.error = null;\n            stateUpdate.recoveredState = null;\n        }\n        this.setState(stateUpdate);\n        this.#updateTotalProgressThrottled();\n        const removedFileIDs = Object.keys(removedFiles);\n        removedFileIDs.forEach((fileID) => {\n            this.emit('file-removed', removedFiles[fileID]);\n        });\n        if (removedFileIDs.length > 5) {\n            this.log(`Removed ${removedFileIDs.length} files`);\n        }\n        else {\n            this.log(`Removed files: ${removedFileIDs.join(', ')}`);\n        }\n    }\n    removeFile(fileID) {\n        this.removeFiles([fileID]);\n    }\n    pauseResume(fileID) {\n        if (!this.getState().capabilities.resumableUploads ||\n            this.getFile(fileID).progress.uploadComplete) {\n            return undefined;\n        }\n        const file = this.getFile(fileID);\n        const wasPaused = file.isPaused || false;\n        const isPaused = !wasPaused;\n        this.setFileState(fileID, {\n            isPaused,\n        });\n        this.emit('upload-pause', file, isPaused);\n        return isPaused;\n    }\n    pauseAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = { ...updatedFiles[file], isPaused: true };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('pause-all');\n    }\n    resumeAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = {\n                ...updatedFiles[file],\n                isPaused: false,\n                error: null,\n            };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('resume-all');\n    }\n    #getFilesToRetry() {\n        const { files } = this.getState();\n        return Object.keys(files).filter((fileId) => {\n            const file = files[fileId];\n            // Only retry files that have errors AND don't have missing required metadata\n            return (file.error &&\n                (!file.missingRequiredMetaFields ||\n                    file.missingRequiredMetaFields.length === 0));\n        });\n    }\n    async #doRetryAll() {\n        const filesToRetry = this.#getFilesToRetry();\n        const updatedFiles = { ...this.getState().files };\n        filesToRetry.forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                isPaused: false,\n                error: null,\n            };\n        });\n        this.setState({\n            files: updatedFiles,\n            error: null,\n        });\n        this.emit('retry-all', this.getFilesByIds(filesToRetry));\n        if (filesToRetry.length === 0) {\n            return {\n                successful: [],\n                failed: [],\n            };\n        }\n        const uploadID = this.#createUpload(filesToRetry, {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    async retryAll() {\n        const result = await this.#doRetryAll();\n        this.emit('complete', result);\n        return result;\n    }\n    cancelAll() {\n        this.emit('cancel-all');\n        const { files } = this.getState();\n        const fileIDs = Object.keys(files);\n        if (fileIDs.length) {\n            this.removeFiles(fileIDs);\n        }\n        this.setState(defaultUploadState);\n    }\n    retryUpload(fileID) {\n        this.setFileState(fileID, {\n            error: null,\n            isPaused: false,\n        });\n        this.emit('upload-retry', this.getFile(fileID));\n        const uploadID = this.#createUpload([fileID], {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    logout() {\n        this.iteratePlugins((plugin) => {\n            ;\n            plugin.provider?.logout?.();\n        });\n    }\n    #handleUploadProgress = (file, progress) => {\n        const fileInState = file ? this.getFile(file.id) : undefined;\n        if (file == null || !fileInState) {\n            this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n            return;\n        }\n        if (fileInState.progress.percentage === 100) {\n            this.log(`Not setting progress for a file that has been already uploaded: ${file.id}`);\n            return;\n        }\n        const newProgress = {\n            bytesTotal: progress.bytesTotal,\n            // bytesTotal may be null or zero; in that case we can't divide by it\n            percentage: progress.bytesTotal != null &&\n                Number.isFinite(progress.bytesTotal) &&\n                progress.bytesTotal > 0\n                ? Math.round((progress.bytesUploaded / progress.bytesTotal) * 100)\n                : undefined,\n        };\n        if (fileInState.progress.uploadStarted != null) {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                    bytesUploaded: progress.bytesUploaded,\n                },\n            });\n        }\n        else {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                },\n            });\n        }\n        this.#updateTotalProgressThrottled();\n    };\n    #updateTotalProgress() {\n        const totalProgress = this.#calculateTotalProgress();\n        let totalProgressPercent = null;\n        if (totalProgress != null) {\n            totalProgressPercent = Math.round(totalProgress * 100);\n            if (totalProgressPercent > 100)\n                totalProgressPercent = 100;\n            else if (totalProgressPercent < 0)\n                totalProgressPercent = 0;\n        }\n        this.emit('progress', totalProgressPercent ?? 0);\n        this.setState({\n            totalProgress: totalProgressPercent ?? 0,\n        });\n    }\n    // ___Why throttle at 500ms?\n    //    - We must throttle at >250ms for superfocus in Dashboard to work well\n    //    (because animation takes 0.25s, and we want to wait for all animations to be over before refocusing).\n    //    [Practical Check]: if thottle is at 100ms, then if you are uploading a file,\n    //    and click 'ADD MORE FILES', - focus won't activate in Firefox.\n    //    - We must throttle at around >500ms to avoid performance lags.\n    //    [Practical Check] Firefox, try to upload a big file for a prolonged period of time. Laptop will start to heat up.\n    #updateTotalProgressThrottled = throttle(() => this.#updateTotalProgress(), 500, { leading: true, trailing: true });\n    [Symbol.for('uppy test: updateTotalProgress')]() {\n        return this.#updateTotalProgress();\n    }\n    #calculateTotalProgress() {\n        // calculate total progress, using the number of files currently uploading,\n        // between 0 and 1 and sum of individual progress of each file\n        const files = this.getFiles();\n        // note: also includes files that have completed uploading:\n        const filesInProgress = files.filter((file) => {\n            return (file.progress.uploadStarted ||\n                file.progress.preprocess ||\n                file.progress.postprocess);\n        });\n        if (filesInProgress.length === 0) {\n            return 0;\n        }\n        if (filesInProgress.every((file) => file.progress.uploadComplete)) {\n            // If every uploading file is complete, and we're still getting progress, it probably means\n            // there's a bug somewhere in some progress reporting code (maybe not even our code)\n            // and we're still getting progress, so let's just assume it means a 100% progress\n            return 1;\n        }\n        const isSizedFile = (file) => file.progress.bytesTotal != null && file.progress.bytesTotal !== 0;\n        const sizedFilesInProgress = filesInProgress.filter(isSizedFile);\n        const unsizedFilesInProgress = filesInProgress.filter((file) => !isSizedFile(file));\n        if (sizedFilesInProgress.every((file) => file.progress.uploadComplete) &&\n            unsizedFilesInProgress.length > 0 &&\n            !unsizedFilesInProgress.every((file) => file.progress.uploadComplete)) {\n            // we are done with uploading all files of known size, however\n            // there is at least one file with unknown size still uploading,\n            // and we cannot say anything about their progress\n            // In any case, return null because it doesn't make any sense to show a progress\n            return null;\n        }\n        const totalFilesSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesTotal ?? 0), 0);\n        const totalUploadedSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesUploaded || 0), 0);\n        return totalFilesSize === 0 ? 0 : totalUploadedSize / totalFilesSize;\n    }\n    /**\n     * Registers listeners for all global actions, like:\n     * `error`, `file-removed`, `upload-progress`\n     */\n    #addListeners() {\n        // Type inference only works for inline functions so we have to type it again\n        const errorHandler = (error, file, response) => {\n            let errorMsg = error.message || 'Unknown error';\n            if (error.details) {\n                errorMsg += ` ${error.details}`;\n            }\n            this.setState({ error: errorMsg });\n            if (file != null && file.id in this.getState().files) {\n                this.setFileState(file.id, {\n                    error: errorMsg,\n                    response,\n                });\n            }\n        };\n        this.on('error', errorHandler);\n        this.on('upload-error', (file, error, response) => {\n            errorHandler(error, file, response);\n            if (typeof error === 'object' && error.message) {\n                this.log(error.message, 'error');\n                const newError = new Error(this.i18n('failedToUpload', { file: file?.name ?? '' })); // we may want a new custom error here\n                newError.isUserFacing = true; // todo maybe don't do this with all errors?\n                newError.details = error.message;\n                if (error.details) {\n                    newError.details += ` ${error.details}`;\n                }\n                this.#informAndEmit([newError]);\n            }\n            else {\n                this.#informAndEmit([error]);\n            }\n        });\n        let uploadStalledWarningRecentlyEmitted = null;\n        this.on('upload-stalled', (error, files) => {\n            const { message } = error;\n            const details = files.map((file) => file.meta.name).join(', ');\n            if (!uploadStalledWarningRecentlyEmitted) {\n                this.info({ message, details }, 'warning', this.opts.infoTimeout);\n                uploadStalledWarningRecentlyEmitted = setTimeout(() => {\n                    uploadStalledWarningRecentlyEmitted = null;\n                }, this.opts.infoTimeout);\n            }\n            this.log(`${message} ${details}`.trim(), 'warning');\n        });\n        this.on('upload', () => {\n            this.setState({ error: null });\n        });\n        const onUploadStarted = (files) => {\n            const filesFiltered = files.filter((file) => {\n                const exists = file != null && this.getFile(file.id);\n                if (!exists)\n                    this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return exists;\n            });\n            const filesState = Object.fromEntries(filesFiltered.map((file) => [\n                file.id,\n                {\n                    progress: {\n                        uploadStarted: Date.now(),\n                        uploadComplete: false,\n                        bytesUploaded: 0,\n                        bytesTotal: file.size,\n                    },\n                },\n            ]));\n            this.patchFilesState(filesState);\n        };\n        this.on('upload-start', onUploadStarted);\n        this.on('upload-progress', this.#handleUploadProgress);\n        this.on('upload-success', (file, uploadResp) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const currentProgress = this.getFile(file.id).progress;\n            this.setFileState(file.id, {\n                progress: {\n                    ...currentProgress,\n                    postprocess: this.#postProcessors.size > 0\n                        ? {\n                            mode: 'indeterminate',\n                        }\n                        : undefined,\n                    uploadComplete: true,\n                    percentage: 100,\n                    bytesUploaded: currentProgress.bytesTotal,\n                },\n                response: uploadResp,\n                uploadURL: uploadResp.uploadURL,\n                isPaused: false,\n            });\n            // Remote providers sometimes don't tell us the file size,\n            // but we can know how many bytes we uploaded once the upload is complete.\n            if (file.size == null) {\n                this.setFileState(file.id, {\n                    size: uploadResp.bytesUploaded || currentProgress.bytesTotal,\n                });\n            }\n            this.#updateTotalProgressThrottled();\n        });\n        this.on('preprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: { ...this.getFile(file.id).progress, preprocess: progress },\n            });\n        });\n        this.on('preprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = { ...this.getState().files };\n            files[file.id] = {\n                ...files[file.id],\n                progress: { ...files[file.id].progress },\n            };\n            delete files[file.id].progress.preprocess;\n            this.setState({ files });\n        });\n        this.on('postprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: {\n                    ...this.getState().files[file.id].progress,\n                    postprocess: progress,\n                },\n            });\n        });\n        this.on('postprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = {\n                ...this.getState().files,\n            };\n            files[file.id] = {\n                ...files[file.id],\n                progress: {\n                    ...files[file.id].progress,\n                },\n            };\n            delete files[file.id].progress.postprocess;\n            this.setState({ files });\n        });\n        this.on('restored', () => {\n            // Files may have changed--ensure progress is still accurate.\n            this.#updateTotalProgressThrottled();\n        });\n        // @ts-expect-error should fix itself when dashboard it typed (also this doesn't belong here)\n        this.on('dashboard:file-edit-complete', (file) => {\n            if (file) {\n                this.#checkRequiredMetaFieldsOnFile(file);\n            }\n        });\n        // show informer if offline\n        if (typeof window !== 'undefined' && window.addEventListener) {\n            window.addEventListener('online', this.#updateOnlineStatus);\n            window.addEventListener('offline', this.#updateOnlineStatus);\n            setTimeout(this.#updateOnlineStatus, 3000);\n        }\n    }\n    updateOnlineStatus() {\n        const online = window.navigator.onLine ?? true;\n        if (!online) {\n            this.emit('is-offline');\n            this.info(this.i18n('noInternetConnection'), 'error', 0);\n            this.wasOffline = true;\n        }\n        else {\n            this.emit('is-online');\n            if (this.wasOffline) {\n                this.emit('back-online');\n                this.info(this.i18n('connectedToInternet'), 'success', 3000);\n                this.wasOffline = false;\n            }\n        }\n    }\n    #updateOnlineStatus = this.updateOnlineStatus.bind(this);\n    getID() {\n        return this.opts.id;\n    }\n    /**\n     * Registers a plugin with Core.\n     */\n    use(Plugin, \n    // We want to let the plugin decide whether `opts` is optional or not\n    // so we spread the argument rather than defining `opts:` ourselves.\n    ...args) {\n        if (typeof Plugin !== 'function') {\n            const msg = `Expected a plugin class, but got ${Plugin === null ? 'null' : typeof Plugin}.` +\n                ' Please verify that the plugin was imported and spelled correctly.';\n            throw new TypeError(msg);\n        }\n        // Instantiate\n        const plugin = new Plugin(this, ...args);\n        const pluginId = plugin.id;\n        if (!pluginId) {\n            throw new Error('Your plugin must have an id');\n        }\n        if (!plugin.type) {\n            throw new Error('Your plugin must have a type');\n        }\n        const existsPluginAlready = this.getPlugin(pluginId);\n        if (existsPluginAlready) {\n            const msg = `Already found a plugin named '${existsPluginAlready.id}'. ` +\n                `Tried to use: '${pluginId}'.\\n` +\n                'Uppy plugins must have unique `id` options.';\n            throw new Error(msg);\n        }\n        // @ts-expect-error does exist\n        if (Plugin.VERSION) {\n            // @ts-expect-error does exist\n            this.log(`Using ${pluginId} v${Plugin.VERSION}`);\n        }\n        if (plugin.type in this.#plugins) {\n            this.#plugins[plugin.type].push(plugin);\n        }\n        else {\n            this.#plugins[plugin.type] = [plugin];\n        }\n        plugin.install();\n        this.emit('plugin-added', plugin);\n        return this;\n    }\n    /**\n     * Find one Plugin by name.\n     */\n    getPlugin(id) {\n        for (const plugins of Object.values(this.#plugins)) {\n            const foundPlugin = plugins.find((plugin) => plugin.id === id);\n            if (foundPlugin != null)\n                return foundPlugin;\n        }\n        return undefined;\n    }\n    [Symbol.for('uppy test: getPlugins')](type) {\n        return this.#plugins[type];\n    }\n    /**\n     * Iterate through all `use`d plugins.\n     *\n     */\n    iteratePlugins(method) {\n        Object.values(this.#plugins).flat(1).forEach(method);\n    }\n    /**\n     * Uninstall and remove a plugin.\n     *\n     * @param {object} instance The plugin instance to remove.\n     */\n    removePlugin(instance) {\n        this.log(`Removing plugin ${instance.id}`);\n        this.emit('plugin-remove', instance);\n        if (instance.uninstall) {\n            instance.uninstall();\n        }\n        const list = this.#plugins[instance.type];\n        // list.indexOf failed here, because Vue3 converted the plugin instance\n        // to a Proxy object, which failed the strict comparison test:\n        // obj !== objProxy\n        const index = list.findIndex((item) => item.id === instance.id);\n        if (index !== -1) {\n            list.splice(index, 1);\n        }\n        const state = this.getState();\n        const updatedState = {\n            plugins: {\n                ...state.plugins,\n                [instance.id]: undefined,\n            },\n        };\n        this.setState(updatedState);\n    }\n    /**\n     * Uninstall all plugins and close down this Uppy instance.\n     */\n    destroy() {\n        this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`);\n        this.cancelAll();\n        this.#storeUnsubscribe();\n        this.iteratePlugins((plugin) => {\n            this.removePlugin(plugin);\n        });\n        if (typeof window !== 'undefined' && window.removeEventListener) {\n            window.removeEventListener('online', this.#updateOnlineStatus);\n            window.removeEventListener('offline', this.#updateOnlineStatus);\n        }\n    }\n    hideInfo() {\n        const { info } = this.getState();\n        this.setState({ info: info.slice(1) });\n        this.emit('info-hidden');\n    }\n    /**\n     * Set info message in `state.info`, so that UI plugins like `Informer`\n     * can display the message.\n     */\n    info(message, type = 'info', duration = 3000) {\n        const isComplexMessage = typeof message === 'object';\n        this.setState({\n            info: [\n                ...this.getState().info,\n                {\n                    type,\n                    message: isComplexMessage ? message.message : message,\n                    details: isComplexMessage ? message.details : null,\n                },\n            ],\n        });\n        setTimeout(() => this.hideInfo(), duration);\n        this.emit('info-visible');\n    }\n    /**\n     * Passes messages to a function, provided in `opts.logger`.\n     * If `opts.logger: Uppy.debugLogger` or `opts.debug: true`, logs to the browser console.\n     */\n    log(message, type) {\n        const { logger } = this.opts;\n        switch (type) {\n            case 'error':\n                logger.error(message);\n                break;\n            case 'warning':\n                logger.warn(message);\n                break;\n            default:\n                logger.debug(message);\n                break;\n        }\n    }\n    // We need to store request clients by a unique ID, so we can share RequestClient instances across files\n    // this allows us to do rate limiting and synchronous operations like refreshing provider tokens\n    // example: refreshing tokens: if each file has their own requestclient,\n    // we don't have any way to synchronize all requests in order to\n    // - block all requests\n    // - refresh the token\n    // - unblock all requests and allow them to run with a the new access token\n    // back when we had a requestclient per file, once an access token expired,\n    // all 6 files would go ahead and refresh the token at the same time\n    // (calling /refresh-token up to 6 times), which will probably fail for some providers\n    #requestClientById = new Map();\n    registerRequestClient(id, client) {\n        this.#requestClientById.set(id, client);\n    }\n    /** @protected */\n    getRequestClientForFile(file) {\n        if (!file.remote)\n            throw new Error(`Tried to get RequestClient for a non-remote file ${file.id}`);\n        const requestClient = this.#requestClientById.get(file.remote.requestClientId);\n        if (requestClient == null)\n            throw new Error(`requestClientId \"${file.remote.requestClientId}\" not registered for file \"${file.id}\"`);\n        return requestClient;\n    }\n    /**\n     * Restore an upload by its ID.\n     */\n    async restore(uploadID) {\n        this.log(`Core: attempting to restore upload \"${uploadID}\"`);\n        if (!this.getState().currentUploads[uploadID]) {\n            this.#removeUpload(uploadID);\n            throw new Error('Nonexistent upload');\n        }\n        const result = await this.#runUpload(uploadID);\n        this.emit('complete', result);\n        return result;\n    }\n    /**\n     * Create an upload for a bunch of files.\n     *\n     */\n    #createUpload(fileIDs, opts = {}) {\n        // uppy.retryAll sets this to true — when retrying we want to ignore `allowNewUpload: false`\n        const { forceAllowNewUpload = false } = opts;\n        const { allowNewUpload, currentUploads } = this.getState();\n        if (!allowNewUpload && !forceAllowNewUpload) {\n            throw new Error('Cannot create a new upload: already uploading.');\n        }\n        const uploadID = nanoid();\n        this.emit('upload', uploadID, this.getFilesByIds(fileIDs));\n        this.setState({\n            allowNewUpload: this.opts.allowMultipleUploadBatches !== false &&\n                this.opts.allowMultipleUploads !== false,\n            currentUploads: {\n                ...currentUploads,\n                [uploadID]: {\n                    fileIDs,\n                    step: 0,\n                    result: {},\n                },\n            },\n        });\n        return uploadID;\n    }\n    [Symbol.for('uppy test: createUpload')](...args) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/47595\n        return this.#createUpload(...args);\n    }\n    #getUpload(uploadID) {\n        const { currentUploads } = this.getState();\n        return currentUploads[uploadID];\n    }\n    /**\n     * Add data to an upload's result object.\n     */\n    addResultData(uploadID, data) {\n        if (!this.#getUpload(uploadID)) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            return;\n        }\n        const { currentUploads } = this.getState();\n        const currentUpload = {\n            ...currentUploads[uploadID],\n            result: { ...currentUploads[uploadID].result, ...data },\n        };\n        this.setState({\n            currentUploads: { ...currentUploads, [uploadID]: currentUpload },\n        });\n    }\n    /**\n     * Remove an upload, eg. if it has been canceled or completed.\n     *\n     */\n    #removeUpload(uploadID) {\n        const currentUploads = { ...this.getState().currentUploads };\n        delete currentUploads[uploadID];\n        this.setState({\n            currentUploads,\n        });\n    }\n    /**\n     * Run an upload. This picks up where it left off in case the upload is being restored.\n     */\n    async #runUpload(uploadID) {\n        const getCurrentUpload = () => {\n            const { currentUploads } = this.getState();\n            return currentUploads[uploadID];\n        };\n        let currentUpload = getCurrentUpload();\n        const steps = [\n            ...this.#preProcessors,\n            ...this.#uploaders,\n            ...this.#postProcessors,\n        ];\n        try {\n            for (let step = currentUpload.step || 0; step < steps.length; step++) {\n                if (!currentUpload) {\n                    break;\n                }\n                const fn = steps[step];\n                this.setState({\n                    currentUploads: {\n                        ...this.getState().currentUploads,\n                        [uploadID]: {\n                            ...currentUpload,\n                            step,\n                        },\n                    },\n                });\n                const { fileIDs } = currentUpload;\n                // TODO give this the `updatedUpload` object as its only parameter maybe?\n                // Otherwise when more metadata may be added to the upload this would keep getting more parameters\n                await fn(fileIDs, uploadID);\n                // Update currentUpload value in case it was modified asynchronously.\n                currentUpload = getCurrentUpload();\n            }\n        }\n        catch (err) {\n            this.#removeUpload(uploadID);\n            throw err;\n        }\n        // Set result data.\n        if (currentUpload) {\n            // Mark postprocessing step as complete if necessary; this addresses a case where we might get\n            // stuck in the postprocessing UI while the upload is fully complete.\n            // If the postprocessing steps do not do any work, they may not emit postprocessing events at\n            // all, and never mark the postprocessing as complete. This is fine on its own but we\n            // introduced code in the @uppy/core upload-success handler to prepare postprocessing progress\n            // state if any postprocessors are registered. That is to avoid a \"flash of completed state\"\n            // before the postprocessing plugins can emit events.\n            //\n            // So, just in case an upload with postprocessing plugins *has* completed *without* emitting\n            // postprocessing completion, we do it instead.\n            currentUpload.fileIDs.forEach((fileID) => {\n                const file = this.getFile(fileID);\n                if (file?.progress.postprocess) {\n                    this.emit('postprocess-complete', file);\n                }\n            });\n            const files = currentUpload.fileIDs.map((fileID) => this.getFile(fileID));\n            const successful = files.filter((file) => !file.error);\n            const failed = files.filter((file) => file.error);\n            this.addResultData(uploadID, { successful, failed, uploadID });\n            // Update currentUpload value in case it was modified asynchronously.\n            currentUpload = getCurrentUpload();\n        }\n        // Emit completion events.\n        // This is in a separate function so that the `currentUploads` variable\n        // always refers to the latest state. In the handler right above it refers\n        // to an outdated object without the `.result` property.\n        let result;\n        if (currentUpload) {\n            result = currentUpload.result;\n            this.#removeUpload(uploadID);\n        }\n        if (result == null) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            result = {\n                successful: [],\n                failed: [],\n                uploadID,\n            };\n        }\n        return result;\n    }\n    /**\n     * Start an upload for all the files that are not currently being uploaded.\n     */\n    async upload() {\n        if (!this.#plugins.uploader?.length) {\n            this.log('No uploader type plugins are used', 'warning');\n        }\n        let { files } = this.getState();\n        // retry any failed files from a previous upload() call\n        const filesToRetry = this.#getFilesToRetry();\n        if (filesToRetry.length > 0) {\n            const retryResult = await this.#doRetryAll(); // we don't want the complete event to fire\n            const hasNewFiles = this.getFiles().filter((file) => file.progress.uploadStarted == null)\n                .length > 0;\n            // if no new files, make it idempotent and return\n            if (!hasNewFiles) {\n                this.emit('complete', retryResult);\n                return retryResult;\n            }\n            // reload files which might have  changed after retry\n            ;\n            ({ files } = this.getState());\n        }\n        // If no files to retry, proceed with original upload() behavior for new files\n        const onBeforeUploadResult = this.opts.onBeforeUpload(files);\n        if (onBeforeUploadResult === false) {\n            return Promise.reject(new Error('Not starting the upload because onBeforeUpload returned false'));\n        }\n        if (onBeforeUploadResult && typeof onBeforeUploadResult === 'object') {\n            files = onBeforeUploadResult;\n            // Updating files in state, because uploader plugins receive file IDs,\n            // and then fetch the actual file object from state\n            this.setState({\n                files,\n            });\n        }\n        return Promise.resolve()\n            .then(() => this.#restricter.validateMinNumberOfFiles(files))\n            .catch((err) => {\n            this.#informAndEmit([err]);\n            throw err;\n        })\n            .then(() => {\n            if (!this.#checkRequiredMetaFields(files)) {\n                throw new RestrictionError(this.i18n('missingRequiredMetaField'));\n            }\n        })\n            .catch((err) => {\n            // Doing this in a separate catch because we already emited and logged\n            // all the errors in `checkRequiredMetaFields` so we only throw a generic\n            // missing fields error here.\n            throw err;\n        })\n            .then(async () => {\n            const { currentUploads } = this.getState();\n            // get a list of files that are currently assigned to uploads\n            const currentlyUploadingFiles = Object.values(currentUploads).flatMap((curr) => curr.fileIDs);\n            const waitingFileIDs = [];\n            Object.keys(files).forEach((fileID) => {\n                const file = this.getFile(fileID);\n                // if the file hasn't started uploading and hasn't already been assigned to an upload..\n                if (!file.progress.uploadStarted &&\n                    currentlyUploadingFiles.indexOf(fileID) === -1) {\n                    waitingFileIDs.push(file.id);\n                }\n            });\n            const uploadID = this.#createUpload(waitingFileIDs);\n            const result = await this.#runUpload(uploadID);\n            this.emit('complete', result);\n            return result;\n        })\n            .catch((err) => {\n            this.emit('error', err);\n            this.log(err, 'error');\n            throw err;\n        });\n    }\n}\nexport default Uppy;\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "{\n  \"name\": \"@uppy/core\",\n  \"description\": \"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/store-default\": \"^5.0.0\",\n    \"@uppy/utils\": \"^7.1.0\",\n    \"lodash\": \"^4.17.21\",\n    \"mime-match\": \"^1.0.2\",\n    \"namespace-emitter\": \"^2.0.1\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/deep-freeze\": \"^0\",\n    \"cssnano\": \"^7.0.7\",\n    \"deep-freeze\": \"^0.0.1\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  }\n}", "export default function getFileName(fileType, fileDescriptor) {\n    if (fileDescriptor.name) {\n        return fileDescriptor.name;\n    }\n    if (fileType.split('/')[0] === 'image') {\n        return `${fileType.split('/')[0]}.${fileType.split('/')[1]}`;\n    }\n    return 'noname';\n}\n", "export default {\n    strings: {\n        addBulkFilesFailed: {\n            0: 'Failed to add %{smart_count} file due to an internal error',\n            1: 'Failed to add %{smart_count} files due to internal errors',\n        },\n        youCanOnlyUploadX: {\n            0: 'You can only upload %{smart_count} file',\n            1: 'You can only upload %{smart_count} files',\n        },\n        youHaveToAtLeastSelectX: {\n            0: 'You have to select at least %{smart_count} file',\n            1: 'You have to select at least %{smart_count} files',\n        },\n        aggregateExceedsSize: 'You selected %{size} of files, but maximum allowed size is %{sizeAllowed}',\n        exceedsSize: '%{file} exceeds maximum allowed size of %{size}',\n        missingRequiredMetaField: 'Missing required meta fields',\n        missingRequiredMetaFieldOnFile: 'Missing required meta fields in %{fileName}',\n        inferiorSize: 'This file is smaller than the allowed size of %{size}',\n        youCanOnlyUploadFileTypes: 'You can only upload: %{types}',\n        noMoreFilesAllowed: 'Cannot add more files',\n        noDuplicates: \"Cannot add the duplicate file '%{fileName}', it already exists\",\n        companionError: 'Connection with Companion failed',\n        authAborted: 'Authentication aborted',\n        companionUnauthorizeHint: 'To unauthorize to your %{provider} account, please go to %{url}',\n        failedToUpload: 'Failed to upload %{file}',\n        noInternetConnection: 'No Internet connection',\n        connectedToInternet: 'Connected to the Internet',\n        // Strings for remote providers\n        noFilesFound: 'You have no files or folders here',\n        noSearchResults: 'Unfortunately, there are no results for this search',\n        selectX: {\n            0: 'Select %{smart_count}',\n            1: 'Select %{smart_count}',\n        },\n        allFilesFromFolderNamed: 'All files from folder %{name}',\n        openFolderNamed: 'Open folder %{name}',\n        cancel: 'Cancel',\n        logOut: 'Log out',\n        logIn: 'Log in',\n        pickFiles: 'Pick files',\n        pickPhotos: 'Pick photos',\n        filter: 'Filter',\n        resetFilter: 'Reset filter',\n        loading: 'Loading...',\n        loadedXFiles: 'Loaded %{numFiles} files',\n        authenticateWithTitle: 'Please authenticate with %{pluginName} to select files',\n        authenticateWith: 'Connect to %{pluginName}',\n        signInWithGoogle: 'Sign in with Google',\n        searchImages: 'Search for images',\n        enterTextToSearch: 'Enter text to search for images',\n        search: 'Search',\n        resetSearch: 'Reset search',\n        emptyFolderAdded: 'No files were added from empty folder',\n        addedNumFiles: 'Added %{numFiles} file(s)',\n        folderAlreadyAdded: 'The folder \"%{folder}\" was already added',\n        folderAdded: {\n            0: 'Added %{smart_count} file from %{folder}',\n            1: 'Added %{smart_count} files from %{folder}',\n        },\n        additionalRestrictionsFailed: '%{count} additional restrictions were not fulfilled',\n        unnamed: 'Unnamed',\n        pleaseWait: 'Please wait',\n    },\n};\n", "// Edge 15.x does not fire 'progress' events on uploads.\n// See https://github.com/transloadit/uppy/issues/945\n// And https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12224510/\nexport default function supportsUploadProgress(userAgent) {\n    // Allow passing in userAgent for tests\n    if (userAgent == null && typeof navigator !== 'undefined') {\n        userAgent = navigator.userAgent;\n    }\n    // Assume it works because basically everything supports progress events.\n    if (!userAgent)\n        return true;\n    const m = /Edge\\/(\\d+\\.\\d+)/.exec(userAgent);\n    if (!m)\n        return true;\n    const edgeVersion = m[1];\n    const version = edgeVersion.split('.', 2);\n    const major = parseInt(version[0], 10);\n    const minor = parseInt(version[1], 10);\n    // Worked before:\n    // Edge 40.15063.0.0\n    // Microsoft EdgeHTML 15.15063\n    if (major < 15 || (major === 15 && minor < 15063)) {\n        return true;\n    }\n    // Fixed in:\n    // Microsoft EdgeHTML 18.18218\n    if (major > 18 || (major === 18 && minor >= 18218)) {\n        return true;\n    }\n    // other versions don't work.\n    return false;\n}\n"],
  "mappings": ";;;;;;;;;AAGA,WAAA,UAAS,SAASA,eAAc,OAAa;AAC3C,UAAI,OAAO,UAAU,YAAY,OAAO,MAAM,KAAK,GAAG;AACpD,cAAM,IAAI,UAAU,0BAA0B,OAAO,KAAK,EAAE;MAC9D;AAEA,YAAM,MAAM,QAAQ;AACpB,UAAI,MAAM,KAAK,IAAI,KAAK;AAExB,UAAI,KAAK;AACP,cAAM,CAAC;MACT;AAEA,UAAI,QAAQ,GAAG;AACb,eAAO;MACT;AAEA,YAAM,QAAQ,CAAC,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAClE,YAAM,WAAW,KAAK,IAAI,KAAK,MAAM,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,IAAI,CAAC,GAAG,MAAM,SAAS,CAAC;AACtF,YAAM,QAAQ,OAAO,MAAM,QAAQ,QAAQ;AAC3C,YAAM,OAAO,MAAM,QAAQ;AAE3B,aAAO,GAAG,SAAS,MAAM,QAAQ,MAAM,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,QAAQ,CAAC,CAAC,IAAI,IAAI;IACzF;;;;;ACzBA;AAAA;AAAA;AA8BA,aAAS,gBAAgB,MAAMC,YAAW;AACxC,WAAK,OAAO,OAAO,QAAQ;AAC3B,WAAK,UAAU,CAAC,KAAK,QAAQ,GAAG;AAChC,WAAK,YAAYA;AACjB,WAAK,QAAQ,KAAK,MAAMA,UAAS;AAAA,IACnC;AAEA,oBAAgB,UAAU,QAAQ,SAAS,OAAO;AAChD,UAAI,UAAU;AACd,UAAI,QAAQ,KAAK;AACjB,UAAI;AACJ,UAAI,aAAa,MAAM;AACvB,UAAI;AAEJ,UAAI,OAAO,SAAS,YAAY,iBAAiB,QAAQ;AACvD,YAAI,CAAC,KAAK,WAAW,KAAK,QAAQ,OAAO;AACvC,oBAAU;AAAA,QACZ,OAAO;AACL,uBAAa,SAAS,IAAI,MAAM,KAAK,SAAS;AAC9C,eAAK,KAAK,GAAG,WAAW,KAAK,YAAY,MAAM;AAC7C,gBAAI,MAAM,EAAE,MAAM,KAAM;AACtB;AAAA,YACF,WAAW,KAAK,UAAU,QAAQ;AAChC,wBAAU,MAAM,EAAE,MAAM,UAAU,EAAE;AAAA,YACtC,OAAO;AACL,wBAAU;AAAA,YACZ;AAAA,UACF;AAGA,oBAAU,WAAW;AAAA,QACvB;AAAA,MACF,WACS,OAAO,MAAM,UAAU,YAAY;AAC1C,kBAAU,CAAC;AAEX,aAAK,KAAK,MAAM,QAAQ,QAAQ;AAC9B,cAAI,KAAK,MAAM,MAAM,EAAE,CAAC,GAAG;AACzB,oBAAQ,QAAQ,MAAM,IAAI,MAAM,EAAE;AAAA,UACpC;AAAA,QACF;AAAA,MACF,WACS,OAAO,SAAS,UAAU;AACjC,kBAAU,CAAC;AAEX,iBAAS,OAAO,OAAO;AACrB,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB,oBAAQ,GAAG,IAAI,MAAM,GAAG;AAAA,UAC1B;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAEA,WAAO,UAAU,SAAS,MAAM,MAAMA,YAAW;AAC/C,UAAI,UAAU,IAAI,gBAAgB,MAAMA,cAAa,QAAQ;AAC7D,UAAI,OAAO,QAAQ,aAAa;AAC9B,eAAO,QAAQ,MAAM,IAAI;AAAA,MAC3B;AAEA,aAAO;AAAA,IACT;AAAA;AAAA;;;AC5FA;AAAA;AAAA,QAAI,WAAW;AACf,QAAI,kBAAkB;AAatB,WAAO,UAAU,SAAS,QAAQ,SAAS;AACzC,eAAS,KAAKC,UAAS;AACrB,YAAI,SAAS,SAASA,UAAS,QAAQ,eAAe;AAGtD,eAAO,UAAU,OAAO,UAAU;AAAA,MACpC;AAEA,aAAO,UAAU,KAAK,QAAQ,MAAM,GAAG,EAAE,CAAC,CAAC,IAAI;AAAA,IACjD;AAAA;AAAA;;;ACvBA;AAAA;AAyBA,aAAS,SAAS,OAAO;AACvB,UAAI,OAAO,OAAO;AAClB,aAAO,SAAS,SAAS,QAAQ,YAAY,QAAQ;AAAA,IACvD;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC9BjB;AAAA;AACA,QAAI,aAAa,OAAO,UAAU,YAAY,UAAU,OAAO,WAAW,UAAU;AAEpF,WAAO,UAAU;AAAA;AAAA;;;ACHjB;AAAA;AAAA,QAAI,aAAa;AAGjB,QAAI,WAAW,OAAO,QAAQ,YAAY,QAAQ,KAAK,WAAW,UAAU;AAG5E,QAAI,OAAO,cAAc,YAAY,SAAS,aAAa,EAAE;AAE7D,WAAO,UAAU;AAAA;AAAA;;;ACRjB;AAAA;AAAA,QAAI,OAAO;AAkBX,QAAI,MAAM,WAAW;AACnB,aAAO,KAAK,KAAK,IAAI;AAAA,IACvB;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACtBjB;AAAA;AACA,QAAI,eAAe;AAUnB,aAAS,gBAAgB,QAAQ;AAC/B,UAAI,QAAQ,OAAO;AAEnB,aAAO,WAAW,aAAa,KAAK,OAAO,OAAO,KAAK,CAAC,GAAG;AAAA,MAAC;AAC5D,aAAO;AAAA,IACT;AAEA,WAAO,UAAU;AAAA;AAAA;;;AClBjB;AAAA;AAAA,QAAI,kBAAkB;AAGtB,QAAI,cAAc;AASlB,aAAS,SAAS,QAAQ;AACxB,aAAO,SACH,OAAO,MAAM,GAAG,gBAAgB,MAAM,IAAI,CAAC,EAAE,QAAQ,aAAa,EAAE,IACpE;AAAA,IACN;AAEA,WAAO,UAAU;AAAA;AAAA;;;AClBjB;AAAA;AAAA,QAAI,OAAO;AAGX,QAAIC,UAAS,KAAK;AAElB,WAAO,UAAUA;AAAA;AAAA;;;ACLjB;AAAA;AAAA,QAAIC,UAAS;AAGb,QAAI,cAAc,OAAO;AAGzB,QAAI,iBAAiB,YAAY;AAOjC,QAAI,uBAAuB,YAAY;AAGvC,QAAI,iBAAiBA,UAASA,QAAO,cAAc;AASnD,aAAS,UAAU,OAAO;AACxB,UAAI,QAAQ,eAAe,KAAK,OAAO,cAAc,GACjD,MAAM,MAAM,cAAc;AAE9B,UAAI;AACF,cAAM,cAAc,IAAI;AACxB,YAAI,WAAW;AAAA,MACjB,SAASC,IAAG;AAAA,MAAC;AAEb,UAAI,SAAS,qBAAqB,KAAK,KAAK;AAC5C,UAAI,UAAU;AACZ,YAAI,OAAO;AACT,gBAAM,cAAc,IAAI;AAAA,QAC1B,OAAO;AACL,iBAAO,MAAM,cAAc;AAAA,QAC7B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC7CjB;AAAA;AACA,QAAI,cAAc,OAAO;AAOzB,QAAI,uBAAuB,YAAY;AASvC,aAAS,eAAe,OAAO;AAC7B,aAAO,qBAAqB,KAAK,KAAK;AAAA,IACxC;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACrBjB;AAAA;AAAA,QAAIC,UAAS;AAAb,QACI,YAAY;AADhB,QAEI,iBAAiB;AAGrB,QAAI,UAAU;AAAd,QACI,eAAe;AAGnB,QAAI,iBAAiBA,UAASA,QAAO,cAAc;AASnD,aAAS,WAAW,OAAO;AACzB,UAAI,SAAS,MAAM;AACjB,eAAO,UAAU,SAAY,eAAe;AAAA,MAC9C;AACA,aAAQ,kBAAkB,kBAAkB,OAAO,KAAK,IACpD,UAAU,KAAK,IACf,eAAe,KAAK;AAAA,IAC1B;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC3BjB;AAAA;AAwBA,aAAS,aAAa,OAAO;AAC3B,aAAO,SAAS,QAAQ,OAAO,SAAS;AAAA,IAC1C;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC5BjB;AAAA;AAAA,QAAI,aAAa;AAAjB,QACI,eAAe;AAGnB,QAAI,YAAY;AAmBhB,aAAS,SAAS,OAAO;AACvB,aAAO,OAAO,SAAS,YACpB,aAAa,KAAK,KAAK,WAAW,KAAK,KAAK;AAAA,IACjD;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC5BjB;AAAA;AAAA,QAAI,WAAW;AAAf,QACI,WAAW;AADf,QAEI,WAAW;AAGf,QAAI,MAAM,IAAI;AAGd,QAAI,aAAa;AAGjB,QAAI,aAAa;AAGjB,QAAI,YAAY;AAGhB,QAAI,eAAe;AAyBnB,aAAS,SAAS,OAAO;AACvB,UAAI,OAAO,SAAS,UAAU;AAC5B,eAAO;AAAA,MACT;AACA,UAAI,SAAS,KAAK,GAAG;AACnB,eAAO;AAAA,MACT;AACA,UAAI,SAAS,KAAK,GAAG;AACnB,YAAI,QAAQ,OAAO,MAAM,WAAW,aAAa,MAAM,QAAQ,IAAI;AACnE,gBAAQ,SAAS,KAAK,IAAK,QAAQ,KAAM;AAAA,MAC3C;AACA,UAAI,OAAO,SAAS,UAAU;AAC5B,eAAO,UAAU,IAAI,QAAQ,CAAC;AAAA,MAChC;AACA,cAAQ,SAAS,KAAK;AACtB,UAAI,WAAW,WAAW,KAAK,KAAK;AACpC,aAAQ,YAAY,UAAU,KAAK,KAAK,IACpC,aAAa,MAAM,MAAM,CAAC,GAAG,WAAW,IAAI,CAAC,IAC5C,WAAW,KAAK,KAAK,IAAI,MAAM,CAAC;AAAA,IACvC;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC/DjB;AAAA;AAAA,QAAI,WAAW;AAAf,QACI,MAAM;AADV,QAEI,WAAW;AAGf,QAAI,kBAAkB;AAGtB,QAAI,YAAY,KAAK;AAArB,QACI,YAAY,KAAK;AAwDrB,aAASC,UAAS,MAAM,MAAM,SAAS;AACrC,UAAI,UACA,UACA,SACA,QACA,SACA,cACA,iBAAiB,GACjB,UAAU,OACV,SAAS,OACT,WAAW;AAEf,UAAI,OAAO,QAAQ,YAAY;AAC7B,cAAM,IAAI,UAAU,eAAe;AAAA,MACrC;AACA,aAAO,SAAS,IAAI,KAAK;AACzB,UAAI,SAAS,OAAO,GAAG;AACrB,kBAAU,CAAC,CAAC,QAAQ;AACpB,iBAAS,aAAa;AACtB,kBAAU,SAAS,UAAU,SAAS,QAAQ,OAAO,KAAK,GAAG,IAAI,IAAI;AACrE,mBAAW,cAAc,UAAU,CAAC,CAAC,QAAQ,WAAW;AAAA,MAC1D;AAEA,eAAS,WAAW,MAAM;AACxB,YAAI,OAAO,UACP,UAAU;AAEd,mBAAW,WAAW;AACtB,yBAAiB;AACjB,iBAAS,KAAK,MAAM,SAAS,IAAI;AACjC,eAAO;AAAA,MACT;AAEA,eAAS,YAAY,MAAM;AAEzB,yBAAiB;AAEjB,kBAAU,WAAW,cAAc,IAAI;AAEvC,eAAO,UAAU,WAAW,IAAI,IAAI;AAAA,MACtC;AAEA,eAAS,cAAc,MAAM;AAC3B,YAAI,oBAAoB,OAAO,cAC3B,sBAAsB,OAAO,gBAC7B,cAAc,OAAO;AAEzB,eAAO,SACH,UAAU,aAAa,UAAU,mBAAmB,IACpD;AAAA,MACN;AAEA,eAAS,aAAa,MAAM;AAC1B,YAAI,oBAAoB,OAAO,cAC3B,sBAAsB,OAAO;AAKjC,eAAQ,iBAAiB,UAAc,qBAAqB,QACzD,oBAAoB,KAAO,UAAU,uBAAuB;AAAA,MACjE;AAEA,eAAS,eAAe;AACtB,YAAI,OAAO,IAAI;AACf,YAAI,aAAa,IAAI,GAAG;AACtB,iBAAO,aAAa,IAAI;AAAA,QAC1B;AAEA,kBAAU,WAAW,cAAc,cAAc,IAAI,CAAC;AAAA,MACxD;AAEA,eAAS,aAAa,MAAM;AAC1B,kBAAU;AAIV,YAAI,YAAY,UAAU;AACxB,iBAAO,WAAW,IAAI;AAAA,QACxB;AACA,mBAAW,WAAW;AACtB,eAAO;AAAA,MACT;AAEA,eAAS,SAAS;AAChB,YAAI,YAAY,QAAW;AACzB,uBAAa,OAAO;AAAA,QACtB;AACA,yBAAiB;AACjB,mBAAW,eAAe,WAAW,UAAU;AAAA,MACjD;AAEA,eAAS,QAAQ;AACf,eAAO,YAAY,SAAY,SAAS,aAAa,IAAI,CAAC;AAAA,MAC5D;AAEA,eAAS,YAAY;AACnB,YAAI,OAAO,IAAI,GACX,aAAa,aAAa,IAAI;AAElC,mBAAW;AACX,mBAAW;AACX,uBAAe;AAEf,YAAI,YAAY;AACd,cAAI,YAAY,QAAW;AACzB,mBAAO,YAAY,YAAY;AAAA,UACjC;AACA,cAAI,QAAQ;AAEV,yBAAa,OAAO;AACpB,sBAAU,WAAW,cAAc,IAAI;AACvC,mBAAO,WAAW,YAAY;AAAA,UAChC;AAAA,QACF;AACA,YAAI,YAAY,QAAW;AACzB,oBAAU,WAAW,cAAc,IAAI;AAAA,QACzC;AACA,eAAO;AAAA,MACT;AACA,gBAAU,SAAS;AACnB,gBAAU,QAAQ;AAClB,aAAO;AAAA,IACT;AAEA,WAAO,UAAUA;AAAA;AAAA;;;AC9LjB;AAAA;AAAA,QAAIC,YAAW;AAAf,QACI,WAAW;AAGf,QAAI,kBAAkB;AA8CtB,aAASC,UAAS,MAAM,MAAM,SAAS;AACrC,UAAI,UAAU,MACV,WAAW;AAEf,UAAI,OAAO,QAAQ,YAAY;AAC7B,cAAM,IAAI,UAAU,eAAe;AAAA,MACrC;AACA,UAAI,SAAS,OAAO,GAAG;AACrB,kBAAU,aAAa,UAAU,CAAC,CAAC,QAAQ,UAAU;AACrD,mBAAW,cAAc,UAAU,CAAC,CAAC,QAAQ,WAAW;AAAA,MAC1D;AACA,aAAOD,UAAS,MAAM,MAAM;AAAA,QAC1B,WAAW;AAAA,QACX,WAAW;AAAA,QACX,YAAY;AAAA,MACd,CAAC;AAAA,IACH;AAEA,WAAO,UAAUC;AAAA;AAAA;;;ACpEjB;AAAA;AAcA,WAAO,UAAU,SAAS,yBAA0B;AAClD,UAAI,UAAU,CAAC;AACf,UAAI,OAAO,QAAQ,OAAO,CAAC;AAY3B,cAAQ,OAAO,SAAS,KAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM;AACvE,YAAI,SAAS,aAAa,KAAK;AAE/B,YAAI,OAAO,QAAQ;AACjB,kBAAQ,OAAO,QAAQ,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,CAAC;AAAA,QAC7D;AAAA,MACF;AAWA,cAAQ,KAAK,SAAS,GAAI,OAAO,IAAI;AACnC,YAAI,CAAC,KAAK,KAAK,GAAG;AAChB,eAAK,KAAK,IAAI,CAAC;AAAA,QACjB;AAEA,aAAK,KAAK,EAAE,KAAK,EAAE;AAAA,MACrB;AAWA,cAAQ,OAAO,SAAS,KAAM,OAAO,IAAI;AACvC,iBAAS,MAAO;AACd,aAAG,MAAM,MAAM,SAAS;AACxB,kBAAQ,IAAI,OAAO,GAAG;AAAA,QACxB;AACA,aAAK,GAAG,OAAO,GAAG;AAAA,MACpB;AAaA,cAAQ,MAAM,SAAS,IAAK,OAAO,IAAI;AACrC,YAAI,OAAO,CAAC;AAEZ,YAAI,SAAS,IAAI;AACf,cAAI,MAAM,KAAK,KAAK,KAAK;AACzB,cAAIC,KAAI;AACR,cAAIC,KAAI,MAAM,IAAI,SAAS;AAE3B,eAAKD,IAAGA,KAAIC,IAAGD,MAAK;AAClB,gBAAI,IAAIA,EAAC,MAAM,IAAI;AACjB,mBAAK,KAAK,IAAIA,EAAC,CAAC;AAAA,YAClB;AAAA,UACF;AAAA,QACF;AAEA,aAAK,SAAS,KAAK,KAAK,KAAK,IAAI,OAAO,OAAO,KAAK,KAAK,KAAK;AAAA,MAChE;AAEA,eAAS,aAAcE,IAAG;AACxB,YAAI,MAAM,KAAKA,EAAC,IAAI,KAAKA,EAAC,IAAI,CAAC;AAC/B,YAAI,MAAMA,GAAE,QAAQ,GAAG;AACvB,YAAI,OAAQ,QAAQ,KAAM,CAACA,EAAC,IAAI,CAACA,GAAE,UAAU,GAAG,GAAG,GAAGA,GAAE,UAAU,MAAM,CAAC,CAAC;AAE1E,YAAI,OAAO,OAAO,KAAK,IAAI;AAC3B,YAAIF,KAAI;AACR,YAAIC,KAAI,KAAK;AAEb,aAAKD,IAAGA,KAAIC,IAAGD,MAAK;AAClB,cAAI,MAAM,KAAKA,EAAC;AAChB,cAAI,QAAQ,KAAK;AACf,kBAAM,IAAI,OAAO,KAAK,GAAG,CAAC;AAAA,UAC5B;AAEA,cAAI,KAAK,WAAW,KAAK,KAAK,CAAC,MAAM,KAAK;AACxC,kBAAM,IAAI,OAAO,KAAK,GAAG,CAAC;AAC1B;AAAA,UACF;AAAA,QACF;AAEA,eAAO;AAAA,MACT;AAEA,eAAS,QAASE,IAAG,KAAK,MAAM;AAC9B,YAAIF,KAAI;AACR,YAAIC,KAAI,IAAI;AAEZ,aAAKD,IAAGA,KAAIC,IAAGD,MAAK;AAClB,cAAI,CAAC,IAAIA,EAAC,EAAG;AACb,cAAIA,EAAC,EAAE,QAAQE;AACf,cAAIF,EAAC,EAAE,MAAM,IAAIA,EAAC,GAAG,IAAI;AAAA,QAC3B;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAAA;AAAA;;;ACvIe,SAAR,YAA6B,QAAQ,KAAK;AAC7C,SAAO,OAAO,OAAO,QAAQ,GAAG;AACpC;;;ACEO,IAAM,EAAE,gBAAgB,IAAI;AAC5B,IAAM,EAAE,YAAY,IAAI;AACxB,IAAM,mBAAmB,CAAC,UAAU,WAAW,YAAY;AAC9D,QAAM,MAAM,IAAI,aAAa,SAAS,YAAY;AAClD,MAAI,WAAW,QAAQ,YAAY,SAAS,OAAO,GAAG;AAClD,WAAO,eAAe,KAAK,SAAS;AAAA;AAAA,MAEhC,WAAW;AAAA,MACX,cAAc;AAAA,MACd,UAAU;AAAA,MACV,OAAO,QAAQ;AAAA,IACnB,CAAC;AAAA,EACL;AACA,SAAO;AACX;;;AClBA,IAAM,mBAAmB;AACzB,SAAS,cAAc,SAAS,MAAM,QAAQ;AAE1C,QAAM,cAAc,iBAAiB,KAAK,OAAO;AAEjD,QAAM,WAAW,KAAK,YAAY,cAAc,CAAC,KAAK;AACtD,MAAI;AACJ,MAAI,cAAc,CAAC,KAAK,MAAM;AAC1B,UAAM,SAAS,KAAK,mBAAmB,YAAY,CAAC,CAAC,CAAC;AACtD,UAAM,QAAQ,IAAI,WAAW,OAAO,MAAM;AAC1C,aAASG,KAAI,GAAGA,KAAI,OAAO,QAAQA,MAAK;AACpC,YAAMA,EAAC,IAAI,OAAO,WAAWA,EAAC;AAAA,IAClC;AACA,WAAO,CAAC,KAAK;AAAA,EACjB,WACS,cAAc,CAAC,KAAK,MAAM;AAC/B,WAAO,CAAC,mBAAmB,YAAY,CAAC,CAAC,CAAC;AAAA,EAC9C;AAEA,MAAI,QAAQ;AACR,WAAO,IAAI,KAAK,MAAM,KAAK,QAAQ,IAAI,EAAE,MAAM,SAAS,CAAC;AAAA,EAC7D;AACA,SAAO,IAAI,KAAK,MAAM,EAAE,MAAM,SAAS,CAAC;AAC5C;AACA,IAAO,wBAAQ;;;ACvBf,IAAM,iBAAN,cAA6B,MAAM;AAAA,EAC/B;AAAA,EACA;AAAA,EACA,YAAY,SAAS,SAAS;AAC1B,UAAM,OAAO;AACb,SAAK,QAAQ,SAAS;AACtB,QAAI,KAAK,SAAS,YAAY,KAAK,OAAO,gBAAgB,GAAG;AACzD,WAAK,iBAAiB,KAAK,MAAM;AAAA,IACrC,OACK;AACD,WAAK,iBAAiB;AAAA,IAC1B;AAAA,EACJ;AACJ;AACA,IAAO,yBAAQ;;;ACJA,SAAR,UAA2B,UAAU,uBAAuB,UAAU,IAAI;AAC7E,MAAI,aAAa,KAAK,aAAa;AAC/B,WAAO;AACX,MAAI,OAAO;AACP,WAAO;AACX,SAAO,YAAY,wBAAwB,YAAY,MAAM,CAAC,KAAK;AACvE;;;ACjBA,IAAO,6BAAQ;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;;;ACZA,IAAM,eAAN,cAA2B,MAAM;AAAA,EAC7B;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,OAAO,MAAM,MAAM;AAC3B,UAAM,uGAAuG;AAC7G,SAAK,QAAQ;AACb,SAAK,iBAAiB;AACtB,SAAK,UAAU;AAAA,EACnB;AACJ;AACA,IAAO,uBAAQ;;;ACPA,SAAR,yBAA0C,SAAS;AACtD,SAAO,MAAM,GAAG,OAAO,EAAE,MAAM,CAAC,QAAQ;AACpC,QAAI,IAAI,SAAS,cAAc;AAC3B,YAAM;AAAA,IACV,OACK;AACD,YAAM,IAAI,qBAAa,GAAG;AAAA,IAC9B;AAAA,EACJ,CAAC;AACL;;;ACbO,SAAS,qBAAqB,OAAO;AACxC,QAAM,WAAW,CAAC,SAAS,WAAW,QAAQ,CAAC,CAAC,KAAK;AACrD,SAAO,MAAM,OAAO,CAAC,SAAS,CAAC,SAAS,IAAI,CAAC;AACjD;AAEO,SAAS,+BAA+B,OAAO;AAClD,SAAO,MAAM,OAAO,CAAC,SAAS,CAAC,KAAK,UAAU,iBAAiB,CAAC,KAAK,UAAU;AACnF;;;ACJe,SAAR,aAA8B,KAAK;AACtC,MAAI,OAAO,QAAQ,YAAY,QAAQ;AACnC,WAAO;AACX,MAAI,EAAE,cAAc;AAChB,WAAO;AACX,SAAO,IAAI,aAAa,KAAK;AACjC;;;ACLA,SAAS,mBAAmB,SAAS;AACjC,MAAI,OAAO,YAAY,UAAU;AAC7B,UAAM,WAAW,SAAS,iBAAiB,OAAO;AAClD,WAAO,SAAS,WAAW,IAAI,OAAO,MAAM,KAAK,QAAQ;AAAA,EAC7D;AACA,MAAI,OAAO,YAAY,YAAY,aAAa,OAAO,GAAG;AACtD,WAAO,CAAC,OAAO;AAAA,EACnB;AACA,SAAO;AACX;AACA,IAAO,6BAAQ;;;ACbf,SAAS,eAAe,SAAS,UAAU,UAAU;AACjD,MAAI,OAAO,YAAY,UAAU;AAC7B,WAAO,QAAQ,cAAc,OAAO;AAAA,EACxC;AACA,MAAI,aAAa,OAAO,GAAG;AACvB,WAAO;AAAA,EACX;AACA,SAAO;AACX;AACA,IAAO,yBAAQ;;;ACPA,SAAR,wBAAyC,cAAc;AAC1D,QAAM,UAAU,aAAa,YAAY,GAAG;AAE5C,MAAI,YAAY,MAAM,YAAY,aAAa,SAAS,GAAG;AACvD,WAAO;AAAA,MACH,MAAM;AAAA,MACN,WAAW;AAAA,IACf;AAAA,EACJ;AACA,SAAO;AAAA,IACH,MAAM,aAAa,MAAM,GAAG,OAAO;AAAA,IACnC,WAAW,aAAa,MAAM,UAAU,CAAC;AAAA,EAC7C;AACJ;;;ACZA,IAAO,oBAAQ;AAAA,EACX,WAAW;AAAA,EACX,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,MAAM;AAAA,EACN,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,MAAM;AAAA,EACN,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,KAAK;AAAA,EACL,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AACT;;;ACxDe,SAAR,YAA6B,MAAM;AACtC,MAAI,KAAK;AACL,WAAO,KAAK;AAChB,QAAM,gBAAgB,KAAK,OACrB,wBAAwB,KAAK,IAAI,EAAE,WAAW,YAAY,IAC1D;AACN,MAAI,iBAAiB,iBAAiB,mBAAW;AAE7C,WAAO,kBAAU,aAAa;AAAA,EAClC;AAEA,SAAO;AACX;;;ACbA,SAAS,gBAAgB,WAAW;AAChC,SAAO,UAAU,WAAW,CAAC,EAAE,SAAS,EAAE;AAC9C;AACA,SAAS,eAAe,MAAM;AAC1B,MAAI,SAAS;AACb,SAAQ,KAAK,QAAQ,eAAe,CAAC,cAAc;AAC/C,cAAU,IAAI,gBAAgB,SAAS,CAAC;AACxC,WAAO;AAAA,EACX,CAAC,IAAI;AACT;AAKe,SAAR,eAAgC,MAAM,YAAY;AAGrD,MAAI,KAAK,cAAc;AACvB,MAAI,OAAO,KAAK,SAAS,UAAU;AAC/B,UAAM,IAAI,eAAe,KAAK,KAAK,YAAY,CAAC,CAAC;AAAA,EACrD;AACA,MAAI,KAAK,SAAS,QAAW;AACzB,UAAM,IAAI,KAAK,IAAI;AAAA,EACvB;AACA,MAAI,KAAK,QAAQ,OAAO,KAAK,KAAK,iBAAiB,UAAU;AACzD,UAAM,IAAI,eAAe,KAAK,KAAK,aAAa,YAAY,CAAC,CAAC;AAAA,EAClE;AACA,MAAI,KAAK,KAAK,SAAS,QAAW;AAC9B,UAAM,IAAI,KAAK,KAAK,IAAI;AAAA,EAC5B;AACA,MAAI,KAAK,KAAK,iBAAiB,QAAW;AACtC,UAAM,IAAI,KAAK,KAAK,YAAY;AAAA,EACpC;AACA,SAAO;AACX;AAGA,SAAS,gBAAgB,MAAM;AAC3B,MAAI,CAAC,KAAK,YAAY,CAAC,KAAK;AACxB,WAAO;AAEX,QAAM,oBAAoB,oBAAI,IAAI;AAAA,IAC9B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ,CAAC;AACD,SAAO,kBAAkB,IAAI,KAAK,OAAO,QAAQ;AACrD;AACO,SAAS,cAAc,MAAM,YAAY;AAC5C,MAAI,gBAAgB,IAAI;AACpB,WAAO,KAAK;AAChB,QAAM,WAAW,YAAY,IAAI;AACjC,SAAO,eAAe;AAAA,IAClB,GAAG;AAAA,IACH,MAAM;AAAA,EACV,GAAG,UAAU;AACjB;;;AC3De,SAAR,qBAAsC,QAAQ,MAAM;AACvD,MAAI,WAAW,MAAM;AACjB,WAAO,OAAO,KAAK,IAAI;AAAA,EAC3B;AACA,MAAI,MAAM,QAAQ,MAAM,GAAG;AACvB,WAAO;AAAA,EACX;AACA,SAAO,CAAC;AACZ;;;ACLA,IAAO,kBAAQ,MAAM;;;ACDN,SAAR,YAA6B,cAAc;AAC9C,QAAM,QAAQ,gBAAQ,aAAa,KAAK;AACxC,SAAO,QAAQ,QAAQ,KAAK;AAChC;;;ACFe,SAAR,oCAAqD,iBAAiB,YAAY,cAAc,EAAE,UAAU,GAAG;AAClH,kBAAgB;AAAA,IAAY,CAAC,YAAY;AACrC,YAAM,aAAa,CAAC,GAAG,YAAY,GAAG,OAAO;AAG7C,UAAI,QAAQ,QAAQ;AAChB,uBAAe,MAAM;AACjB,8CAAoC,iBAAiB,YAAY,cAAc,EAAE,UAAU,CAAC;AAAA,QAChG,CAAC;AAAA,MAEL,OACK;AACD,kBAAU,UAAU;AAAA,MACxB;AAAA,IACJ;AAAA;AAAA,IAEA,CAAC,UAAU;AACP,mBAAa,KAAK;AAClB,gBAAU,UAAU;AAAA,IACxB;AAAA,EAAC;AACL;;;AClBA,SAAS,+BAA+B,OAAO,cAAc;AACzD,MAAI,SAAS;AACT,WAAO;AACX,SAAO;AAAA,IACH,MAAM,MAAM,SACN,SACA,MAAM,cACF,cACA;AAAA,IACV,MAAM,MAAM;AAAA,IACZ,UAAU;AACN,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW,MAAM,KAAK,SAAS,MAAM,CAAC;AAAA,IACvE;AAAA,IACA,OAAO,SAAS;AAEZ,YAAM,kBAAkB,MAAM,aAAa;AAC3C,YAAM,UAAU,MAAM,IAAI,QAAQ,CAAC,YAAY;AAC3C,4CAAoC,iBAAiB,CAAC,GAAG,cAAc;AAAA,UACnE,WAAW,CAAC,eAAe,QAAQ,WAAW,IAAI,CAAC,SAAS,+BAA+B,MAAM,YAAY,CAAC,CAAC;AAAA,QACnH,CAAC;AAAA,MACL,CAAC;AACD,aAAO;AAAA,IACX;AAAA,IACA,aAAa;AAAA,EACjB;AACJ;AACA,gBAAgB,uCAAuC,OAAO,cAAc,iBAAiB,QAAW;AACpG,QAAM,sBAAsB,MAAM,GAAG,YAAY,IAAI,MAAM,IAAI;AAE/D,MAAI,MAAM,SAAS,QAAQ;AACvB,UAAM,OAAO,MAAM,MAAM,QAAQ;AACjC,QAAI,QAAQ,MAAM;AACd;AACA,WAAK,eAAe,eAAe,oBAAoB,IAAI;AAC3D,YAAM;AAAA,IACV,WACS,kBAAkB;AACvB,YAAM;AAAA,EACd,WACS,MAAM,SAAS,aAAa;AACjC,qBAAiB,UAAU,MAAM,OAAO,GAAG;AAEvC,aAAO,uCAAuC,QAAQ,eAAe,oBAAoB,IAAI,MAAM,IAAI;AAAA,IAC3G;AAAA,EACJ,WACS,kBAAkB;AACvB,UAAM;AACd;AAQA,gBAAO,yBAAiD,cAAc,cAAc;AAIhF,QAAM,oBAAoB,MAAM,QAAQ,IAAI,MAAM,KAAK,aAAa,OAAO,OAAO,SAAS;AAEvF,QAAI;AASJ,UAAM,aAAa,MAAM,OAAO,KAAK,eAAe,aAC9C,KAAK,WAAW,IAChB,KAAK,iBAAiB;AAC5B,yBAAqB,+BAA+B,WAAW,GAAG,YAAY;AAC9E,WAAO;AAAA,MACH;AAAA,MACA,gBAAgB,KAAK,UAAU;AAAA;AAAA,IACnC;AAAA,EACJ,CAAC,CAAC;AACF,aAAW,EAAE,gBAAgB,iBAAiB,KAAK,mBAAmB;AAElE,QAAI,oBAAoB,MAAM;AAC1B,UAAI;AACA,eAAO,uCAAuC,kBAAkB,IAAI,cAAc;AAAA,MACtF,SACO,KAAK;AAIR,YAAI,kBAAkB,MAAM;AACxB,gBAAM;AAAA,QACV,OACK;AACD,uBAAa,GAAG;AAAA,QACpB;AAAA,MACJ;AAAA,IACJ,WACS,kBAAkB;AACvB,YAAM;AAAA,EACd;AACJ;;;ACxFA,eAAO,gBAAuC,cAAc,SAAS;AAEjE,QAAM,eAAe,SAAS,gBAAgB,SAAS;AACvD,MAAI;AACA,UAAM,cAAc,CAAC;AACrB,qBAAiB,QAAQ,yBAAoB,cAAc,YAAY,GAAG;AACtE,kBAAY,KAAK,IAAI;AAAA,IACzB;AACA,WAAO;AAAA,EAEX,QACM;AACF,WAAO,YAAY,YAAY;AAAA,EACnC;AACJ;;;AC/Be,SAAR,cAA+B,KAAK;AAEvC,QAAM,QAAQ;AACd,QAAM,OAAO,MAAM,KAAK,GAAG,IAAI,CAAC;AAChC,QAAM,iBAAiB,cAAc,KAAK,GAAG,IAAI,OAAO;AACxD,SAAO,GAAG,cAAc,MAAM,IAAI;AACtC;;;ACHA,SAAS,iBAAiB,SAAS;AAO/B,SAAO,WAAW,CAAC,QAAQ,KAAK;AAC5B,cAAU,QAAQ;AAAA,EACtB;AACA,SAAO,SAAS;AACpB;AACA,IAAO,2BAAQ;;;ACZf,SAAS,IAAI,QAAQ;AACjB,SAAO,SAAS,KAAK,IAAI,MAAM,KAAK,OAAO,SAAS;AACxD;AAIe,SAAR,eAAgC;AACnC,QAAM,OAAO,oBAAI,KAAK;AACtB,QAAM,QAAQ,IAAI,KAAK,SAAS,CAAC;AACjC,QAAM,UAAU,IAAI,KAAK,WAAW,CAAC;AACrC,QAAM,UAAU,IAAI,KAAK,WAAW,CAAC;AACrC,SAAO,GAAG,KAAK,IAAI,OAAO,IAAI,OAAO;AACzC;;;ACZe,SAAR,sBAAuC;AAC1C,MAAI,OAAO,WAAW,aAAa;AAC/B,WAAO;AAAA,EACX;AACA,QAAM,OAAO,SAAS;AAEtB,MAAI,QAAQ,QAAQ,UAAU,MAAM;AAChC,WAAO;AAAA,EACX;AACA,MAAI,EAAE,eAAe,SACjB,EAAE,iBAAiB,SACnB,EAAE,YAAY,OAAO;AACrB,WAAO;AAAA,EACX;AACA,MAAI,EAAE,cAAc,SAAS;AACzB,WAAO;AAAA,EACX;AACA,MAAI,EAAE,gBAAgB,SAAS;AAC3B,WAAO;AAAA,EACX;AACA,SAAO;AACX;;;ACrBe,SAAR,YAA6B,KAAK;AACrC,SAAO,IAAI,WAAW,OAAO;AACjC;;;ACLe,SAAR,mBAAoC,UAAU;AACjD,MAAI,CAAC;AACD,WAAO;AAEX,SAAO,sDAAsD,KAAK,QAAQ;AAC9E;;;ACLe,SAAR,cAA+B,YAAY;AAC9C,QAAM,QAAQ,KAAK,MAAM,aAAa,IAAI,IAAI;AAC9C,QAAM,UAAU,KAAK,MAAM,aAAa,EAAE,IAAI;AAC9C,QAAM,UAAU,KAAK,MAAM,aAAa,EAAE;AAC1C,SAAO,EAAE,OAAO,SAAS,QAAQ;AACrC;;;ACJe,SAAR,UAA2B,SAAS;AACvC,QAAM,OAAO,cAAc,OAAO;AAIlC,QAAM,WAAW,KAAK,UAAU,IAAI,KAAK,GAAG,KAAK,KAAK;AACtD,QAAM,aAAa,KAAK,YAAY,IAC9B,KACA,GAAG,KAAK,UAAU,IACd,KAAK,UACL,IAAI,KAAK,QAAQ,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC,EAAE;AAC1D,QAAM,aAAa,KAAK,UAAU,IAC5B,KACA,GAAG,KAAK,YAAY,IAChB,KAAK,UACL,IAAI,KAAK,QAAQ,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC,EAAE;AAC1D,SAAO,GAAG,QAAQ,GAAG,UAAU,GAAG,UAAU;AAChD;;;AClBA,SAAS,kBAAkB,OAAO;AAC9B,SAAO,IAAI,MAAM,aAAa,EAAE,MAAM,CAAC;AAC3C;AACA,SAAS,QAAQ,QAAQ;AACrB,MAAI,UAAU,MAAM;AAChB,UAAM,eAAe,MAAM,KAAK,MAAM,OAAO,MAAM;AACnD,WAAO,iBAAiB,SAAS,cAAc,EAAE,MAAM,KAAK,CAAC;AAC7D,UAAM,sBAAsB,MAAM;AAC9B,aAAO,oBAAoB,SAAS,YAAY;AAAA,IACpD;AACA,SAAK,OAAO,qBAAqB,mBAAmB;AAAA,EACxD;AACA,SAAO;AACX;AACO,IAAM,mBAAN,MAAuB;AAAA,EAC1B,kBAAkB;AAAA,EAClB,kBAAkB,CAAC;AAAA,EACnB,UAAU;AAAA,EACV;AAAA,EACA,aAAa;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,OAAO;AACf,QAAI,OAAO,UAAU,YAAY,UAAU,GAAG;AAC1C,WAAK,QAAQ;AAAA,IACjB,OACK;AACD,WAAK,QAAQ;AAAA,IACjB;AAAA,EACJ;AAAA,EACA,MAAM,IAAI;AACN,SAAK,mBAAmB;AACxB,QAAI,OAAO;AACX,QAAI;AACJ,QAAI;AACA,qBAAe,GAAG;AAAA,IACtB,SACO,KAAK;AACR,WAAK,mBAAmB;AACxB,YAAM;AAAA,IACV;AACA,WAAO;AAAA,MACH,OAAO,CAAC,UAAU;AACd,YAAI;AACA;AACJ,eAAO;AACP,aAAK,mBAAmB;AACxB,uBAAe,KAAK;AACpB,aAAK,WAAW;AAAA,MACpB;AAAA,MACA,MAAM,MAAM;AACR,YAAI;AACA;AACJ,eAAO;AACP,aAAK,mBAAmB;AACxB,aAAK,WAAW;AAAA,MACpB;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,aAAa;AAIT,mBAAe,MAAM,KAAK,MAAM,CAAC;AAAA,EACrC;AAAA,EACA,QAAQ;AACJ,QAAI,KAAK,WAAW,KAAK,mBAAmB,KAAK,OAAO;AACpD;AAAA,IACJ;AACA,QAAI,KAAK,gBAAgB,WAAW,GAAG;AACnC;AAAA,IACJ;AAIA,UAAM,OAAO,KAAK,gBAAgB,MAAM;AACxC,QAAI,QAAQ,MAAM;AACd,YAAM,IAAI,MAAM,mCAAmC;AAAA,IACvD;AACA,UAAM,UAAU,KAAK,MAAM,KAAK,EAAE;AAClC,SAAK,QAAQ,QAAQ;AACrB,SAAK,OAAO,QAAQ;AAAA,EACxB;AAAA,EACA,OAAO,IAAI,SAAS;AAChB,UAAM,UAAU;AAAA,MACZ;AAAA,MACA,UAAU,SAAS,YAAY;AAAA,MAC/B,OAAO,MAAM;AACT,aAAK,SAAS,OAAO;AAAA,MACzB;AAAA,MACA,MAAM,MAAM;AACR,cAAM,IAAI,MAAM,4DAA4D;AAAA,MAChF;AAAA,IACJ;AACA,UAAM,QAAQ,KAAK,gBAAgB,UAAU,CAAC,UAAU;AACpD,aAAO,QAAQ,WAAW,MAAM;AAAA,IACpC,CAAC;AACD,QAAI,UAAU,IAAI;AACd,WAAK,gBAAgB,KAAK,OAAO;AAAA,IACrC,OACK;AACD,WAAK,gBAAgB,OAAO,OAAO,GAAG,OAAO;AAAA,IACjD;AACA,WAAO;AAAA,EACX;AAAA,EACA,SAAS,SAAS;AACd,UAAM,QAAQ,KAAK,gBAAgB,QAAQ,OAAO;AAClD,QAAI,UAAU,IAAI;AACd,WAAK,gBAAgB,OAAO,OAAO,CAAC;AAAA,IACxC;AAAA,EACJ;AAAA,EACA,IAAI,IAAI,cAAc;AAClB,QAAI,CAAC,KAAK,WAAW,KAAK,kBAAkB,KAAK,OAAO;AACpD,aAAO,KAAK,MAAM,EAAE;AAAA,IACxB;AACA,WAAO,KAAK,OAAO,IAAI,YAAY;AAAA,EACvC;AAAA,EACA,iBAAiB,IAAI,cAAc;AAC/B,WAAO,IAAI,SAAS;AAChB,YAAM,gBAAgB,KAAK,IAAI,MAAM;AACjC,WAAG,GAAG,IAAI;AACV,uBAAe,MAAM,cAAc,KAAK,CAAC;AACzC,eAAO,MAAM;AAAA,QAAE;AAAA,MACnB,GAAG,YAAY;AACf,aAAO;AAAA,QACH;AAAA,QACA,QAAQ;AACJ,wBAAc,MAAM;AAAA,QACxB;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,oBAAoB,IAAI,cAAc;AAClC,WAAO,IAAI,SAAS;AAChB,UAAI;AACJ,YAAM,eAAe,IAAI,QAAQ,CAAC,SAAS,WAAW;AAClD,wBAAgB,KAAK,IAAI,MAAM;AAC3B,cAAI;AACJ,cAAI;AACJ,cAAI;AACA,2BAAe,QAAQ,QAAQ,GAAG,GAAG,IAAI,CAAC;AAAA,UAC9C,SACO,KAAK;AACR,2BAAe,QAAQ,OAAO,GAAG;AAAA,UACrC;AACA,uBAAa,KAAK,CAAC,WAAW;AAC1B,gBAAI,aAAa;AACb,qBAAO,WAAW;AAAA,YACtB,OACK;AACD,4BAAc,KAAK;AACnB,sBAAQ,MAAM;AAAA,YAClB;AAAA,UACJ,GAAG,CAAC,QAAQ;AACR,gBAAI,aAAa;AACb,qBAAO,WAAW;AAAA,YACtB,OACK;AACD,4BAAc,KAAK;AACnB,qBAAO,GAAG;AAAA,YACd;AAAA,UACJ,CAAC;AACD,iBAAO,CAAC,UAAU;AACd,0BAAc,kBAAkB,KAAK;AAAA,UACzC;AAAA,QACJ,GAAG,YAAY;AAAA,MACnB,CAAC;AACD,mBAAa,QAAQ,CAAC,UAAU;AAC5B,sBAAc,MAAM,KAAK;AAAA,MAC7B;AACA,mBAAa,UAAU;AACvB,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,SAAS;AACL,SAAK,UAAU;AACf,iBAAa,KAAK,WAAW;AAC7B,aAASC,KAAI,GAAGA,KAAI,KAAK,OAAOA,MAAK;AACjC,WAAK,WAAW;AAAA,IACpB;AAAA,EACJ;AAAA,EACA,UAAU,MAAM,KAAK,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO5B,MAAM,WAAW,MAAM;AACnB,SAAK,UAAU;AACf,iBAAa,KAAK,WAAW;AAC7B,QAAI,YAAY,MAAM;AAClB,WAAK,cAAc,WAAW,KAAK,SAAS,QAAQ;AAAA,IACxD;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,UAAU,UAAU;AAChB,iBAAa,KAAK,kBAAkB;AACpC,SAAK,MAAM,QAAQ;AACnB,QAAI,KAAK,QAAQ,KAAK,OAAO,SAAS,KAAK,KAAK,GAAG;AAC/C,WAAK,cAAc,KAAK,QAAQ;AAChC,WAAK,QAAQ,KAAK;AAClB,WAAK,qBAAqB,WAAW,KAAK,gBAAgB,QAAQ;AAAA,IACtE;AAAA,EACJ;AAAA,EACA,iBAAiB,MAAM;AACnB,QAAI,KAAK,SAAS;AACd,WAAK,qBAAqB,WAAW,KAAK,gBAAgB,CAAC;AAC3D;AAAA,IACJ;AACA,SAAK,aAAa,KAAK;AACvB,SAAK,QAAQ,KAAK,MAAM,KAAK,cAAc,KAAK,cAAc,CAAC;AAC/D,aAASA,KAAI,KAAK,YAAYA,MAAK,KAAK,OAAOA,MAAK;AAChD,WAAK,WAAW;AAAA,IACpB;AACA,QAAI,KAAK,cAAc,KAAK,aAAa,GAAG;AACxC,WAAK,qBAAqB,WAAW,KAAK,gBAAgB,GAAI;AAAA,IAClE,OACK;AACD,WAAK,aAAa,KAAK,MAAM,KAAK,aAAa,CAAC;AAAA,IACpD;AAAA,EACJ;AAAA,EACA,IAAI,WAAW;AACX,WAAO,KAAK;AAAA,EAChB;AACJ;;;AC1Oe,SAAR,qBAAsC,MAAM;AAC/C,SAAO;AAAA,IACH,GAAG;AAAA,IACH,MAAM,KAAK;AAAA,IACX,WAAW,KAAK,OAAO,wBAAwB,KAAK,IAAI,EAAE,YAAY;AAAA,EAC1E;AACJ;;;ACPA,SAAS,kBAAkB,QAAQ,IAAI,aAAa;AAChD,QAAM,WAAW,CAAC;AAClB,SAAO,QAAQ,CAAC,UAAU;AAKtB,QAAI,OAAO,UAAU,UAAU;AAC3B,aAAO,SAAS,KAAK,KAAK;AAAA,IAC9B;AACA,WAAO,GAAG,OAAO,KAAK,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAKC,IAAG,SAAS;AACrD,UAAI,QAAQ,IAAI;AACZ,iBAAS,KAAK,GAAG;AAAA,MACrB;AAEA,UAAIA,KAAI,KAAK,SAAS,GAAG;AACrB,iBAAS,KAAK,WAAW;AAAA,MAC7B;AAAA,IACJ,CAAC;AAAA,EACL,CAAC;AACD,SAAO;AACX;AAWA,SAAS,YAAY,QAAQ,SAAS;AAClC,QAAM,cAAc;AACpB,QAAM,kBAAkB;AACxB,MAAI,eAAe,CAAC,MAAM;AAC1B,MAAI,WAAW;AACX,WAAO;AACX,aAAW,OAAO,OAAO,KAAK,OAAO,GAAG;AACpC,QAAI,QAAQ,KAAK;AAIb,UAAI,cAAc,QAAQ,GAAG;AAC7B,UAAI,OAAO,gBAAgB,UAAU;AACjC,sBAAc,YAAY,OAAO,OAAO,EAAE,aAAa,eAAe;AAAA,MAC1E;AAIA,qBAAe,kBAAkB,cAAc,IAAI,OAAO,OAAO,GAAG,OAAO,GAAG,GAAG,WAAW;AAAA,IAChG;AAAA,EACJ;AACA,SAAO;AACX;AACA,IAAM,sBAAsB,CAAC,QAAQ;AACjC,QAAM,IAAI,MAAM,mBAAmB,GAAG,EAAE;AAC5C;AAYA,IAAqB,aAArB,MAAgC;AAAA,EAC5B;AAAA,EACA,YAAY,SAAS,EAAE,eAAe,oBAAoB,IAAI,CAAC,GAAG;AAC9D,SAAK,SAAS;AAAA,MACV,SAAS,CAAC;AAAA,MACV,UAAUC,IAAG;AACT,YAAIA,OAAM,GAAG;AACT,iBAAO;AAAA,QACX;AACA,eAAO;AAAA,MACX;AAAA,IACJ;AACA,QAAI,MAAM,QAAQ,OAAO,GAAG;AACxB,cAAQ,QAAQ,KAAK,QAAQ,IAAI;AAAA,IACrC,OACK;AACD,WAAK,OAAO,OAAO;AAAA,IACvB;AACA,SAAK,gBAAgB;AAAA,EACzB;AAAA,EACA;AAAA,EACA,OAAO,QAAQ;AACX,QAAI,CAAC,QAAQ,SAAS;AAClB;AAAA,IACJ;AACA,UAAM,aAAa,KAAK;AACxB,WAAO,OAAO,KAAK,QAAQ;AAAA,MACvB,SAAS,EAAE,GAAG,WAAW,SAAS,GAAG,OAAO,QAAQ;AAAA,MACpD,WAAW,OAAO,aAAa,WAAW;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,UAAU,KAAK,SAAS;AACpB,WAAO,KAAK,eAAe,KAAK,OAAO,EAAE,KAAK,EAAE;AAAA,EACpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,eAAe,KAAK,SAAS;AACzB,QAAI,SAAS,KAAK,OAAO,QAAQ,GAAG;AACpC,QAAI,UAAU,MAAM;AAChB,WAAK,cAAc,GAAG;AACtB,eAAS;AAAA,IACb;AACA,UAAM,iBAAiB,OAAO,WAAW;AACzC,QAAI,gBAAgB;AAChB,UAAI,WAAW,OAAO,QAAQ,gBAAgB,aAAa;AACvD,cAAM,SAAS,KAAK,OAAO,UAAU,QAAQ,WAAW;AACxD,eAAO,YAAY,OAAO,MAAM,GAAG,OAAO;AAAA,MAC9C;AACA,YAAM,IAAI,MAAM,wFAAwF;AAAA,IAC5G;AACA,QAAI,OAAO,WAAW,UAAU;AAC5B,YAAM,IAAI,MAAM,yBAAyB;AAAA,IAC7C;AACA,WAAO,YAAY,QAAQ,OAAO;AAAA,EACtC;AACJ;;;AClIA,IAAM,YAAY;AACH,SAAR,eAAgC,QAAQ,WAAW;AAEtD,MAAI,cAAc;AACd,WAAO;AAEX,MAAI,OAAO,UAAU;AACjB,WAAO;AAEX,MAAI,aAAa,UAAU,SAAS;AAChC,WAAO,GAAG,OAAO,MAAM,GAAG,YAAY,CAAC,CAAC;AAC5C,QAAM,cAAc,YAAY,UAAU;AAC1C,QAAM,aAAa,KAAK,KAAK,cAAc,CAAC;AAC5C,QAAM,YAAY,KAAK,MAAM,cAAc,CAAC;AAC5C,SAAO,OAAO,MAAM,GAAG,UAAU,IAAI,YAAY,OAAO,MAAM,CAAC,SAAS;AAC5E;;;ACnBA,IAAM,qBAAN,cAAiC,MAAM;AAAA,EACnC,OAAO;AACX;AACA,IAAO,6BAAQ;;;ACFR,IC0BMC;AD1BN,IEUDC;AFVC,IGGHC;AHHG,IG8FMC;AH9FN,IIkLHC;AJlLG,II6LHC;AJ7LG,II+LDC;AJ/LC,IIyNDC;AJzNC,IKcDC;ALdC,IK2BHC;AL3BG,IK0KDC;AL1KC,IK2KDC;AL3KC,IMEIC;ANFJ,IAiBMC,IAAgC,CAAG;AAjBzC,IAkBMC,IAAY,CAAA;AAlBlB,IAmBMC,IACZ;AApBM,ICCMC,IAAUC,MAAMD;AAStB,SAASE,EAAOC,IAAKC,IAAAA;AAE3B,WAASR,MAAKQ,GAAOD,CAAAA,GAAIP,EAAAA,IAAKQ,GAAMR,EAAAA;AACpC,SAA6BO;AAC9B;AAQgB,SAAAE,EAAWC,IAAAA;AACtBA,EAAAA,MAAQA,GAAKC,cAAYD,GAAKC,WAAWC,YAAYF,EAAAA;AAC1D;AEVgB,SAAAG,EAAcC,IAAMN,IAAOO,IAAAA;AAC1C,MACCC,IACAC,IACAjB,IAHGkB,KAAkB,CAAA;AAItB,OAAKlB,MAAKQ,GACA,UAALR,KAAYgB,KAAMR,GAAMR,EAAAA,IACd,SAALA,KAAYiB,KAAMT,GAAMR,EAAAA,IAC5BkB,GAAgBlB,EAAAA,IAAKQ,GAAMR,EAAAA;AAUjC,MAPImB,UAAUC,SAAS,MACtBF,GAAgBH,WACfI,UAAUC,SAAS,IAAIhC,EAAMiC,KAAKF,WAAW,CAAA,IAAKJ,KAKjC,cAAA,OAARD,MHjBQ,QGiBcA,GAAKQ,aACrC,MAAKtB,MAAKc,GAAKQ,aAAAA,YACVJ,GAAgBlB,EAAAA,MACnBkB,GAAgBlB,EAAAA,IAAKc,GAAKQ,aAAatB,EAAAA;AAK1C,SAAOuB,EAAYT,IAAMI,IAAiBF,IAAKC,IHzB5B,IAAA;AG0BpB;AAcgB,SAAAM,EAAYT,IAAMN,IAAOQ,IAAKC,IAAKO,IAAAA;AAIlD,MAAMC,KAAQ,EACbX,MAAAA,IACAN,OAAAA,IACAQ,KAAAA,IACAC,KAAAA,IACAS,KHjDkB,MGkDlBC,IHlDkB,MGmDlBC,KAAQ,GACRC,KHpDkB,MGqDlBC,KHrDkB,MGsDlBC,aAAAA,QACAC,KHvDkB,QGuDPR,KAAAA,EAAqBlC,IAAUkC,IAC1CS,KAAAA,IACAC,KAAQ,EAAA;AAMT,SH/DmB,QG6DfV,MH7De,QG6DKnC,EAAQoC,SAAepC,EAAQoC,MAAMA,EAAAA,GAEtDA;AACR;AAAA,SAEgBU,IAAAA;AACf,SAAO,EAAEC,SHnEU,KAAA;AGoEpB;AAEgB,SAAAC,EAAS7B,IAAAA;AACxB,SAAOA,GAAMO;AACd;AC3EO,SAASuB,EAAc9B,IAAO+B,IAAAA;AACpCC,OAAKhC,QAAQA,IACbgC,KAAKD,UAAUA;AAChB;AAAA,SA0EgBE,EAAchB,IAAOiB,IAAAA;AACpC,MJ3EmB,QI2EfA,GAEH,QAAOjB,GAAKE,KACTc,EAAchB,GAAKE,IAAUF,GAAKQ,MAAU,CAAA,IJ9E7B;AImFnB,WADIU,IACGD,KAAajB,GAAKC,IAAWN,QAAQsB,KAG3C,KJtFkB,SIoFlBC,KAAUlB,GAAKC,IAAWgB,EAAAA,MJpFR,QIsFKC,GAAOd,IAI7B,QAAOc,GAAOd;AAShB,SAA4B,cAAA,OAAdJ,GAAMX,OAAqB2B,EAAchB,EAAAA,IJnGpC;AIoGpB;AA4CA,SAASmB,EAAwBnB,IAAAA;AAAjC,MAGWzB,IACJ6C;AAHN,MJjJmB,SIiJdpB,KAAQA,GAAKE,OJjJC,QIiJoBF,GAAKK,KAAqB;AAEhE,SADAL,GAAKI,MAAQJ,GAAKK,IAAYgB,OJlJZ,MImJT9C,KAAI,GAAGA,KAAIyB,GAAKC,IAAWN,QAAQpB,KAE3C,KJrJiB,SIoJb6C,KAAQpB,GAAKC,IAAW1B,EAAAA,MJpJX,QIqJI6C,GAAKhB,KAAe;AACxCJ,MAAAA,GAAKI,MAAQJ,GAAKK,IAAYgB,OAAOD,GAAKhB;AAC1C;IACD;AAGD,WAAOe,EAAwBnB,EAAAA;EAChC;AACD;AA4BO,SAASsB,EAAcC,IAAAA;AAAAA,GAAAA,CAE1BA,GAACC,QACDD,GAACC,MAAAA,SACFzD,EAAc0D,KAAKF,EAAAA,KAAAA,CAClBG,EAAOC,SACT3D,KAAgBJ,EAAQgE,wBAExB5D,IAAeJ,EAAQgE,sBACN3D,GAAOyD,CAAAA;AAE1B;AASA,SAASA,IAAAA;AAMR,WALIH,IApGoBM,IAOjBC,IANHC,IACHC,IACAC,IACAC,IAiGAC,KAAI,GAIEpE,EAAc4B,SAOhB5B,GAAc4B,SAASwC,MAC1BpE,EAAcqE,KAAKlE,CAAAA,GAGpBqD,KAAIxD,EAAcsE,MAAAA,GAClBF,KAAIpE,EAAc4B,QAEd4B,GAACC,QAhHCM,KAAAA,QANHC,KAAAA,QACHC,MADGD,MADoBF,KAwHNN,IAvHMhB,KACNH,KACjB6B,KAAc,CAAA,GACdC,KAAW,CAAA,GAERL,GAASS,SACNR,KAAWjD,EAAO,CAAE,GAAEkD,EAAAA,GACpBxB,MAAawB,GAAQxB,MAAa,GACtC3C,EAAQoC,SAAOpC,EAAQoC,MAAM8B,EAAAA,GAEjCS,EACCV,GAASS,KACTR,IACAC,IACAF,GAASW,KACTX,GAASS,IAAYG,cJzII,KI0IzBV,GAAQtB,MAAyB,CAACuB,EAAAA,IJ3HjB,MI4HjBC,IJ5HiB,QI6HjBD,KAAiBhB,EAAce,EAAAA,IAAYC,IAAAA,CAAAA,EJ5IlB,KI6ItBD,GAAQtB,MACXyB,EAAAA,GAGDJ,GAAQvB,MAAawB,GAAQxB,KAC7BuB,GAAQ5B,GAAAD,IAAmB6B,GAAQtB,GAAAA,IAAWsB,IAC9CY,EAAWT,IAAaH,IAAUI,EAAAA,GAClCH,GAAQ3B,MAAQ2B,GAAQ7B,KAAW,MAE/B4B,GAAQ1B,OAAS4B,MACpBb,EAAwBW,EAAAA;AA6F1BJ,IAAOC,MAAkB;AAC1B;AG5MgB,SAAAgB,EACfC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAjB,IACAD,IACAmB,IACAjB,IAAAA;AAXe,MAaX3D,IAEHwD,IAEAqB,IAEAC,IAEAC,IAiCIC,IA8BAC,IA1DDC,KAAeV,MAAkBA,GAAc9C,OAAexB,GAE9DiF,KAAoBb,GAAalD;AAUrC,OARAqC,KAAS2B,EACRb,IACAD,IACAY,IACAzB,IACA0B,EAAAA,GAGInF,KAAI,GAAGA,KAAImF,IAAmBnF,KPhEhB,UOiElB6E,KAAaN,GAAc7C,IAAW1B,EAAAA,OAMrCwD,KAAAA,MADGqB,GAAU5C,MACFhC,IAEAiF,GAAYL,GAAU5C,GAAAA,KAAYhC,GAI9C4E,GAAU5C,MAAUjC,IAGhBgF,KAAShB,EACZK,IACAQ,IACArB,IACAiB,IACAC,IACAC,IACAjB,IACAD,IACAmB,IACAjB,EAAAA,GAIDmB,KAASD,GAAUhD,KACfgD,GAAW5D,OAAOuC,GAASvC,OAAO4D,GAAW5D,QAC5CuC,GAASvC,OACZoE,EAAS7B,GAASvC,KPjGF,MOiGa4D,EAAAA,GAE9BlB,GAAST,KACR2B,GAAW5D,KACX4D,GAAU/C,OAAegD,IACzBD,EAAAA,IPtGgB,QO0GdE,MP1Gc,QO0GWD,OAC5BC,KAAgBD,MAGbG,KAAAA,CAAAA,EPzHsB,IOyHLJ,GAAU3C,SACZsB,GAAQ9B,QAAemD,GAAUnD,MACnD+B,KAAS6B,EAAOT,IAAYpB,IAAQY,IAAWY,EAAAA,IACX,cAAA,OAAnBJ,GAAW/D,QAAAA,WAAsBkE,KAClDvB,KAASuB,KACCF,OACVrB,KAASqB,GAAOS,cAIjBV,GAAU3C,OAAAA;AAKX,SAFAqC,GAAc1C,MAAQkD,IAEftB;AACR;AAOA,SAAS2B,EACRb,IACAD,IACAY,IACAzB,IACA0B,IAAAA;AALD,MAQKnF,IAEA6E,IAEArB,IA8DGgC,IAOAC,IAnEHC,KAAoBR,GAAY9D,QACnCuE,KAAuBD,IAEpBE,KAAO;AAGX,OADArB,GAAc7C,MAAa,IAAIrB,MAAM8E,EAAAA,GAChCnF,KAAI,GAAGA,KAAImF,IAAmBnF,KPzJhB,UO4JlB6E,KAAaP,GAAatE,EAAAA,MAIJ,aAAA,OAAd6E,MACc,cAAA,OAAdA,MA8CFW,KAAcxF,KAAI4F,KA/BvBf,KAAaN,GAAc7C,IAAW1B,EAAAA,IANjB,YAAA,OAAd6E,MACc,YAAA,OAAdA,MAEc,YAAA,OAAdA,MACPA,GAAW9C,eAAe8D,SAEiBtE,EPhL1B,MOkLhBsD,IPlLgB,MAAA,MAAA,IAAA,IOuLPzE,EAAQyE,EAAAA,IACyBtD,EAC1Cc,GACA,EAAEtB,UAAU8D,GAAAA,GP1LI,MAAA,MAAA,IAAA,IACKiB,QO8LZjB,GAAW9C,eAA4B8C,GAAUjD,MAAU,IAK1BL,EAC1CsD,GAAW/D,MACX+D,GAAWrE,OACXqE,GAAW7D,KACX6D,GAAW5D,MAAM4D,GAAW5D,MPxMZ,MOyMhB4D,GAAU7C,GAAAA,IAGgC6C,IAIlClD,KAAW4C,IACrBM,GAAUjD,MAAU2C,GAAc3C,MAAU,GAY5C4B,KP7NkB,MAAA,OOsNZiC,KAAiBZ,GAAU5C,MAAU8D,EAC1ClB,IACAK,IACAM,IACAG,EAAAA,OAMAA,OADAnC,KAAW0B,GAAYO,EAAAA,OAGtBjC,GAAQtB,OP3OW,KASH,QOyOCsB,MPzOD,QOyOqBA,GAAQxB,OAAAA,MAG1CyD,OAeCN,KAAoBO,KACvBE,OACUT,KAAoBO,MAC9BE,OAK4B,cAAA,OAAnBf,GAAW/D,SACrB+D,GAAU3C,OP/Qc,MOiRfuD,MAAiBD,OAiBvBC,MAAiBD,KAAc,IAClCI,OACUH,MAAiBD,KAAc,IACzCI,QAEIH,KAAgBD,KACnBI,OAEAA,MAMDf,GAAU3C,OPhTc,OO8KzBqC,GAAc7C,IAAW1B,EAAAA,IPnKR;AO8SnB,MAAI2F,GACH,MAAK3F,KAAI,GAAGA,KAAI0F,IAAmB1F,KP/SjB,UOgTjBwD,KAAW0B,GAAYlF,EAAAA,MACgC,MP1TnC,IO0TKwD,GAAQtB,SAC5BsB,GAAQ3B,OAAS4B,OACpBA,KAAShB,EAAce,EAAAA,IAGxBwC,EAAQxC,IAAUA,EAAAA;AAKrB,SAAOC;AACR;AASA,SAAS6B,EAAOW,IAAaxC,IAAQY,IAAWY,IAAAA;AAAhD,MAIMlE,IACKf;AAFV,MAA+B,cAAA,OAApBiG,GAAYnF,MAAoB;AAE1C,SADIC,KAAWkF,GAAWvE,KACjB1B,KAAI,GAAGe,MAAYf,KAAIe,GAASK,QAAQpB,KAC5Ce,CAAAA,GAASf,EAAAA,MAKZe,GAASf,EAAAA,EAAE2B,KAAWsE,IACtBxC,KAAS6B,EAAOvE,GAASf,EAAAA,GAAIyD,IAAQY,IAAWY,EAAAA;AAIlD,WAAOxB;EACR;AAAWwC,EAAAA,GAAWpE,OAAS4B,OAC1BwB,OACCxB,MAAUwC,GAAYnF,QAAAA,CAAS2C,GAAO9C,eACzC8C,KAAShB,EAAcwD,EAAAA,IAExB5B,GAAU6B,aAAaD,GAAWpE,KAAO4B,MP3VxB,IAAA,IO6VlBA,KAASwC,GAAWpE;AAGrB,KAAA;AACC4B,IAAAA,KAASA,MAAUA,GAAO8B;EAAAA,SPjWR,QOkWV9B,MAAqC,KAAnBA,GAAO0C;AAElC,SAAO1C;AACR;AAQgB,SAAA2C,EAAarF,IAAUsF,IAAAA;AAUtC,SATAA,KAAMA,MAAO,CAAA,GP9WM,QO+WftF,MAAuC,aAAA,OAAZA,OACpBX,EAAQW,EAAAA,IAClBA,GAASuF,KAAK,SAAAzD,IAAAA;AACbuD,MAAavD,IAAOwD,EAAAA;EACrB,CAAA,IAEAA,GAAInD,KAAKnC,EAAAA,IAEHsF;AACR;AASA,SAASN,EACRlB,IACAK,IACAM,IACAG,IAAAA;AAJD,MAgCMY,IACAC,IAEG9D,IA7BF1B,KAAM6D,GAAW7D,KACjBF,KAAO+D,GAAW/D,MACpB0C,KAAW0B,GAAYM,EAAAA,GACrBiB,KP1Ya,QO0YHjD,MAAmD,MPnZ7C,IOmZeA,GAAQtB;AAiB7C,MP3ZmB,SO4ZjBsB,MAAuC,QAAlBqB,GAAW7D,OAChCyF,MAAWzF,MAAOwC,GAASxC,OAAOF,MAAQ0C,GAAS1C,KAEpD,QAAO0E;AAAAA,MANPG,MAAwBc,KAAU,IAAI;AAUtC,SAFIF,KAAIf,KAAc,GAClBgB,KAAIhB,KAAc,GACfe,MAAK,KAAKC,KAAItB,GAAY9D,SAGhC,KPtaiB,SOqajBoC,KAAW0B,GADLxC,KAAa6D,MAAK,IAAIA,OAAMC,IAAAA,MAIF,MPjbZ,IOiblBhD,GAAQtB,QACTlB,MAAOwC,GAASxC,OAChBF,MAAQ0C,GAAS1C,KAEjB,QAAO4B;;AAKV,SAAA;AACD;AF/bA,SAASgE,EAASC,IAAO3F,IAAK4F,IAAAA;AACf,SAAV5F,GAAI,CAAA,IACP2F,GAAME,YAAY7F,ILWA,QKXK4F,KAAgB,KAAKA,EAAAA,IAE5CD,GAAM3F,EAAAA,ILSY,QKVR4F,KACG,KACa,YAAA,OAATA,MAAqBzG,EAAmB2G,KAAK9F,EAAAA,IACjD4F,KAEAA,KAAQ;AAEvB;AAyBgB,SAAAC,EAAYE,IAAKC,IAAMJ,IAAOK,IAAUvC,IAAAA;AAAxC,MACXwC,IA8BGC;AA5BPC,IAAG,KAAY,WAARJ,GACN,KAAoB,YAAA,OAATJ,GACVG,CAAAA,GAAIJ,MAAMU,UAAUT;OACd;AAKN,QAJuB,YAAA,OAAZK,OACVF,GAAIJ,MAAMU,UAAUJ,KAAW,KAG5BA,GACH,MAAKD,MAAQC,GACNL,CAAAA,MAASI,MAAQJ,MACtBF,EAASK,GAAIJ,OAAOK,IAAM,EAAA;AAK7B,QAAIJ,GACH,MAAKI,MAAQJ,GACPK,CAAAA,MAAYL,GAAMI,EAAAA,KAASC,GAASD,EAAAA,KACxCN,EAASK,GAAIJ,OAAOK,IAAMJ,GAAMI,EAAAA,CAAAA;EAIpC;WAGmB,OAAXA,GAAK,CAAA,KAAwB,OAAXA,GAAK,CAAA,EAC/BE,CAAAA,KAAaF,OAASA,KAAOA,GAAKM,QAAQ1H,GAAe,IAAA,IACnDuH,KAAgBH,GAAKO,YAAAA,GAI1BP,KADGG,MAAiBJ,MAAe,gBAARC,MAAgC,eAARA,KAC5CG,GAAc/H,MAAM,CAAA,IAChB4H,GAAK5H,MAAM,CAAA,GAElB2H,GAAGnD,MAAamD,GAAGnD,IAAc,CAAE,IACxCmD,GAAGnD,EAAYoD,KAAOE,EAAAA,IAAcN,IAEhCA,KACEK,KAQJL,GAAMY,IAAYP,GAASO,KAP3BZ,GAAMY,IAAY3H,GAClBkH,GAAIU,iBACHT,IACAE,KAAanH,IAAoBD,GACjCoH,EAAAA,KAMFH,GAAIW,oBACHV,IACAE,KAAanH,IAAoBD,GACjCoH,EAAAA;OAGI;AACN,QLtF2B,gCKsFvBxC,GAIHsC,CAAAA,KAAOA,GAAKM,QAAQ,eAAe,GAAA,EAAKA,QAAQ,UAAU,GAAA;aAElD,WAARN,MACQ,YAARA,MACQ,UAARA,MACQ,UAARA,MACQ,UAARA,MAGQ,cAARA,MACQ,cAARA,MACQ,aAARA,MACQ,aAARA,MACQ,UAARA,MACQ,aAARA,MACAA,MAAQD,GAER,KAAA;AACCA,MAAAA,GAAIC,EAAAA,ILxGY,QKwGJJ,KAAgB,KAAKA;AAEjC,YAAMQ;IAER,SADUO,IAAAA;IACV;AASoB,kBAAA,OAATf,OLrHO,QKuHPA,MAAAA,UAAkBA,MAA8B,OAAXI,GAAK,CAAA,IAGpDD,GAAIa,gBAAgBZ,EAAAA,IAFpBD,GAAIc,aAAab,IAAc,aAARA,MAA8B,KAATJ,KAAgB,KAAKA,EAAAA;EAInE;AACD;AAOA,SAASkB,EAAiBZ,IAAAA;AAMzB,SAAA,SAAiBS,IAAAA;AAChB,QAAInF,KAAIoB,GAAa;AACpB,UAAMmE,KAAevF,KAAIoB,EAAY+D,GAAE7G,OAAOoG,EAAAA;AAC9C,UL7IiB,QK6IbS,GAAEK,EACLL,CAAAA,GAAEK,IAAcnI;eAKN8H,GAAEK,IAAcD,GAAaP,EACvC;AAED,aAAOO,GAAa1I,EAAQ4I,QAAQ5I,EAAQ4I,MAAMN,EAAAA,IAAKA,EAAAA;IACxD;EACD;AACD;AGzHO,SAAS3D,EACfK,IACAd,IACAC,IACAiB,IACAC,IACAC,IACAjB,IACAD,IACAmB,IACAjB,IAAAA;AAVM,MAaFuE,IAkBElF,IAAGmF,IAAOC,IAAUC,IAAUC,IAAUC,IACxCC,IACEC,IAMFC,IACAC,IAyGO3I,IA4BP4I,IACHC,IASS7I,IA6BNsE,IAgDOtE,IAtPZ8I,KAAUvF,GAASzC;AAIpB,MRjDwBgF,QQiDpBvC,GAASxB,YAA0B,QRlDpB;AAbU,QQkEzByB,GAAQtB,QACX0C,KAAAA,CAAAA,ERrE0B,KQqETpB,GAAQtB,MAEzByC,KAAoB,CADpBlB,KAASF,GAAQ1B,MAAQ2B,GAAQ3B,GAAAA,KAI7BqG,KAAM7I,EAAOuC,QAASsG,GAAI3E,EAAAA;AAE/BwF,IAAO,KAAsB,cAAA,OAAXD,GACjB,KAAA;AAkEC,QAhEIN,KAAWjF,GAAS/C,OAClBiI,KACL,eAAeK,MAAWA,GAAQE,UAAUC,QAKzCP,MADJR,KAAMY,GAAQI,gBACQzE,GAAcyD,GAAGpG,GAAAA,GACnC6G,KAAmBT,KACpBQ,KACCA,GAASlI,MAAMoG,QACfsB,GAAGvG,KACJ8C,IAGCjB,GAAQ1B,MAEXyG,MADAvF,KAAIO,GAAQzB,MAAc0B,GAAQ1B,KACNH,KAAwBqB,GAACmG,OAGjDV,KAEHlF,GAAQzB,MAAckB,KAAI,IAAI8F,GAAQN,IAAUG,EAAAA,KAGhDpF,GAAQzB,MAAckB,KAAI,IAAIV,EAC7BkG,IACAG,EAAAA,GAED3F,GAAEjB,cAAc+G,IAChB9F,GAAEiG,SAASG,IAERV,MAAUA,GAASW,IAAIrG,EAAAA,GAE3BA,GAAExC,QAAQgI,IACLxF,GAAEsG,UAAOtG,GAAEsG,QAAQ,CAAA,IACxBtG,GAAET,UAAUoG,IACZ3F,GAACiB,MAAkBQ,IACnB0D,KAAQnF,GAACC,MAAAA,MACTD,GAACuG,MAAoB,CAAA,GACrBvG,GAACwG,MAAmB,CAAA,IAIjBf,MR5Ga,QQ4GOzF,GAACyG,QACxBzG,GAACyG,MAAczG,GAAEsG,QAGdb,MRhHa,QQgHOK,GAAQY,6BAC3B1G,GAACyG,OAAezG,GAAEsG,UACrBtG,GAACyG,MAAcnJ,EAAO,CAAA,GAAI0C,GAACyG,GAAAA,IAG5BnJ,EACC0C,GAACyG,KACDX,GAAQY,yBAAyBlB,IAAUxF,GAACyG,GAAAA,CAAAA,IAI9CrB,KAAWpF,GAAExC,OACb6H,KAAWrF,GAAEsG,OACbtG,GAAChB,MAAUuB,IAGP4E,GAEFM,CAAAA,MRlIe,QQmIfK,GAAQY,4BRnIO,QQoIf1G,GAAE2G,sBAEF3G,GAAE2G,mBAAAA,GAGClB,MRzIY,QQyIQzF,GAAE4G,qBACzB5G,GAACuG,IAAkBrG,KAAKF,GAAE4G,iBAAAA;SAErB;AAUN,UARCnB,MR9Ie,QQ+IfK,GAAQY,4BACRlB,OAAaJ,MRhJE,QQiJfpF,GAAE6G,6BAEF7G,GAAE6G,0BAA0BrB,IAAUG,EAAAA,GAAAA,CAIpC3F,GAACnB,ORvJY,QQwJdmB,GAAE8G,yBAAAA,UACF9G,GAAE8G,sBACDtB,IACAxF,GAACyG,KACDd,EAAAA,KAEFpF,GAAQvB,OAAcwB,GAAQxB,KAC7B;AAkBD,aAhBIuB,GAAQvB,OAAcwB,GAAQxB,QAKjCgB,GAAExC,QAAQgI,IACVxF,GAAEsG,QAAQtG,GAACyG,KACXzG,GAACC,MAAAA,QAGFM,GAAQ1B,MAAQ2B,GAAQ3B,KACxB0B,GAAQ7B,MAAa8B,GAAQ9B,KAC7B6B,GAAQ7B,IAAW4E,KAAK,SAAA7E,IAAAA;AACnBA,UAAAA,OAAOA,GAAKE,KAAW4B;QAC5B,CAAA,GAESvD,KAAI,GAAGA,KAAIgD,GAACwG,IAAiBpI,QAAQpB,KAC7CgD,CAAAA,GAACuG,IAAkBrG,KAAKF,GAACwG,IAAiBxJ,EAAAA,CAAAA;AAE3CgD,QAAAA,GAACwG,MAAmB,CAAA,GAEhBxG,GAACuG,IAAkBnI,UACtBsC,GAAYR,KAAKF,EAAAA;AAGlB,cAAM+F;MACP;AR3LgB,cQ6LZ/F,GAAE+G,uBACL/G,GAAE+G,oBAAoBvB,IAAUxF,GAACyG,KAAad,EAAAA,GAG3CF,MRjMY,QQiMQzF,GAAEgH,sBACzBhH,GAACuG,IAAkBrG,KAAK,WAAA;AACvBF,QAAAA,GAAEgH,mBAAmB5B,IAAUC,IAAUC,EAAAA;MAC1C,CAAA;IAEF;AASA,QAPAtF,GAAET,UAAUoG,IACZ3F,GAAExC,QAAQgI,IACVxF,GAACe,MAAcM,IACfrB,GAACnB,MAAAA,OAEG+G,KAAavJ,EAAO+D,KACvByF,KAAQ,GACLJ,IAAkB;AAQrB,WAPAzF,GAAEsG,QAAQtG,GAACyG,KACXzG,GAACC,MAAAA,OAEG2F,MAAYA,GAAWrF,EAAAA,GAE3B2E,KAAMlF,GAAEiG,OAAOjG,GAAExC,OAAOwC,GAAEsG,OAAOtG,GAAET,OAAAA,GAE1BvC,KAAI,GAAGA,KAAIgD,GAACwG,IAAiBpI,QAAQpB,KAC7CgD,CAAAA,GAACuG,IAAkBrG,KAAKF,GAACwG,IAAiBxJ,EAAAA,CAAAA;AAE3CgD,MAAAA,GAACwG,MAAmB,CAAA;IACrB,MACC,IAAA;AACCxG,MAAAA,GAACC,MAAAA,OACG2F,MAAYA,GAAWrF,EAAAA,GAE3B2E,KAAMlF,GAAEiG,OAAOjG,GAAExC,OAAOwC,GAAEsG,OAAOtG,GAAET,OAAAA,GAGnCS,GAAEsG,QAAQtG,GAACyG;IAAAA,SACHzG,GAACC,OAAAA,EAAa4F,KAAQ;AAIhC7F,IAAAA,GAAEsG,QAAQtG,GAACyG,KRxOM,QQ0ObzG,GAAEiH,oBACLxF,KAAgBnE,EAAOA,EAAO,CAAA,GAAImE,EAAAA,GAAgBzB,GAAEiH,gBAAAA,CAAAA,IAGjDxB,MAAAA,CAAqBN,MR9OR,QQ8OiBnF,GAAEkH,4BACnC5B,KAAWtF,GAAEkH,wBAAwB9B,IAAUC,EAAAA,IAK5C/D,KAAe4D,IRpPF,QQmPhBA,MAAeA,GAAIpH,SAASuB,KRnPZ,QQmPwB6F,GAAIlH,QAI5CsD,KAAe6F,EAAUjC,GAAI1H,MAAMO,QAAAA,IAGpC0C,KAASW,EACRC,IACAjE,EAAQkE,EAAAA,IAAgBA,KAAe,CAACA,EAAAA,GACxCf,IACAC,IACAiB,IACAC,IACAC,IACAjB,IACAD,IACAmB,IACAjB,EAAAA,GAGDX,GAAEF,OAAOS,GAAQ1B,KAGjB0B,GAAQrB,OAAAA,MAEJc,GAACuG,IAAkBnI,UACtBsC,GAAYR,KAAKF,EAAAA,GAGduF,OACHvF,GAACmG,MAAiBnG,GAACrB,KRlRH;EQ+SlB,SA3BSgG,IAAAA;AAGR,QAFApE,GAAQvB,MRrRS,MQuRb4C,MRvRa,QQuRED,GAClB,KAAIgD,GAAEyC,MAAM;AAKX,WAJA7G,GAAQrB,OAAW0C,KAChByF,MRvSsB,KQ0SlB5G,MAA6B,KAAnBA,GAAO0C,YAAiB1C,GAAO8B,cAC/C9B,CAAAA,KAASA,GAAO8B;AAGjBZ,MAAAA,GAAkBA,GAAkB2F,QAAQ7G,EAAAA,CAAAA,IRjS7B,MQkSfF,GAAQ1B,MAAQ4B;IACjB,OAAO;AACN,WAASzD,KAAI2E,GAAkBvD,QAAQpB,OACtCS,GAAWkE,GAAkB3E,EAAAA,CAAAA;AAE9BuK,QAAYhH,EAAAA;IACb;QAEAA,CAAAA,GAAQ1B,MAAQ2B,GAAQ3B,KACxB0B,GAAQ7B,MAAa8B,GAAQ9B,KACxBiG,GAAEyC,QAAMG,EAAYhH,EAAAA;AAE1BlE,MAAOwC,IAAa8F,IAAGpE,IAAUC,EAAAA;EAClC;MR/SkB,SQiTlBmB,MACApB,GAAQvB,OAAcwB,GAAQxB,OAE9BuB,GAAQ7B,MAAa8B,GAAQ9B,KAC7B6B,GAAQ1B,MAAQ2B,GAAQ3B,OAExB4B,KAASF,GAAQ1B,MAAQ2I,EACxBhH,GAAQ3B,KACR0B,IACAC,IACAiB,IACAC,IACAC,IACAjB,IACAkB,IACAjB,EAAAA;AAMF,UAFKuE,KAAM7I,EAAQoL,WAASvC,GAAI3E,EAAAA,GRjVH,MQmVtBA,GAAQrB,MAAAA,SAAuCuB;AACvD;AAEA,SAAS8G,EAAY9I,IAAAA;AAChBA,EAAAA,MAASA,GAAKK,QAAaL,GAAKK,IAAAD,MAAAA,OAChCJ,MAASA,GAAKC,OAAYD,GAAKC,IAAWgJ,QAAQH,CAAAA;AACvD;AAOgB,SAAApG,EAAWT,IAAaiH,IAAMhH,IAAAA;AAC7C,WAAS3D,KAAI,GAAGA,KAAI2D,GAASvC,QAAQpB,KACpCqF,GAAS1B,GAAS3D,EAAAA,GAAI2D,GAAAA,EAAW3D,EAAAA,GAAI2D,GAAAA,EAAW3D,EAAAA,CAAAA;AAG7CX,IAAOyC,OAAUzC,EAAOyC,IAAS6I,IAAMjH,EAAAA,GAE3CA,GAAY4C,KAAK,SAAAtD,IAAAA;AAChB,QAAA;AAECU,MAAAA,KAAcV,GAACuG,KACfvG,GAACuG,MAAoB,CAAA,GACrB7F,GAAY4C,KAAK,SAAAsE,IAAAA;AAEhBA,QAAAA,GAAGvJ,KAAK2B,EAAAA;MACT,CAAA;IAGD,SAFS2E,IAAAA;AACRtI,QAAOwC,IAAa8F,IAAG3E,GAAChB,GAAAA;IACzB;EACD,CAAA;AACD;AAEA,SAASmI,EAAUzJ,IAAAA;AAClB,SACgB,YAAA,OAARA,MR3WW,QQ4WlBA,MACCA,GAAIkB,OAAWlB,GAAIkB,MAAU,IAEvBlB,KAGJN,EAAQM,EAAAA,IACJA,GAAKmK,IAAIV,CAAAA,IAGV7J,EAAO,CAAE,GAAEI,EAAAA;AACnB;AAiBA,SAAS8J,EACRzD,IACAxD,IACAC,IACAiB,IACAC,IACAC,IACAjB,IACAkB,IACAjB,IAAAA;AATD,MAeK3D,IAEA8K,IAEAC,IAEAC,IACApE,IACAqE,IACAC,IAbA9C,KAAW5E,GAAShD,OACpBgI,KAAWjF,GAAS/C,OACpB2F,KAAkC5C,GAASzC;AAkB/C,MAJgB,SAAZqF,KAAmBzB,KRvaK,+BQwaP,UAAZyB,KAAoBzB,KRtaA,uCQuanBA,OAAWA,KRxaS,iCAGX,QQuafC;AACH,SAAK3E,KAAI,GAAGA,KAAI2E,GAAkBvD,QAAQpB,KAMzC,MALA4G,KAAQjC,GAAkB3E,EAAAA,MAOzB,kBAAkB4G,MAAAA,CAAAA,CAAWT,OAC5BA,KAAWS,GAAMuE,aAAahF,KAA6B,KAAlBS,GAAMT,WAC/C;AACDY,MAAAA,KAAMH,IACNjC,GAAkB3E,EAAAA,IRpbF;AQqbhB;IACD;;AAIF,MR1bmB,QQ0bf+G,IAAa;AAChB,QR3bkB,QQ2bdZ,GACH,QAAOiF,SAASC,eAAe7C,EAAAA;AAGhCzB,IAAAA,KAAMqE,SAASE,gBACd5G,IACAyB,IACAqC,GAAS+C,MAAM/C,EAAAA,GAKZ5D,OACCvF,EAAOmM,OACVnM,EAAOmM,IAAoBjI,IAAUoB,EAAAA,GACtCC,KAAAA,QAGDD,KR7ckB;EQ8cnB;AAEA,MRhdmB,QQgdfwB,GAECiC,CAAAA,OAAaI,MAAc5D,MAAemC,GAAI0E,QAAQjD,OACzDzB,GAAI0E,OAAOjD;OAEN;AASN,QAPA7D,KAAoBA,MAAqBvF,EAAMiC,KAAK0F,GAAI2E,UAAAA,GAExDtD,KAAW5E,GAAShD,SAASP,GAAAA,CAKxB2E,MR9da,QQ8dED,GAEnB,MADAyD,KAAW,CAAA,GACNpI,KAAI,GAAGA,KAAI+G,GAAI4E,WAAWvK,QAAQpB,KAEtCoI,CAAAA,IADAxB,KAAQG,GAAI4E,WAAW3L,EAAAA,GACRgH,IAAAA,IAAQJ,GAAMA;AAI/B,SAAK5G,MAAKoI,GAET,KADAxB,KAAQwB,GAASpI,EAAAA,GACR,cAALA,GAAAA;aACY,6BAALA,GACV+K,CAAAA,KAAUnE;aACA,EAAE5G,MAAKwI,KAAW;AAC5B,UACO,WAALxI,MAAgB,kBAAkBwI,MAC7B,aAALxI,MAAkB,oBAAoBwI,GAEvC;AAED3B,QAAYE,IAAK/G,IRlfD,MQkfU4G,IAAOlC,EAAAA;IAClC;AAKD,SAAK1E,MAAKwI,GACT5B,CAAAA,KAAQ4B,GAASxI,EAAAA,GACR,cAALA,KACHgL,KAAcpE,KACC,6BAAL5G,KACV8K,KAAUlE,KACK,WAAL5G,KACViL,KAAarE,KACE,aAAL5G,KACVkL,KAAUtE,KAERhC,MAA+B,cAAA,OAATgC,MACxBwB,GAASpI,EAAAA,MAAO4G,MAEhBC,EAAYE,IAAK/G,IAAG4G,IAAOwB,GAASpI,EAAAA,GAAI0E,EAAAA;AAK1C,QAAIoG,GAGDlG,CAAAA,MACCmG,OACAD,GAAOc,UAAWb,GAAOa,UAAWd,GAAOc,UAAW7E,GAAI8E,eAE5D9E,GAAI8E,YAAYf,GAAOc,SAGxBrI,GAAQ7B,MAAa,CAAA;aAEjBqJ,OAAShE,GAAI8E,YAAY,KAE7BzH,EAEkB,cAAjBb,GAASzC,OAAqBiG,GAAI+E,UAAU/E,IAC5C3G,EAAQ4K,EAAAA,IAAeA,KAAc,CAACA,EAAAA,GACtCzH,IACAC,IACAiB,IACY,mBAAZ0B,KRniB2B,iCQmiBqBzB,IAChDC,IACAjB,IACAiB,KACGA,GAAkB,CAAA,IAClBnB,GAAQ9B,OAAce,EAAce,IAAU,CAAA,GACjDoB,IACAjB,EAAAA,GRviBgB,QQ2iBbgB,GACH,MAAK3E,KAAI2E,GAAkBvD,QAAQpB,OAClCS,GAAWkE,GAAkB3E,EAAAA,CAAAA;AAM3B4E,IAAAA,OACJ5E,KAAI,SACY,cAAZmG,MRrjBa,QQqjBa8E,KAC7BlE,GAAIa,gBAAgB,OAAA,IRrjBC9B,QQujBrBmF,OAKCA,OAAelE,GAAI/G,EAAAA,KACN,cAAZmG,MAAAA,CAA2B8E,MAIf,YAAZ9E,MAAwB8E,MAAc7C,GAASpI,EAAAA,MAEjD6G,EAAYE,IAAK/G,IAAGiL,IAAY7C,GAASpI,EAAAA,GAAI0E,EAAAA,GAG9C1E,KAAI,WRtkBkB8F,QQukBlBoF,MAAwBA,MAAWnE,GAAI/G,EAAAA,KAC1C6G,EAAYE,IAAK/G,IAAGkL,IAAS9C,GAASpI,EAAAA,GAAI0E,EAAAA;EAG7C;AAEA,SAAOqC;AACR;AAAA,SAQgB1B,EAASpE,IAAK2F,IAAOnF,IAAAA;AACpC,MAAA;AACC,QAAkB,cAAA,OAAPR,IAAmB;AAC7B,UAAI8K,KAAuC,cAAA,OAAhB9K,GAAGiB;AAC1B6J,MAAAA,MAEH9K,GAAGiB,IAAAA,GAGC6J,MRhmBY,QQgmBKnF,OAIrB3F,GAAGiB,MAAYjB,GAAI2F,EAAAA;IAErB,MAAO3F,CAAAA,GAAImB,UAAUwE;EAGtB,SAFSe,IAAAA;AACRtI,MAAOwC,IAAa8F,IAAGlG,EAAAA;EACxB;AACD;AAAA,SASgBuE,EAAQvE,IAAOwE,IAAa+F,IAAAA;AAAAA,MACvCC,IAsBMjM;AAbV,MARIX,EAAQ2G,WAAS3G,EAAQ2G,QAAQvE,EAAAA,IAEhCwK,KAAIxK,GAAMR,SACTgL,GAAE7J,WAAW6J,GAAE7J,WAAWX,GAAKI,OACnCwD,EAAS4G,IRznBQ,MQynBChG,EAAAA,IRznBD,SQ6nBdgG,KAAIxK,GAAKK,MAAsB;AACnC,QAAImK,GAAEC,qBACL,KAAA;AACCD,MAAAA,GAAEC,qBAAAA;IAGH,SAFSvE,IAAAA;AACRtI,QAAOwC,IAAa8F,IAAG1B,EAAAA;IACxB;AAGDgG,IAAAA,GAAEnJ,OAAOmJ,GAAClI,MRtoBQ;EQuoBnB;AAEA,MAAKkI,KAAIxK,GAAKC,IACb,MAAS1B,KAAI,GAAGA,KAAIiM,GAAE7K,QAAQpB,KACzBiM,CAAAA,GAAEjM,EAAAA,KACLgG,EACCiG,GAAEjM,EAAAA,GACFiG,IACA+F,MAAmC,cAAA,OAAdvK,GAAMX,IAAAA;AAM1BkL,EAAAA,MACJvL,EAAWgB,GAAKI,GAAAA,GAGjBJ,GAAKK,MAAcL,GAAKE,KAAWF,GAAKI,MAAAA;AACzC;AAGA,SAASuH,EAAS5I,IAAO8I,IAAO/G,IAAAA;AAC/B,SAAA,KAAYR,YAAYvB,IAAO+B,EAAAA;AAChC;AClqBO,SAAS0G,EAAOxH,IAAO4C,IAAW8H,IAAAA;AAAlC,MAWFvH,IAOApB,IAQAE,IACHC;AAzBGU,EAAAA,MAAa+G,aAChB/G,KAAY+G,SAASgB,kBAGlB/M,EAAOsC,MAAQtC,EAAOsC,GAAOF,IAAO4C,EAAAA,GAYpCb,MAPAoB,KAAoC,cAAA,OAAfuH,MTRN,OSiBfA,MAAeA,GAAWzK,OAAe2C,GAAS3C,KAMlDgC,KAAc,CAAA,GACjBC,KAAW,CAAA,GACZK,EACCK,IAPD5C,MAAAA,CAAWmD,MAAeuH,MAAgB9H,IAAS3C,MAClDb,EAAcwB,GTpBI,MSoBY,CAACZ,EAAAA,CAAAA,GAU/B+B,MAAYvD,GACZA,GACAoE,GAAUH,cAAAA,CACTU,MAAeuH,KACb,CAACA,EAAAA,IACD3I,KTnCe,OSqCda,GAAUgI,aACTjN,EAAMiC,KAAKgD,GAAUqH,UAAAA,ITtCR,MSwClBhI,IAAAA,CACCkB,MAAeuH,KACbA,KACA3I,KACCA,GAAQ3B,MACRwC,GAAUgI,YACdzH,IACAjB,EAAAA,GAIDQ,EAAWT,IAAajC,IAAOkC,EAAAA;AAChC;AASA,SChEgB2I,EAAaC,IAAOC,IAAOC,IAAAA;AAAAA,MAEzCC,IACAC,IACAC,IAEGC,IALAC,KAAkBC,EAAO,CAAE,GAAER,GAAMC,KAAAA;AAWvC,OAAKI,MAJDL,GAAMS,QAAQT,GAAMS,KAAKH,iBAC5BA,KAAeN,GAAMS,KAAKH,eAGjBL,GACA,UAALI,KAAYF,KAAMF,GAAMI,EAAAA,IACd,SAALA,KAAYD,KAAMH,GAAMI,EAAAA,IAEhCE,GAAgBF,EAAAA,IAAAA,WADRJ,GAAMI,EAAAA,KVXQK,QUWYJ,KACbA,GAAaD,EAAAA,IAEbJ,GAAMI,EAAAA;AAS7B,SALIM,UAAUC,SAAS,MACtBL,GAAgBL,WACfS,UAAUC,SAAS,IAAIC,EAAMC,KAAKH,WAAW,CAAA,IAAKT,KAG7Ca,EACNf,GAAMS,MACNF,IACAJ,MAAOH,GAAMG,KACbC,MAAOJ,GAAMI,KV5BK,IAAA;AU+BpB;ATpBaY,IAAQC,EAAUD,OChBzBE,IAAU,EACfC,KSDM,SAAqBC,IAAOC,IAAOC,IAAUC,IAAAA;AAQnD,WANIC,IAEHC,IAEAC,IAEOL,KAAQA,GAAKM,KACpB,MAAKH,KAAYH,GAAKO,QAAAA,CAAiBJ,GAASG,GAC/C,KAAA;AAcC,SAbAF,KAAOD,GAAUK,gBXND,QWQJJ,GAAKK,6BAChBN,GAAUO,SAASN,GAAKK,yBAAyBV,EAAAA,CAAAA,GACjDM,KAAUF,GAASQ,MXVJ,QWaZR,GAAUS,sBACbT,GAAUS,kBAAkBb,IAAOG,MAAa,CAAE,CAAA,GAClDG,KAAUF,GAASQ,MAIhBN,GACH,QAAQF,GAASU,MAAiBV;EAIpC,SAFSW,IAAAA;AACRf,IAAAA,KAAQe;EACT;AAIF,QAAMf;AACP,EAAA,GRzCIgB,IAAU,GA2FDC,IAAiB,SAAAhB,IAAAA;AAAK,SH/Ef,QGgFnBA,MH/EwBiB,QG+EPjB,GAAMQ;AAAwB,GCrEhDU,EAAcC,UAAUT,WAAW,SAAUU,IAAQC,IAAAA;AAEpD,MAAIC;AAEHA,EAAAA,KJfkB,QIcfC,KAAIC,OAAuBD,KAAIC,OAAeD,KAAKE,QAClDF,KAAIC,MAEJD,KAAIC,MAAcE,EAAO,CAAA,GAAIH,KAAKE,KAAAA,GAGlB,cAAA,OAAVL,OAGVA,KAASA,GAAOM,EAAO,CAAA,GAAIJ,EAAAA,GAAIC,KAAKI,KAAAA,IAGjCP,MACHM,EAAOJ,IAAGF,EAAAA,GJ3BQ,QI+BfA,MAEAG,KAAIK,QACHP,MACHE,KAAIM,IAAiBC,KAAKT,EAAAA,GAE3BU,EAAcR,IAAAA;AAEhB,GAQAL,EAAcC,UAAUa,cAAc,SAAUX,IAAAA;AAC3CE,OAAIK,QAIPL,KAAIzB,MAAAA,MACAuB,MAAUE,KAAIU,IAAkBH,KAAKT,EAAAA,GACzCU,EAAcR,IAAAA;AAEhB,GAYAL,EAAcC,UAAUe,SAASC,GA+F7BC,IAAgB,CAAA,GAadC,IACa,cAAA,OAAXC,UACJA,QAAQnB,UAAUoB,KAAKC,KAAKF,QAAQG,QAAAA,CAAAA,IACpCC,YAuBEC,IAAY,SAACC,IAAGC,IAAAA;AAAM,SAAAD,GAAChB,IAAAkB,MAAiBD,GAACjB,IAAAkB;AAAc,GA8B7DC,EAAOC,MAAkB,GCzOnBC,IAAgB,+BAalBC,IAAa,GA+IXC,IAAaC,EAAAA,KAAiB,GAC9BC,IAAoBD,EAAAA,IAAiB,GCzKhCE,IAAI;;;AOiBF,IChBTC,KAAU;AAwBd,SAASC,GAAYC,IAAMC,IAAOC,IAAKC,IAAkBC,IAAUC,IAAAA;AAC7DJ,EAAAA,OAAOA,KAAQ,CAAA;AAIpB,MACCK,IACAC,IAFGC,KAAkBP;AAItB,MAAI,SAASO,GAEZ,MAAKD,MADLC,KAAkB,CAAA,GACRP,GACA,UAALM,KACHD,KAAML,GAAMM,EAAAA,IAEZC,GAAgBD,EAAAA,IAAKN,GAAMM,EAAAA;AAM9B,MAAME,KAAQ,EACbT,MAAAA,IACAC,OAAOO,IACPN,KAAAA,IACAI,KAAAA,IACAI,KAAW,MACXC,IAAS,MACTC,KAAQ,GACRC,KAAM,MACNC,KAAY,MACZC,aAAAA,QACAC,KAAAA,EAAaC,IACbC,KAAAA,IACAC,KAAQ,GACRf,UAAAA,IACAC,QAAAA,GAAAA;AAKD,MAAoB,cAAA,OAATL,OAAwBM,KAAMN,GAAKoB,cAC7C,MAAKb,MAAKD,GAAAA,YACLE,GAAgBD,EAAAA,MACnBC,GAAgBD,EAAAA,IAAKD,GAAIC,EAAAA;AAK5B,SADIc,EAAQZ,SAAOY,EAAQZ,MAAMA,EAAAA,GAC1BA;AACR;;;AC3EA,IAAIa;AAAJ,IAGIC;AAHJ,IAMIC;AANJ,IA4BIC;AA5BJ,IASIC,KAAc;AATlB,IAYIC,KAAoB,CAAA;AAZxB,IAeMC,KAAuDC;AAf7D,IAiBIC,KAAgBF,GAAOG;AAjB3B,IAkBIC,KAAkBJ,GAAOK;AAlB7B,IAmBIC,KAAeN,GAAQO;AAnB3B,IAoBIC,KAAYR,GAAOS;AApBvB,IAqBIC,KAAmBV,GAAQW;AArB/B,IAsBIC,KAAUZ,GAAOa;AAiHrB,SAASC,GAAaC,IAAOC,IAAAA;AACxBhB,EAAAA,GAAOiB,OACVjB,GAAOiB,IAAOtB,IAAkBoB,IAAOjB,MAAekB,EAAAA,GAEvDlB,KAAc;AAOd,MAAMoB,KACLvB,GAAgBwB,QACfxB,GAAgBwB,MAAW,EAC3BN,IAAO,CAAA,GACPI,KAAiB,CAAA,EAAA;AAOnB,SAJIF,MAASG,GAAKL,GAAOO,UACxBF,GAAKL,GAAOQ,KAAK,CAAE,CAAA,GAGbH,GAAKL,GAAOE,EAAAA;AACpB;AAOO,SAASO,GAASC,IAAAA;AAExB,SADAzB,KAAc,GACP0B,GAAWC,IAAgBF,EAAAA;AACnC;AAUgB,SAAAC,GAAWE,IAASH,IAAcI,IAAAA;AAEjD,MAAMC,KAAYd,GAAapB,MAAgB,CAAA;AAE/C,MADAkC,GAAUC,IAAWH,IAAAA,CAChBE,GAASnB,QACbmB,GAASf,KAAU,CACjBc,KAAiDA,GAAKJ,EAAAA,IAA/CE,GAAAA,QAA0BF,EAAAA,GAElC,SAAAO,IAAAA;AACC,QAAMC,KAAeH,GAASI,MAC3BJ,GAASI,IAAY,CAAA,IACrBJ,GAASf,GAAQ,CAAA,GACdoB,KAAYL,GAAUC,EAASE,IAAcD,EAAAA;AAE/CC,IAAAA,OAAiBE,OACpBL,GAASI,MAAc,CAACC,IAAWL,GAASf,GAAQ,CAAA,CAAA,GACpDe,GAASnB,IAAYyB,SAAS,CAAE,CAAA;EAElC,CAAA,GAGDN,GAASnB,MAAcd,IAAAA,CAElBA,GAAgBwC,MAAmB;AAAA,QAgC9BC,KAAT,SAAyBC,IAAGC,IAAGC,IAAAA;AAC9B,UAAA,CAAKX,GAASnB,IAAAU,IAAqB,QAAA;AAGnC,UACMqB,KACLZ,GAASnB,IAAAU,IAAAN,GAA0B4B,OAFhB,SAAAC,IAAAA;AAAC,eAAA,CAAA,CAAMA,GAACjC;MAAW,CAAA;AAOvC,UAHsB+B,GAAWG,MAAM,SAAAD,IAAAA;AAAC,eAAA,CAAKA,GAACV;MAAW,CAAA,EAIxD,QAAA,CAAOY,MAAUA,GAAQC,KAAKC,MAAMT,IAAGC,IAAGC,EAAAA;AAM3C,UAAIQ,KAAenB,GAASnB,IAAYuC,UAAUX;AAUlD,aATAG,GAAWS,QAAQ,SAAAC,IAAAA;AAClB,YAAIA,GAAQlB,KAAa;AACxB,cAAMD,KAAemB,GAAQrC,GAAQ,CAAA;AACrCqC,UAAAA,GAAQrC,KAAUqC,GAAQlB,KAC1BkB,GAAQlB,MAAAA,QACJD,OAAiBmB,GAAQrC,GAAQ,CAAA,MAAIkC,KAAAA;QAC1C;MACD,CAAA,GAEOH,MACJA,GAAQC,KAAKC,MAAMT,IAAGC,IAAGC,EAAAA,KACzBQ;IACJ;AA9DApD,IAAAA,GAAgBwC,MAAAA;AAChB,QAAIS,KAAUjD,GAAiBwD,uBACzBC,KAAUzD,GAAiB0D;AAKjC1D,IAAAA,GAAiB0D,sBAAsB,SAAUhB,IAAGC,IAAGC,IAAAA;AACtD,UAAIO,KAAIQ,KAAS;AAChB,YAAIC,KAAMX;AAEVA,QAAAA,KAAAA,QACAR,GAAgBC,IAAGC,IAAGC,EAAAA,GACtBK,KAAUW;MACX;AAEIH,MAAAA,MAASA,GAAQP,KAAKC,MAAMT,IAAGC,IAAGC,EAAAA;IACvC,GA+CA5C,GAAiBwD,wBAAwBf;EAC1C;AAGD,SAAOR,GAASI,OAAeJ,GAASf;AACzC;AAOO,SAAS2C,GAAUC,IAAUC,IAAAA;AAEnC,MAAMC,KAAQ7C,GAAapB,MAAgB,CAAA;AAAA,GACtCM,GAAO4D,OAAiBC,GAAYF,GAAKxC,KAAQuC,EAAAA,MACrDC,GAAK9C,KAAU4C,IACfE,GAAMG,IAAeJ,IAErB/D,GAAgBwB,IAAAF,IAAyBI,KAAKsC,EAAAA;AAEhD;AAmBO,SAASI,GAAOC,IAAAA;AAEtB,SADAC,KAAc,GACPC,GAAQ,WAAA;AAAO,WAAA,EAAEC,SAASH,GAAAA;EAAc,GAAG,CAAA,CAAA;AACnD;AAiCgB,SAAAI,GAAQC,IAASC,IAAAA;AAEhC,MAAMC,KAAQC,GAAaC,MAAgB,CAAA;AAO3C,SANIC,GAAYH,GAAKI,KAAQL,EAAAA,MAC5BC,GAAKK,KAAUP,GAAAA,GACfE,GAAKI,MAASL,IACdC,GAAKM,MAAYR,KAGXE,GAAKK;AACb;AAOO,SAASE,GAAYC,IAAUT,IAAAA;AAErC,SADAU,KAAc,GACPZ,GAAQ,WAAA;AAAA,WAAMW;EAAQ,GAAET,EAAAA;AAChC;AAkFA,SAASW,KAAAA;AAER,WADIC,IACIA,KAAYC,GAAkBC,MAAAA,IACrC,KAAKF,GAASG,OAAgBH,GAASI,IACvC,KAAA;AACCJ,IAAAA,GAASI,IAAAC,IAAyBC,QAAQC,EAAAA,GAC1CP,GAASI,IAAAC,IAAyBC,QAAQE,EAAAA,GAC1CR,GAASI,IAAAC,MAA2B,CAAA;EAIrC,SAHSI,IAAAA;AACRT,IAAAA,GAASI,IAAAC,MAA2B,CAAA,GACpCK,GAAOC,IAAaF,IAAGT,GAASY,GAAAA;EACjC;AAEF;AA1aAF,GAAOG,MAAS,SAAAC,IAAAA;AACfC,EAAAA,KAAmB,MACfC,MAAeA,GAAcF,EAAAA;AAClC,GAEAJ,GAAOO,KAAS,SAACH,IAAOI,IAAAA;AACnBJ,EAAAA,MAASI,GAASC,OAAcD,GAASC,IAAAC,QAC5CN,GAAKM,MAASF,GAASC,IAAAC,MAGpBC,MAASA,GAAQP,IAAOI,EAAAA;AAC7B,GAGAR,GAAOY,MAAW,SAAAR,IAAAA;AACbS,EAAAA,MAAiBA,GAAgBT,EAAAA,GAGrCU,KAAe;AAEf,MAAMC,MAHNV,KAAmBD,GAAKY,KAGMtB;AAC1BqB,EAAAA,OACCE,OAAsBZ,MACzBU,GAAKpB,MAAmB,CAAA,GACxBU,GAAgBV,MAAoB,CAAA,GACpCoB,GAAKR,GAAOX,QAAQ,SAAAsB,IAAAA;AACfA,IAAAA,GAAQC,QACXD,GAAQX,KAAUW,GAAQC,MAE3BD,GAASE,IAAeF,GAAQC,MAAAA;EACjC,CAAA,MAEAJ,GAAKpB,IAAiBC,QAAQC,EAAAA,GAC9BkB,GAAKpB,IAAiBC,QAAQE,EAAAA,GAC9BiB,GAAKpB,MAAmB,CAAA,GACxBmB,KAAe,KAGjBG,KAAoBZ;AACrB,GAGAL,GAAQqB,SAAS,SAAAjB,IAAAA;AACZkB,EAAAA,MAAcA,GAAalB,EAAAA;AAE/B,MAAMmB,KAAInB,GAAKY;AACXO,EAAAA,MAAKA,GAAC7B,QACL6B,GAAC7B,IAAAC,IAAyB6B,WAgaR,MAha2BjC,GAAkBkC,KAAKF,EAAAA,KAga7CG,OAAY1B,GAAQ2B,2BAC/CD,KAAU1B,GAAQ2B,0BACNC,IAAgBvC,EAAAA,IAja5BkC,GAAC7B,IAAAa,GAAeX,QAAQ,SAAAsB,IAAAA;AACnBA,IAAAA,GAASE,MACZF,GAAQxB,MAASwB,GAASE,IAE3BF,GAASE,IAAAA;EACV,CAAA,IAEDH,KAAoBZ,KAAmB;AACxC,GAIAL,GAAOgB,MAAW,SAACZ,IAAOyB,IAAAA;AACzBA,EAAAA,GAAYC,KAAK,SAAAxC,IAAAA;AAChB,QAAA;AACCA,MAAAA,GAASK,IAAkBC,QAAQC,EAAAA,GACnCP,GAASK,MAAoBL,GAASK,IAAkBoC,OAAO,SAAAC,IAAAA;AAAE,eAAA,CAChEA,GAAEzB,MAAUT,GAAakC,EAAAA;MAAU,CAAA;IAQrC,SANSjC,IAAAA;AACR8B,MAAAA,GAAYC,KAAK,SAAAP,IAAAA;AACZA,QAAAA,GAAC5B,QAAmB4B,GAAC5B,MAAoB,CAAA;MAC9C,CAAA,GACAkC,KAAc,CAAA,GACd7B,GAAOC,IAAaF,IAAGT,GAASY,GAAAA;IACjC;EACD,CAAA,GAEI+B,MAAWA,GAAU7B,IAAOyB,EAAAA;AACjC,GAGA7B,GAAQkC,UAAU,SAAA9B,IAAAA;AACb+B,EAAAA,MAAkBA,GAAiB/B,EAAAA;AAEvC,MAEKgC,IAFCb,KAAInB,GAAKY;AACXO,EAAAA,MAAKA,GAAC7B,QAET6B,GAAC7B,IAAAa,GAAeX,QAAQ,SAAAyC,IAAAA;AACvB,QAAA;AACCxC,MAAAA,GAAcwC,EAAAA;IAGf,SAFStC,IAAAA;AACRqC,MAAAA,KAAarC;IACd;EACD,CAAA,GACAwB,GAAC7B,MAAAA,QACG0C,MAAYpC,GAAOC,IAAamC,IAAYb,GAACrB,GAAAA;AAEnD;AA4UA,IAAIoC,KAA0C,cAAA,OAAzBX;AAYrB,SAASC,GAAeW,IAAAA;AACvB,MAOIC,IAPEC,KAAO,WAAA;AACZC,iBAAaC,EAAAA,GACTL,MAASM,qBAAqBJ,EAAAA,GAClCK,WAAWN,EAAAA;EACZ,GACMI,KAAUE,WAAWJ,IAlcR,EAAA;AAqcfH,EAAAA,OACHE,KAAMb,sBAAsBc,EAAAA;AAE9B;AAqBA,SAAS5C,GAAciD,IAAAA;AAGtB,MAAMC,KAAO1C,IACT2C,KAAUF,GAAI9B;AACI,gBAAA,OAAXgC,OACVF,GAAI9B,MAAAA,QACJgC,GAAAA,IAGD3C,KAAmB0C;AACpB;AAOA,SAASjD,GAAagD,IAAAA;AAGrB,MAAMC,KAAO1C;AACbyC,EAAAA,GAAI9B,MAAY8B,GAAIvC,GAAAA,GACpBF,KAAmB0C;AACpB;AAOA,SAASE,GAAYC,IAASC,IAAAA;AAC7B,SAAA,CACED,MACDA,GAAQ1B,WAAW2B,GAAQ3B,UAC3B2B,GAAQrB,KAAK,SAACsB,IAAKC,IAAAA;AAAU,WAAAD,OAAQF,GAAQG,EAAAA;EAAM,CAAA;AAErD;AAQA,SAASC,GAAeF,IAAKG,IAAAA;AAC5B,SAAmB,cAAA,OAALA,KAAkBA,GAAEH,EAAAA,IAAOG;AAC1C;;;ACxiBA,IAAM,cAAc;AAAA,EAChB,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAKV,OAAO;AAAA,EACP,WAAW;AACf;AACA,IAAM,gBAAgB;AAAA,EAClB,UAAU;AAAA,EACV,KAAK;AAAA,EACL,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMN,OAAO;AAAA,EACP,UAAU;AACd;AACe,SAAR,YAA6B,EAAE,MAAM,WAAW,WAAW,gBAAgB,IAAI,UAAU,GAAG,GAAG,MAAM,GAAG;AAC3G,QAAM,cAAcC,GAAO,IAAI;AAC/B,QAAM,CAAC,QAAQ,SAAS,IAAIC,GAAS,CAAC;AACtC,QAAM,CAAC,QAAQ,SAAS,IAAIA,GAAS,CAAC;AACtC,EAAAC,GAAU,MAAM;AACZ,aAAS,SAAS;AACd,UAAI,YAAY,WAAW,QACvB,WAAW,YAAY,QAAQ,cAAc;AAC7C,kBAAU,YAAY,QAAQ,YAAY;AAAA,MAC9C;AAAA,IACJ;AACA,WAAO;AACP,WAAO,iBAAiB,UAAU,MAAM;AACxC,WAAO,MAAM;AACT,aAAO,oBAAoB,UAAU,MAAM;AAAA,IAC/C;AAAA,EACJ,GAAG,CAAC,MAAM,CAAC;AACX,QAAM,eAAeC,GAAY,MAAM;AACnC,QAAI,YAAY;AACZ,gBAAU,YAAY,QAAQ,SAAS;AAAA,EAC/C,GAAG,CAAC,CAAC;AAEL,MAAI,QAAQ,KAAK,MAAM,SAAS,SAAS;AAEzC,MAAI,kBAAkB,KAAK,MAAM,SAAS,SAAS;AAGnD,MAAI,eAAe;AACf,YAAQ,KAAK,IAAI,GAAG,QAAS,QAAQ,aAAc;AACnD,uBAAmB;AAAA,EACvB;AACA,QAAM,MAAM,QAAQ,kBAAkB;AAEtC,QAAM,YAAY,KAAK,MAAM,OAAO,GAAG;AACvC,QAAM,aAAa,EAAE,GAAG,aAAa,QAAQ,KAAK,SAAS,UAAU;AACrE,QAAM,eAAe,EAAE,GAAG,eAAe,KAAK,QAAQ,UAAU;AAGhE,SAAQC,GAAK,OAAO,EAAE,UAAU,cAAc,KAAK,aAAa,GAAG,OAAO,UAAUA,GAAK,OAAO,EAAE,MAAM,gBAAgB,OAAO,YAAY,UAAUA,GAAK,OAAO,EAAE,MAAM,gBAAgB,OAAO,cAAc,UAAU,UAAU,IAAI,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AAC5P;;;ACrDA,IAAqB,aAArB,MAAgC;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,MAAM,MAAM;AACpB,SAAK,OAAO;AACZ,SAAK,OAAO,QAAQ,CAAC;AAAA,EACzB;AAAA,EACA,iBAAiB;AACb,UAAM,EAAE,QAAQ,IAAI,KAAK,KAAK,SAAS;AACvC,WAAQ,UAAU,KAAK,EAAE,KAAK,CAAC;AAAA,EACnC;AAAA,EACA,eAAe,QAAQ;AACnB,UAAM,EAAE,QAAQ,IAAI,KAAK,KAAK,SAAS;AACvC,SAAK,KAAK,SAAS;AAAA,MACf,SAAS;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,EAAE,GAAG;AAAA,UACP,GAAG,QAAQ,KAAK,EAAE;AAAA,UAClB,GAAG;AAAA,QACP;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,WAAW,SAAS;AAChB,SAAK,OAAO,EAAE,GAAG,KAAK,MAAM,GAAG,QAAQ;AACvC,SAAK,eAAe,MAAS;AAC7B,SAAK,SAAS;AAAA,EAClB;AAAA,EACA,WAAW;AACP,UAAM,aAAa,IAAI,WAAW;AAAA,MAC9B,KAAK;AAAA,MACL,KAAK,KAAK;AAAA,MACV,KAAK,KAAK;AAAA,IACd,CAAC;AACD,SAAK,OAAO,WAAW,UAAU,KAAK,UAAU;AAChD,SAAK,YAAY,WAAW,eAAe,KAAK,UAAU;AAC1D,SAAK,eAAe,MAAS;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,UAAU,QAAQ;AACd,UAAM,IAAI,MAAM,2EAA2E;AAAA,EAC/F;AAAA,EACA,UAAU;AAAA,EAAE;AAAA,EACZ,YAAY;AAAA,EAAE;AAAA,EACd,OAAO,OAAO;AAAA,EAAE;AAAA;AAAA,EAEhB,cAAc;AAAA,EAAE;AACpB;;;AC/DA,IAAqB,eAArB,MAAkC;AAAA,EAC9B;AAAA,EACA,UAAU,CAAC;AAAA,EACX,YAAY,MAAM;AACd,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,GAAG,OAAO,IAAI;AACV,SAAK,QAAQ,KAAK,CAAC,OAAO,EAAE,CAAC;AAC7B,WAAO,KAAK,MAAM,GAAG,OAAO,EAAE;AAAA,EAClC;AAAA,EACA,SAAS;AACL,eAAW,CAAC,OAAO,EAAE,KAAK,KAAK,QAAQ,OAAO,CAAC,GAAG;AAC9C,WAAK,MAAM,IAAI,OAAO,EAAE;AAAA,IAC5B;AAAA,EACJ;AAAA,EACA,YAAY,QAAQ,IAAI;AACpB,SAAK,GAAG,gBAAgB,CAAC,MAAM,aAAa;AACxC,UAAI,WAAW,MAAM,IAAI;AACrB,WAAG,QAAQ;AAAA,MACf;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,aAAa,QAAQ,IAAI;AACrB,SAAK,GAAG,gBAAgB,CAAC,SAAS;AAC9B,UAAI,WAAW,KAAK;AAChB,WAAG,KAAK,EAAE;AAAA,IAClB,CAAC;AAAA,EACL;AAAA,EACA,QAAQ,QAAQ,IAAI;AAChB,SAAK,GAAG,gBAAgB,CAAC,MAAM,aAAa;AACxC,UAAI,WAAW,MAAM,IAAI;AAErB,WAAG,QAAQ;AAAA,MACf;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,QAAQ,QAAQ,IAAI;AAChB,SAAK,GAAG,gBAAgB,CAAC,SAAS;AAC9B,UAAI,WAAW,MAAM,IAAI;AACrB,WAAG;AAAA,MACP;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,WAAW,QAAQ,IAAI;AACnB,SAAK,GAAG,aAAa,MAAM;AACvB,UAAI,CAAC,KAAK,MAAM,QAAQ,MAAM;AAC1B;AACJ,SAAG;AAAA,IACP,CAAC;AAAA,EACL;AAAA,EACA,WAAW,QAAQ,IAAI;AACnB,SAAK,GAAG,aAAa,MAAM;AACvB,UAAI,CAAC,KAAK,MAAM,QAAQ,MAAM;AAC1B;AACJ,SAAG;AAAA,IACP,CAAC;AAAA,EACL;AAAA,EACA,YAAY,QAAQ,cAAc;AAC9B,SAAK,GAAG,cAAc,IAAI,SAAS;AAC/B,UAAI,CAAC,KAAK,MAAM,QAAQ,MAAM;AAC1B;AACJ,mBAAa,GAAG,IAAI;AAAA,IACxB,CAAC;AAAA,EACL;AAAA,EACA,YAAY,QAAQ,IAAI;AACpB,SAAK,GAAG,cAAc,MAAM;AACxB,UAAI,CAAC,KAAK,MAAM,QAAQ,MAAM;AAC1B;AACJ,SAAG;AAAA,IACP,CAAC;AAAA,EACL;AACJ;;;ACxEA,IAAM,mBAAmB;AAAA,EACrB,OAAO,MAAM;AAAA,EAAE;AAAA,EACf,MAAM,MAAM;AAAA,EAAE;AAAA,EACd,OAAO,IAAI,SAAS,QAAQ,MAAM,WAAW,aAAa,CAAC,KAAK,GAAG,IAAI;AAC3E;AAGA,IAAM,cAAc;AAAA,EAChB,OAAO,IAAI,SAAS,QAAQ,MAAM,WAAW,aAAa,CAAC,KAAK,GAAG,IAAI;AAAA,EACvE,MAAM,IAAI,SAAS,QAAQ,KAAK,WAAW,aAAa,CAAC,KAAK,GAAG,IAAI;AAAA,EACrE,OAAO,IAAI,SAAS,QAAQ,MAAM,WAAW,aAAa,CAAC,KAAK,GAAG,IAAI;AAC3E;;;ACdA,4BAA0B;AAE1B,wBAAkB;AAClB,IAAM,iBAAiB;AAAA,EACnB,aAAa;AAAA,EACb,aAAa;AAAA,EACb,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,oBAAoB,CAAC;AACzB;AACA,IAAM,mBAAN,cAA+B,MAAM;AAAA,EACjC;AAAA,EACA;AAAA,EACA,YAAY,SAAS,MAAM;AACvB,UAAM,OAAO;AACb,SAAK,eAAe,MAAM,gBAAgB;AAC1C,QAAI,MAAM,MAAM;AACZ,WAAK,OAAO,KAAK;AAAA,IACrB;AAAA,EACJ;AAAA,EACA,gBAAgB;AACpB;AACA,IAAM,aAAN,MAAiB;AAAA,EACb;AAAA,EACA;AAAA,EACA,YAAY,SAAS,SAAS;AAC1B,SAAK,UAAU;AACf,SAAK,UAAU,MAAM;AACjB,YAAM,OAAO,QAAQ;AACrB,UAAI,KAAK,cAAc,oBAAoB,QACvC,CAAC,MAAM,QAAQ,KAAK,aAAa,gBAAgB,GAAG;AACpD,cAAM,IAAI,UAAU,kDAAkD;AAAA,MAC1E;AACA,aAAO;AAAA,IACX;AAAA,EACJ;AAAA;AAAA,EAEA,8BAA8B,eAAe,aAAa;AACtD,UAAM,EAAE,kBAAkB,iBAAiB,IAAI,KAAK,QAAQ,EAAE;AAC9D,QAAI,kBAAkB;AAClB,YAAM,gBAAgB,cAAc,OAAO,CAACC,OAAM,CAACA,GAAE,OAAO;AAC5D,UAAI,cAAc,SAAS,YAAY,SAAS,kBAAkB;AAC9D,cAAM,IAAI,iBAAiB,GAAG,KAAK,QAAQ,EAAE,qBAAqB;AAAA,UAC9D,aAAa;AAAA,QACjB,CAAC,CAAC,EAAE;AAAA,MACR;AAAA,IACJ;AACA,QAAI,kBAAkB;AAClB,YAAM,iBAAiB,CAAC,GAAG,eAAe,GAAG,WAAW,EAAE,OAAO,CAAC,OAAOA,OAAM,SAASA,GAAE,QAAQ,IAAI,CAAC;AACvG,UAAI,iBAAiB,kBAAkB;AACnC,cAAM,IAAI,iBAAiB,KAAK,QAAQ,EAAE,wBAAwB;AAAA,UAC9D,iBAAa,sBAAAC,SAAc,gBAAgB;AAAA,UAC3C,UAAM,sBAAAA,SAAc,cAAc;AAAA,QACtC,CAAC,CAAC;AAAA,MACN;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,mBAAmB,MAAM;AACrB,UAAM,EAAE,aAAa,aAAa,iBAAiB,IAAI,KAAK,QAAQ,EAAE;AACtE,QAAI,kBAAkB;AAClB,YAAM,oBAAoB,iBAAiB,KAAK,CAAC,SAAS;AAEtD,YAAI,KAAK,SAAS,GAAG,GAAG;AACpB,cAAI,CAAC,KAAK;AACN,mBAAO;AACX,qBAAO,kBAAAC,SAAM,KAAK,KAAK,QAAQ,SAAS,EAAE,GAAG,IAAI;AAAA,QACrD;AAEA,YAAI,KAAK,CAAC,MAAM,OAAO,KAAK,WAAW;AACnC,iBAAO,KAAK,UAAU,YAAY,MAAM,KAAK,MAAM,CAAC,EAAE,YAAY;AAAA,QACtE;AACA,eAAO;AAAA,MACX,CAAC;AACD,UAAI,CAAC,mBAAmB;AACpB,cAAM,yBAAyB,iBAAiB,KAAK,IAAI;AACzD,cAAM,IAAI,iBAAiB,KAAK,QAAQ,EAAE,6BAA6B;AAAA,UACnE,OAAO;AAAA,QACX,CAAC,GAAG,EAAE,KAAK,CAAC;AAAA,MAChB;AAAA,IACJ;AAEA,QAAI,eAAe,KAAK,QAAQ,QAAQ,KAAK,OAAO,aAAa;AAC7D,YAAM,IAAI,iBAAiB,KAAK,QAAQ,EAAE,eAAe;AAAA,QACrD,UAAM,sBAAAD,SAAc,WAAW;AAAA,QAC/B,MAAM,KAAK,QAAQ,KAAK,QAAQ,EAAE,SAAS;AAAA,MAC/C,CAAC,GAAG,EAAE,KAAK,CAAC;AAAA,IAChB;AAEA,QAAI,eAAe,KAAK,QAAQ,QAAQ,KAAK,OAAO,aAAa;AAC7D,YAAM,IAAI,iBAAiB,KAAK,QAAQ,EAAE,gBAAgB;AAAA,QACtD,UAAM,sBAAAA,SAAc,WAAW;AAAA,MACnC,CAAC,GAAG,EAAE,KAAK,CAAC;AAAA,IAChB;AAAA,EACJ;AAAA,EACA,SAAS,eAAe,aAAa;AACjC,gBAAY,QAAQ,CAAC,eAAe;AAChC,WAAK,mBAAmB,UAAU;AAAA,IACtC,CAAC;AACD,SAAK,8BAA8B,eAAe,WAAW;AAAA,EACjE;AAAA,EACA,yBAAyB,OAAO;AAC5B,UAAM,EAAE,iBAAiB,IAAI,KAAK,QAAQ,EAAE;AAC5C,QAAI,oBAAoB,OAAO,KAAK,KAAK,EAAE,SAAS,kBAAkB;AAClE,YAAM,IAAI,iBAAiB,KAAK,QAAQ,EAAE,2BAA2B;AAAA,QACjE,aAAa;AAAA,MACjB,CAAC,CAAC;AAAA,IACN;AAAA,EACJ;AAAA,EACA,6BAA6B,MAAM;AAC/B,UAAM,QAAQ,IAAI,iBAAiB,KAAK,QAAQ,EAAE,kCAAkC;AAAA,MAChF,UAAU,KAAK,QAAQ,KAAK,QAAQ,EAAE,SAAS;AAAA,IACnD,CAAC,CAAC;AACF,UAAM,EAAE,mBAAmB,IAAI,KAAK,QAAQ,EAAE;AAC9C,UAAM,gBAAgB,CAAC;AACvB,eAAW,SAAS,oBAAoB;AACpC,UAAI,CAAC,OAAO,OAAO,KAAK,MAAM,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,IAAI;AAC7D,sBAAc,KAAK,KAAK;AAAA,MAC5B;AAAA,IACJ;AACA,WAAO,EAAE,eAAe,MAAM;AAAA,EAClC;AACJ;;;ACrHA,SAAS,SAAS,IAAI;AAClB,MAAI,UAAU;AACd,MAAI;AACJ,SAAO,IAAI,SAAS;AAChB,iBAAa;AACb,QAAI,CAAC,SAAS;AACV,gBAAU,QAAQ,QAAQ,EAAE,KAAK,MAAM;AACnC,kBAAU;AAKV,eAAO,GAAG,GAAG,UAAU;AAAA,MAC3B,CAAC;AAAA,IACL;AACA,WAAO;AAAA,EACX;AACJ;AAOA,IAAM,WAAN,MAAM,kBAAiB,WAAW;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,gBAAgB,QAAQ;AACpB,QAAI;AACJ,QAAI,OAAO,QAAQ,cAAc,YAAY;AAEzC,qBAAe;AACf,UAAI,EAAE,wBAAwB,YAAW;AACrC,gBAAQ,KAAK,IAAI,MAAM,oHAAoH,EAAE,OAAO,EAAE,cAAc,oBAAS,EAAE,CAAC,CAAC;AAAA,MACrL;AAAA,IACJ,WACS,OAAO,WAAW,YAAY;AAEnC,YAAM,SAAS;AAEf,WAAK,KAAK,eAAe,CAACE,OAAM;AAC5B,YAAIA,cAAa,QAAQ;AACrB,yBAAeA;AAAA,QACnB;AAAA,MACJ,CAAC;AAAA,IACL;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,QAAQ,QAAQ;AAClB,UAAM,mBAAmB,OAAO;AAChC,UAAM,gBAAgB,uBAAe,MAAM;AAC3C,QAAI,eAAe;AACf,WAAK,gBAAgB;AAIrB,YAAM,kBAAkB,SAAS,cAAc,KAAK;AACpD,sBAAgB,UAAU,IAAI,WAAW;AAEzC,WAAK,YAAY,SAAS,CAAC,UAAU;AAIjC,YAAI,CAAC,KAAK,KAAK,UAAU,KAAK,EAAE;AAC5B;AACJ,UAAO,KAAK,OAAO,OAAO,eAAe,GAAG,eAAe;AAC3D,aAAK,YAAY;AAAA,MACrB,CAAC;AACD,WAAK,KAAK,IAAI,cAAc,gBAAgB,sBAAsB,MAAM,GAAG;AAC3E,UAAI,KAAK,KAAK,sBAAsB;AAIhC,sBAAc,YAAY;AAAA,MAC9B;AACA,QAAO,KAAK,OAAO,KAAK,KAAK,SAAS,GAAG,eAAe,GAAG,eAAe;AAC1E,WAAK,KAAK;AACV,oBAAc,YAAY,eAAe;AAEzC,sBAAgB,MACZ,KAAK,KAAK,aAAa,yBAAiB,eAAe,KAAK;AAChE,WAAK,QAAQ;AACb,aAAO,KAAK;AAAA,IAChB;AACA,UAAM,eAAe,KAAK,gBAAgB,MAAM;AAChD,QAAI,cAAc;AACd,WAAK,KAAK,IAAI,cAAc,gBAAgB,OAAO,aAAa,EAAE,EAAE;AACpE,WAAK,SAAS;AACd,WAAK,KAAK,aAAa,UAAU,MAAM;AACvC,WAAK,QAAQ;AACb,aAAO,KAAK;AAAA,IAChB;AACA,SAAK,KAAK,IAAI,kBAAkB,gBAAgB,EAAE;AAClD,QAAI,UAAU,kCAAkC,gBAAgB;AAChE,QAAI,OAAO,WAAW,YAAY;AAC9B,iBACI;AAAA,IAIR,OACK;AACD,iBACI;AAAA,IAIR;AACA,UAAM,IAAI,MAAM,OAAO;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,OAAO,OAAO,WAAW;AACrB,UAAM,IAAI,MAAM,8DAA8D;AAAA,EAClF;AAAA,EACA,OAAO,OAAO;AACV,QAAI,KAAK,MAAM,MAAM;AACjB,WAAK,YAAY,KAAK;AAAA,IAC1B;AAAA,EACJ;AAAA,EACA,UAAU;AACN,QAAI,KAAK,eAAe;AACpB,WAAK,IAAI,OAAO;AAAA,IACpB;AACA,SAAK,UAAU;AAAA,EACnB;AAAA,EACA,UAAU;AAAA,EAAE;AAAA,EACZ,YAAY;AAAA,EAAE;AAClB;AACA,IAAO,mBAAQ;;;ACnJf;AAAA,EACE,MAAQ;AAAA,EACR,aAAe;AAAA,EACf,SAAW;AAAA,EACX,SAAW;AAAA,EACX,MAAQ;AAAA,EACR,MAAQ;AAAA,EACR,aAAe;AAAA,EACf,SAAW;AAAA,IACT,OAAS;AAAA,IACT,WAAa;AAAA,IACb,MAAQ;AAAA,EACV;AAAA,EACA,UAAY;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,UAAY;AAAA,EACZ,MAAQ;AAAA,IACN,KAAO;AAAA,EACT;AAAA,EACA,iBAAmB;AAAA,IACjB,OAAS;AAAA,IACT,YAAc;AAAA,IACd,QAAU;AAAA,EACZ;AAAA,EACA,YAAc;AAAA,IACZ,MAAQ;AAAA,IACR,KAAO;AAAA,EACT;AAAA,EACA,SAAW;AAAA,IACT,KAAK;AAAA,IACL,kBAAkB;AAAA,EACpB;AAAA,EACA,OAAS;AAAA,IACP;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;ACrCA,IAAM,eAAN,MAAmB;AAAA,EACf,OAAO,UAAU,gBAAY;AAAA,EAC7B,QAAQ,CAAC;AAAA,EACT,aAAa,oBAAI,IAAI;AAAA,EACrB,WAAW;AACP,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,SAAS,OAAO;AACZ,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM;AAClC,UAAM,YAAY,EAAE,GAAG,KAAK,OAAO,GAAG,MAAM;AAC5C,SAAK,QAAQ;AACb,SAAK,SAAS,WAAW,WAAW,KAAK;AAAA,EAC7C;AAAA,EACA,UAAU,UAAU;AAChB,SAAK,WAAW,IAAI,QAAQ;AAC5B,WAAO,MAAM;AACT,WAAK,WAAW,OAAO,QAAQ;AAAA,IACnC;AAAA,EACJ;AAAA,EACA,YAAY,MAAM;AACd,SAAK,WAAW,QAAQ,CAAC,aAAa;AAClC,eAAS,GAAG,IAAI;AAAA,IACpB,CAAC;AAAA,EACL;AACJ;AACA,IAAO,cAAQ;;;AC1Bf,sBAAqB;AAErB,+BAAe;;;ACJf,IAAI,cACF;AAWK,IAAI,SAAS,CAAC,OAAO,OAAO;AACjC,MAAI,KAAK;AACT,MAAIC,KAAI,OAAO;AACf,SAAOA,MAAK;AACV,UAAM,YAAa,KAAK,OAAO,IAAI,KAAM,CAAC;AAAA,EAC5C;AACA,SAAO;AACT;;;ACpBA,IAAAC,mBAAA;AAAA,EACE,MAAQ;AAAA,EACR,aAAe;AAAA,EACf,SAAW;AAAA,EACX,SAAW;AAAA,EACX,OAAS;AAAA,EACT,MAAQ;AAAA,EACR,aAAe;AAAA,IACb;AAAA,EACF;AAAA,EACA,SAAW;AAAA,IACT,OAAS;AAAA,IACT,aAAa;AAAA,IACb,WAAa;AAAA,IACb,MAAQ;AAAA,EACV;AAAA,EACA,UAAY;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,UAAY;AAAA,EACZ,MAAQ;AAAA,IACN,KAAO;AAAA,EACT;AAAA,EACA,YAAc;AAAA,IACZ,MAAQ;AAAA,IACR,KAAO;AAAA,EACT;AAAA,EACA,OAAS;AAAA,IACP;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,SAAW;AAAA,IACT,KAAK;AAAA,IACL,uBAAuB;AAAA,IACvB,mBAAmB;AAAA,IACnB,oBAAoB;AAAA,IACpB,kBAAkB;AAAA,EACpB;AAAA,EACA,cAAgB;AAAA,IACd,+BAA+B;AAAA,IAC/B,uBAAuB;AAAA,IACvB,eAAe;AAAA,IACf,QAAU;AAAA,IACV,cAAc;AAAA,IACd,qBAAqB;AAAA,IACrB,QAAU;AAAA,IACV,QAAU;AAAA,EACZ;AAAA,EACA,iBAAmB;AAAA,IACjB,sBAAsB;AAAA,IACtB,SAAW;AAAA,IACX,eAAe;AAAA,IACf,OAAS;AAAA,IACT,SAAW;AAAA,IACX,eAAe;AAAA,IACf,MAAQ;AAAA,IACR,YAAc;AAAA,IACd,QAAU;AAAA,EACZ;AACF;;;AC/De,SAAR,YAA6B,UAAU,gBAAgB;AAC1D,MAAI,eAAe,MAAM;AACrB,WAAO,eAAe;AAAA,EAC1B;AACA,MAAI,SAAS,MAAM,GAAG,EAAE,CAAC,MAAM,SAAS;AACpC,WAAO,GAAG,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC,IAAI,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC;AAAA,EAC9D;AACA,SAAO;AACX;;;ACRA,IAAO,iBAAQ;AAAA,EACX,SAAS;AAAA,IACL,oBAAoB;AAAA,MAChB,GAAG;AAAA,MACH,GAAG;AAAA,IACP;AAAA,IACA,mBAAmB;AAAA,MACf,GAAG;AAAA,MACH,GAAG;AAAA,IACP;AAAA,IACA,yBAAyB;AAAA,MACrB,GAAG;AAAA,MACH,GAAG;AAAA,IACP;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa;AAAA,IACb,0BAA0B;AAAA,IAC1B,gCAAgC;AAAA,IAChC,cAAc;AAAA,IACd,2BAA2B;AAAA,IAC3B,oBAAoB;AAAA,IACpB,cAAc;AAAA,IACd,gBAAgB;AAAA,IAChB,aAAa;AAAA,IACb,0BAA0B;AAAA,IAC1B,gBAAgB;AAAA,IAChB,sBAAsB;AAAA,IACtB,qBAAqB;AAAA;AAAA,IAErB,cAAc;AAAA,IACd,iBAAiB;AAAA,IACjB,SAAS;AAAA,MACL,GAAG;AAAA,MACH,GAAG;AAAA,IACP;AAAA,IACA,yBAAyB;AAAA,IACzB,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,SAAS;AAAA,IACT,cAAc;AAAA,IACd,uBAAuB;AAAA,IACvB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,cAAc;AAAA,IACd,mBAAmB;AAAA,IACnB,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,kBAAkB;AAAA,IAClB,eAAe;AAAA,IACf,oBAAoB;AAAA,IACpB,aAAa;AAAA,MACT,GAAG;AAAA,MACH,GAAG;AAAA,IACP;AAAA,IACA,8BAA8B;AAAA,IAC9B,SAAS;AAAA,IACT,YAAY;AAAA,EAChB;AACJ;;;AC7De,SAAR,uBAAwC,WAAW;AAEtD,MAAI,aAAa,QAAQ,OAAO,cAAc,aAAa;AACvD,gBAAY,UAAU;AAAA,EAC1B;AAEA,MAAI,CAAC;AACD,WAAO;AACX,QAAMC,KAAI,mBAAmB,KAAK,SAAS;AAC3C,MAAI,CAACA;AACD,WAAO;AACX,QAAM,cAAcA,GAAE,CAAC;AACvB,QAAM,UAAU,YAAY,MAAM,KAAK,CAAC;AACxC,QAAM,QAAQ,SAAS,QAAQ,CAAC,GAAG,EAAE;AACrC,QAAM,QAAQ,SAAS,QAAQ,CAAC,GAAG,EAAE;AAIrC,MAAI,QAAQ,MAAO,UAAU,MAAM,QAAQ,OAAQ;AAC/C,WAAO;AAAA,EACX;AAGA,MAAI,QAAQ,MAAO,UAAU,MAAM,SAAS,OAAQ;AAChD,WAAO;AAAA,EACX;AAEA,SAAO;AACX;;;ALlBA,IAAM,qBAAqB;AAAA,EACvB,eAAe;AAAA,EACf,gBAAgB;AAAA,EAChB,OAAO;AAAA,EACP,gBAAgB;AACpB;AAMO,IAAM,OAAN,MAAM,MAAK;AAAA,EACd,OAAO,UAAUC,iBAAY;AAAA,EAC7B,WAAW,uBAAO,OAAO,IAAI;AAAA,EAC7B;AAAA,EACA;AAAA,EACA,eAAW,yBAAAC,SAAG;AAAA,EACd,iBAAiB,oBAAI,IAAI;AAAA,EACzB,aAAa,oBAAI,IAAI;AAAA,EACrB,kBAAkB,oBAAI,IAAI;AAAA,EAC1B;AAAA,EACA;AAAA;AAAA;AAAA,EAGA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA,uBAAuB;AAAA,EACvB,aAAa;AAAA;AAAA;AAAA;AAAA,EAIb,YAAY,MAAM;AACd,SAAK,gBAAgB;AACrB,UAAMC,kBAAiB;AAAA,MACnB,IAAI;AAAA,MACJ,aAAa;AAAA,MACb,4BAA4B;AAAA,MAC5B,OAAO;AAAA,MACP,cAAc;AAAA,MACd,MAAM,CAAC;AAAA,MACP,mBAAmB,CAAC,MAAM,UAAU,CAAC,OAAO,OAAO,OAAO,KAAK,EAAE;AAAA,MACjE,gBAAgB,CAAC,UAAU;AAAA,MAC3B,OAAO,IAAI,YAAa;AAAA,MACxB,QAAQ;AAAA,MACR,aAAa;AAAA,IACjB;AACA,UAAM,SAAS,EAAE,GAAGA,iBAAgB,GAAG,KAAK;AAG5C,SAAK,OAAO;AAAA,MACR,GAAG;AAAA,MACH,cAAc;AAAA,QACV,GAAGA,gBAAe;AAAA,QAClB,GAAG,MAAM;AAAA,MACb;AAAA,IACJ;AAGA,QAAI,MAAM,UAAU,KAAK,OAAO;AAC5B,WAAK,IAAI,6KAA6K,SAAS;AAAA,IACnM,WACS,MAAM,OAAO;AAClB,WAAK,KAAK,SAAS;AAAA,IACvB;AACA,SAAK,IAAI,eAAe,MAAK,OAAO,EAAE;AACtC,SAAK,SAAS;AACd,SAAK,QAAQ,KAAK,KAAK;AACvB,SAAK,SAAS;AAAA,MACV,GAAG;AAAA,MACH,SAAS,CAAC;AAAA,MACV,OAAO,CAAC;AAAA,MACR,gBAAgB,CAAC;AAAA,MACjB,cAAc;AAAA,QACV,gBAAgB,uBAAuB;AAAA,QACvC,wBAAwB;AAAA,QACxB,kBAAkB;AAAA,MACtB;AAAA,MACA,MAAM,EAAE,GAAG,KAAK,KAAK,KAAK;AAAA,MAC1B,MAAM,CAAC;AAAA,IACX,CAAC;AACD,SAAK,cAAc,IAAI,WAAW,MAAM,KAAK,MAAM,MAAM,KAAK,IAAI;AAClE,SAAK,oBAAoB,KAAK,MAAM,UAAU,CAAC,WAAW,WAAW,UAAU;AAC3E,WAAK,KAAK,gBAAgB,WAAW,WAAW,KAAK;AACrD,WAAK,UAAU,SAAS;AAAA,IAC5B,CAAC;AAED,QAAI,KAAK,KAAK,SAAS,OAAO,WAAW,aAAa;AAElD,aAAO,KAAK,KAAK,EAAE,IAAI;AAAA,IAC3B;AACA,SAAK,cAAc;AAAA,EACvB;AAAA,EACA,KAAK,UAAU,MAAM;AACjB,SAAK,SAAS,KAAK,OAAO,GAAG,IAAI;AAAA,EACrC;AAAA,EACA,GAAG,OAAO,UAAU;AAChB,SAAK,SAAS,GAAG,OAAO,QAAQ;AAChC,WAAO;AAAA,EACX;AAAA,EACA,KAAK,OAAO,UAAU;AAClB,SAAK,SAAS,KAAK,OAAO,QAAQ;AAClC,WAAO;AAAA,EACX;AAAA,EACA,IAAI,OAAO,UAAU;AACjB,SAAK,SAAS,IAAI,OAAO,QAAQ;AACjC,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,UAAU,OAAO;AACb,SAAK,eAAe,CAAC,WAAW;AAC5B,aAAO,OAAO,KAAK;AAAA,IACvB,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,OAAO;AACZ,SAAK,MAAM,SAAS,KAAK;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAIA,WAAW;AACP,WAAO,KAAK,MAAM,SAAS;AAAA,EAC/B;AAAA,EACA,gBAAgB,mBAAmB;AAC/B,UAAM,qBAAqB,KAAK,SAAS,EAAE;AAC3C,SAAK,SAAS;AAAA,MACV,OAAO;AAAA,QACH,GAAG;AAAA,QACH,GAAG,OAAO,YAAY,OAAO,QAAQ,iBAAiB,EAAE,IAAI,CAAC,CAAC,QAAQ,YAAY,MAAM;AAAA,UACpF;AAAA,UACA;AAAA,YACI,GAAG,mBAAmB,MAAM;AAAA,YAC5B,GAAG;AAAA,UACP;AAAA,QACJ,CAAC,CAAC;AAAA,MACN;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,aAAa,QAAQ,OAAO;AACxB,QAAI,CAAC,KAAK,SAAS,EAAE,MAAM,MAAM,GAAG;AAChC,YAAM,IAAI,MAAM,uBAAuB,MAAM,qCAAqC;AAAA,IACtF;AACA,SAAK,gBAAgB,EAAE,CAAC,MAAM,GAAG,MAAM,CAAC;AAAA,EAC5C;AAAA,EACA,WAAW;AACP,UAAM,eAAe,CAAC,QAAQ,KAAK,IAAI,wBAAwB,GAAG,IAAI,OAAO;AAC7E,UAAM,aAAa,IAAI,WAAW,CAAC,KAAK,eAAe,KAAK,KAAK,MAAM,GAAG;AAAA,MACtE;AAAA,IACJ,CAAC;AACD,SAAK,OAAO,WAAW,UAAU,KAAK,UAAU;AAChD,SAAK,YAAY,WAAW,eAAe,KAAK,UAAU;AAC1D,SAAK,SAAS,WAAW;AAAA,EAC7B;AAAA,EACA,WAAW,SAAS;AAChB,SAAK,OAAO;AAAA,MACR,GAAG,KAAK;AAAA,MACR,GAAG;AAAA,MACH,cAAc;AAAA,QACV,GAAG,KAAK,KAAK;AAAA,QACb,GAAG,SAAS;AAAA,MAChB;AAAA,IACJ;AACA,QAAI,QAAQ,MAAM;AACd,WAAK,QAAQ,QAAQ,IAAI;AAAA,IAC7B;AACA,SAAK,SAAS;AACd,QAAI,QAAQ,QAAQ;AAChB,WAAK,eAAe,CAAC,WAAW;AAC5B,eAAO,WAAW,OAAO;AAAA,MAC7B,CAAC;AAAA,IACL;AAEA,SAAK,SAAS,MAAS;AAAA,EAC3B;AAAA,EACA,gBAAgB;AACZ,UAAM,kBAAkB;AAAA,MACpB,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,eAAe;AAAA,IACnB;AACA,UAAM,QAAQ,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AACzC,UAAM,eAAe,uBAAO,OAAO,IAAI;AACvC,WAAO,KAAK,KAAK,EAAE,QAAQ,CAAC,WAAW;AACnC,mBAAa,MAAM,IAAI;AAAA,QACnB,GAAG,MAAM,MAAM;AAAA,QACf,UAAU;AAAA,UACN,GAAG,MAAM,MAAM,EAAE;AAAA,UACjB,GAAG;AAAA,QACP;AAAA;AAAA;AAAA;AAAA,QAIA,KAAK;AAAA,QACL,aAAa;AAAA,MACjB;AAAA,IACJ,CAAC;AACD,SAAK,SAAS,EAAE,OAAO,cAAc,GAAG,mBAAmB,CAAC;AAAA,EAChE;AAAA,EACA,QAAQ;AACJ,UAAM,EAAE,cAAc,eAAe,IAAI,KAAK,SAAS;AACvD,QAAI,OAAO,KAAK,cAAc,EAAE,SAAS,KACrC,CAAC,aAAa,wBAAwB;AACtC,YAAM,IAAI,MAAM,+EAA+E;AAAA,IACnG;AACA,SAAK,SAAS,EAAE,GAAG,oBAAoB,OAAO,CAAC,EAAE,CAAC;AAAA,EACtD;AAAA,EACA,gBAAgB,IAAI;AAChB,SAAK,eAAe,IAAI,EAAE;AAAA,EAC9B;AAAA,EACA,mBAAmB,IAAI;AACnB,WAAO,KAAK,eAAe,OAAO,EAAE;AAAA,EACxC;AAAA,EACA,iBAAiB,IAAI;AACjB,SAAK,gBAAgB,IAAI,EAAE;AAAA,EAC/B;AAAA,EACA,oBAAoB,IAAI;AACpB,WAAO,KAAK,gBAAgB,OAAO,EAAE;AAAA,EACzC;AAAA,EACA,YAAY,IAAI;AACZ,SAAK,WAAW,IAAI,EAAE;AAAA,EAC1B;AAAA,EACA,eAAe,IAAI;AACf,WAAO,KAAK,WAAW,OAAO,EAAE;AAAA,EACpC;AAAA,EACA,QAAQ,MAAM;AACV,UAAM,cAAc,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM,GAAG,KAAK;AACvD,UAAM,eAAe,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AAChD,WAAO,KAAK,YAAY,EAAE,QAAQ,CAAC,WAAW;AAC1C,mBAAa,MAAM,IAAI;AAAA,QACnB,GAAG,aAAa,MAAM;AAAA,QACtB,MAAM,EAAE,GAAG,aAAa,MAAM,EAAE,MAAM,GAAG,KAAK;AAAA,MAClD;AAAA,IACJ,CAAC;AACD,SAAK,IAAI,kBAAkB;AAC3B,SAAK,IAAI,IAAI;AACb,SAAK,SAAS;AAAA,MACV,MAAM;AAAA,MACN,OAAO;AAAA,IACX,CAAC;AAAA,EACL;AAAA,EACA,YAAY,QAAQ,MAAM;AACtB,UAAM,eAAe,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AAChD,QAAI,CAAC,aAAa,MAAM,GAAG;AACvB,WAAK,IAAI,gEAAgE,MAAM,EAAE;AACjF;AAAA,IACJ;AACA,UAAM,UAAU,EAAE,GAAG,aAAa,MAAM,EAAE,MAAM,GAAG,KAAK;AACxD,iBAAa,MAAM,IAAI,EAAE,GAAG,aAAa,MAAM,GAAG,MAAM,QAAQ;AAChE,SAAK,SAAS,EAAE,OAAO,aAAa,CAAC;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA,EAIA,QAAQ,QAAQ;AACZ,WAAO,KAAK,SAAS,EAAE,MAAM,MAAM;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA,EAIA,WAAW;AACP,UAAM,EAAE,MAAM,IAAI,KAAK,SAAS;AAChC,WAAO,OAAO,OAAO,KAAK;AAAA,EAC9B;AAAA,EACA,cAAc,KAAK;AACf,WAAO,IAAI,IAAI,CAAC,OAAO,KAAK,QAAQ,EAAE,CAAC;AAAA,EAC3C;AAAA,EACA,2BAA2B;AACvB,UAAM,EAAE,OAAO,aAAa,eAAe,MAAM,IAAI,KAAK,SAAS;AACnE,UAAM,QAAQ,OAAO,OAAO,WAAW;AACvC,UAAM,kBAAkB,CAAC;AACzB,UAAM,WAAW,CAAC;AAClB,UAAM,eAAe,CAAC;AACtB,UAAM,qBAAqB,CAAC;AAC5B,UAAM,cAAc,CAAC;AACrB,UAAM,gBAAgB,CAAC;AACvB,UAAM,eAAe,CAAC;AACtB,UAAM,2BAA2B,CAAC;AAClC,UAAM,kBAAkB,CAAC;AACzB,eAAW,QAAQ,OAAO;AACtB,YAAM,EAAE,SAAS,IAAI;AACrB,UAAI,CAAC,SAAS,kBAAkB,SAAS,eAAe;AACpD,wBAAgB,KAAK,IAAI;AACzB,YAAI,CAAC,KAAK,UAAU;AAChB,mCAAyB,KAAK,IAAI;AAAA,QACtC;AAAA,MACJ;AACA,UAAI,CAAC,SAAS,eAAe;AACzB,iBAAS,KAAK,IAAI;AAAA,MACtB;AACA,UAAI,SAAS,iBACT,SAAS,cACT,SAAS,aAAa;AACtB,qBAAa,KAAK,IAAI;AAAA,MAC1B;AACA,UAAI,SAAS,eAAe;AACxB,2BAAmB,KAAK,IAAI;AAAA,MAChC;AACA,UAAI,KAAK,UAAU;AACf,oBAAY,KAAK,IAAI;AAAA,MACzB;AACA,UAAI,SAAS,gBAAgB;AACzB,sBAAc,KAAK,IAAI;AAAA,MAC3B;AACA,UAAI,KAAK,OAAO;AACZ,qBAAa,KAAK,IAAI;AAAA,MAC1B;AACA,UAAI,SAAS,cAAc,SAAS,aAAa;AAC7C,wBAAgB,KAAK,IAAI;AAAA,MAC7B;AAAA,IACJ;AACA,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,iBAAiB,mBAAmB,SAAS;AAAA,MAC7C,eAAe,kBAAkB,OAC7B,cAAc,WAAW,MAAM,UAC/B,gBAAgB,WAAW;AAAA,MAC/B,cAAc,CAAC,CAAC,SAAS,aAAa,WAAW,MAAM;AAAA,MACvD,aAAa,gBAAgB,WAAW,KACpC,YAAY,WAAW,gBAAgB;AAAA,MAC3C,oBAAoB,gBAAgB,SAAS;AAAA,MAC7C,aAAa,MAAM,KAAK,CAAC,SAAS,KAAK,OAAO;AAAA,IAClD;AAAA,EACJ;AAAA,EACA,eAAe,QAAQ;AACnB,eAAW,SAAS,QAAQ;AACxB,UAAI,MAAM,eAAe;AACrB,aAAK,KAAK,sBAAsB,MAAM,MAAM,KAAK;AAAA,MACrD,OACK;AACD,aAAK,KAAK,SAAS,OAAO,MAAM,IAAI;AAAA,MACxC;AACA,WAAK,IAAI,OAAO,SAAS;AAAA,IAC7B;AACA,UAAM,mBAAmB,OAAO,OAAO,CAAC,UAAU,MAAM,YAAY;AAEpE,UAAM,eAAe;AACrB,UAAM,cAAc,iBAAiB,MAAM,GAAG,YAAY;AAC1D,UAAM,mBAAmB,iBAAiB,MAAM,YAAY;AAC5D,gBAAY,QAAQ,CAAC,EAAE,SAAS,UAAU,GAAG,MAAM;AAC/C,WAAK,KAAK,EAAE,SAAS,QAAQ,GAAG,SAAS,KAAK,KAAK,WAAW;AAAA,IAClE,CAAC;AACD,QAAI,iBAAiB,SAAS,GAAG;AAC7B,WAAK,KAAK;AAAA,QACN,SAAS,KAAK,KAAK,gCAAgC;AAAA,UAC/C,OAAO,iBAAiB;AAAA,QAC5B,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EACA,qBAAqB,MAAM,QAAQ,KAAK,SAAS,GAAG;AAChD,QAAI;AACA,WAAK,YAAY,SAAS,OAAO,CAAC,IAAI,CAAC;AAAA,IAC3C,SACO,KAAK;AACR,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AAAA,EACA,mBAAmB,MAAM;AACrB,QAAI;AACA,WAAK,YAAY,mBAAmB,IAAI;AAAA,IAC5C,SACO,KAAK;AACR,aAAO,IAAI;AAAA,IACf;AACA,WAAO;AAAA,EACX;AAAA,EACA,8BAA8B,OAAO;AACjC,UAAM,gBAAgB,KAAK,SAAS;AACpC,QAAI;AACA,WAAK,YAAY,8BAA8B,eAAe,KAAK;AAAA,IACvE,SACO,KAAK;AACR,aAAO,IAAI;AAAA,IACf;AACA,WAAO;AAAA,EACX;AAAA,EACA,+BAA+B,MAAM;AACjC,UAAM,EAAE,eAAe,MAAM,IAAI,KAAK,YAAY,6BAA6B,IAAI;AACnF,QAAI,cAAc,SAAS,GAAG;AAC1B,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,2BAA2B;AAAA,QAC3B,OAAO,MAAM;AAAA,MACjB,CAAC;AACD,WAAK,IAAI,MAAM,OAAO;AACtB,WAAK,KAAK,sBAAsB,MAAM,KAAK;AAC3C,aAAO;AAAA,IACX;AACA,QAAI,cAAc,WAAW,KAAK,KAAK,2BAA2B;AAC9D,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,2BAA2B,CAAC;AAAA,MAChC,CAAC;AAAA,IACL;AACA,WAAO;AAAA,EACX;AAAA,EACA,yBAAyB,OAAO;AAC5B,QAAI,UAAU;AACd,eAAW,QAAQ,OAAO,OAAO,KAAK,GAAG;AACrC,UAAI,CAAC,KAAK,+BAA+B,IAAI,GAAG;AAC5C,kBAAU;AAAA,MACd;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,wBAAwB,MAAM;AAC1B,UAAM,EAAE,eAAe,IAAI,KAAK,SAAS;AACzC,QAAI,mBAAmB,OAAO;AAC1B,YAAM,QAAQ,IAAI,iBAAiB,KAAK,KAAK,oBAAoB,GAAG;AAAA,QAChE;AAAA,MACJ,CAAC;AACD,WAAK,eAAe,CAAC,KAAK,CAAC;AAC3B,YAAM;AAAA,IACV;AAAA,EACJ;AAAA,EACA,yBAAyB,QAAQ;AAC7B,UAAM,EAAE,MAAM,IAAI,KAAK,SAAS;AAChC,QAAI,MAAM,MAAM,KAAK,CAAC,MAAM,MAAM,EAAE,SAAS;AACzC,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,eAAe,sBAAsB;AAIjC,UAAM,OAAQ,gCAAgC,OACxC;AAAA,MACE,MAAM,qBAAqB;AAAA,MAC3B,MAAM,qBAAqB;AAAA,MAC3B,MAAM,qBAAqB;AAAA,MAC3B,MAAM;AAAA,IACV,IACE;AACN,UAAM,WAAW,YAAY,IAAI;AACjC,UAAM,WAAW,YAAY,UAAU,IAAI;AAC3C,UAAM,gBAAgB,wBAAwB,QAAQ,EAAE;AACxD,UAAM,KAAK,cAAc,MAAM,KAAK,MAAM,CAAC;AAC3C,UAAM,OAAO,KAAK,QAAQ,CAAC;AAC3B,SAAK,OAAO;AACZ,SAAK,OAAO;AAEZ,UAAM,OAAO,OAAO,SAAS,KAAK,KAAK,IAAI,IACrC,KAAK,KAAK,OACV;AACN,WAAO;AAAA,MACH,QAAQ,KAAK,UAAU;AAAA,MACvB;AAAA,MACA,MAAM;AAAA,MACN,WAAW,iBAAiB;AAAA,MAC5B,MAAM;AAAA,QACF,GAAG,KAAK,SAAS,EAAE;AAAA,QACnB,GAAG;AAAA,MACP;AAAA,MACA,MAAM;AAAA,MACN,MAAM,KAAK;AAAA,MACX,UAAU;AAAA,QACN,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,YAAY;AAAA,QACZ,gBAAgB;AAAA,QAChB,eAAe;AAAA,MACnB;AAAA,MACA;AAAA,MACA,SAAS;AAAA,MACT,UAAU,KAAK,YAAY;AAAA,MAC3B,QAAQ,KAAK;AAAA,MACb,SAAS,KAAK;AAAA,IAClB;AAAA,EACJ;AAAA;AAAA,EAEA,sBAAsB;AAClB,QAAI,KAAK,KAAK,eAAe,CAAC,KAAK,sBAAsB;AACrD,WAAK,uBAAuB,WAAW,MAAM;AACzC,aAAK,uBAAuB;AAC5B,aAAK,OAAO,EAAE,MAAM,CAAC,QAAQ;AACzB,cAAI,CAAC,IAAI,eAAe;AACpB,iBAAK,IAAI,IAAI,SAAS,IAAI,WAAW,GAAG;AAAA,UAC5C;AAAA,QACJ,CAAC;AAAA,MACL,GAAG,CAAC;AAAA,IACR;AAAA,EACJ;AAAA,EACA,yBAAyB,YAAY;AACjC,QAAI,EAAE,OAAO,cAAc,IAAI,KAAK,SAAS;AAE7C,QAAI,iBAAiB,EAAE,GAAG,cAAc;AACxC,UAAM,kBAAkB,CAAC;AACzB,UAAM,SAAS,CAAC;AAChB,eAAW,aAAa,YAAY;AAChC,UAAI;AACA,YAAI,UAAU,KAAK,eAAe,SAAS;AAK3C,cAAM,UAAU,cAAc,QAAQ,EAAE,GAAG;AAC3C,YAAI,SAAS;AACT,gBAAM,oBAAoB,cAAc,QAAQ,EAAE;AAClD,oBAAU;AAAA,YACN,GAAG;AAAA,YACH,SAAS;AAAA,YACT,MAAM,UAAU;AAAA,UACpB;AACA,eAAK,IAAI,iDAAiD,QAAQ,IAAI,KAAK,QAAQ,EAAE,EAAE;AAAA,QAC3F;AACA,cAAM,0BAA0B,KAAK,KAAK,kBAAkB,SAAS,cAAc;AAEnF,wBAAgB,KAAK,SAAS,EAAE;AAChC,yBAAiB,EAAE,GAAG,eAAe,GAAG,eAAe;AACvD,YAAI,CAAC,2BACD,KAAK,yBAAyB,QAAQ,EAAE,GAAG;AAC3C,gBAAM,IAAI,iBAAiB,KAAK,KAAK,gBAAgB;AAAA,YACjD,UAAU,QAAQ,QAAQ,KAAK,KAAK,SAAS;AAAA,UACjD,CAAC,GAAG,EAAE,MAAM,UAAU,CAAC;AAAA,QAC3B;AAEA,YAAI,4BAA4B,SAAS,CAAC,SAAS;AAE/C,gBAAM,IAAI,iBAAiB,iEAAiE,EAAE,cAAc,OAAO,MAAM,UAAU,CAAC;AAAA,QACxI,WACS,OAAO,4BAA4B,YACxC,4BAA4B,MAAM;AAClC,oBAAU;AAAA,QACd;AACA,aAAK,YAAY,mBAAmB,OAAO;AAE3C,uBAAe,QAAQ,EAAE,IAAI;AAC7B,wBAAgB,KAAK,OAAO;AAAA,MAChC,SACO,KAAK;AACR,eAAO,KAAK,GAAG;AAAA,MACnB;AAAA,IACJ;AACA,QAAI;AAGA,WAAK,YAAY,8BAA8B,OAAO,OAAO,aAAa,GAAG,eAAe;AAAA,IAChG,SACO,KAAK;AACR,aAAO,KAAK,GAAG;AAEf,aAAO;AAAA,QACH,gBAAgB;AAAA,QAChB,iBAAiB,CAAC;AAAA,QAClB;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ,MAAM;AACV,SAAK,wBAAwB,IAAI;AACjC,UAAM,EAAE,gBAAgB,iBAAiB,OAAO,IAAI,KAAK,yBAAyB,CAAC,IAAI,CAAC;AACxF,UAAM,oBAAoB,OAAO,OAAO,CAAC,UAAU,MAAM,aAAa;AACtE,SAAK,eAAe,iBAAiB;AACrC,QAAI,OAAO,SAAS;AAChB,YAAM,OAAO,CAAC;AAClB,SAAK,SAAS,EAAE,OAAO,eAAe,CAAC;AACvC,UAAM,CAAC,mBAAmB,IAAI;AAC9B,SAAK,KAAK,cAAc,mBAAmB;AAC3C,SAAK,KAAK,eAAe,eAAe;AACxC,SAAK,IAAI,eAAe,oBAAoB,IAAI,KAAK,oBAAoB,EAAE,gBAAgB,oBAAoB,IAAI,EAAE;AACrH,SAAK,oBAAoB;AACzB,WAAO,oBAAoB;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,SAAS,iBAAiB;AACtB,SAAK,wBAAwB;AAC7B,UAAM,EAAE,gBAAgB,iBAAiB,OAAO,IAAI,KAAK,yBAAyB,eAAe;AACjG,UAAM,oBAAoB,OAAO,OAAO,CAAC,UAAU,MAAM,aAAa;AACtE,SAAK,eAAe,iBAAiB;AACrC,UAAM,uBAAuB,OAAO,OAAO,CAAC,UAAU,CAAC,MAAM,aAAa;AAC1E,QAAI,qBAAqB,SAAS,GAAG;AACjC,UAAI,UAAU;AACd,2BAAqB,QAAQ,CAAC,aAAa;AACvC,mBAAW;AAAA,KAAQ,SAAS,OAAO;AAAA,MACvC,CAAC;AACD,WAAK,KAAK;AAAA,QACN,SAAS,KAAK,KAAK,sBAAsB;AAAA,UACrC,aAAa,qBAAqB;AAAA,QACtC,CAAC;AAAA,QACD,SAAS;AAAA,MACb,GAAG,SAAS,KAAK,KAAK,WAAW;AACjC,UAAI,OAAO,mBAAmB,YAAY;AACtC,cAAM,IAAI,eAAe,sBAAsB,OAAO;AAAA,MAC1D,OACK;AACD,cAAM,MAAM,IAAI,MAAM,OAAO;AAE7B,YAAI,SAAS;AACb,cAAM;AAAA,MACV;AAAA,IACJ;AAEA,SAAK,SAAS,EAAE,OAAO,eAAe,CAAC;AACvC,oBAAgB,QAAQ,CAAC,SAAS;AAC9B,WAAK,KAAK,cAAc,IAAI;AAAA,IAChC,CAAC;AACD,SAAK,KAAK,eAAe,eAAe;AACxC,QAAI,gBAAgB,SAAS,GAAG;AAC5B,WAAK,IAAI,kBAAkB,gBAAgB,MAAM,QAAQ;AAAA,IAC7D,OACK;AACD,aAAO,OAAO,eAAe,EAAE,QAAQ,CAAC,SAAS;AAC7C,aAAK,IAAI,eAAe,KAAK,IAAI;AAAA,OAAU,KAAK,EAAE;AAAA,SAAY,KAAK,IAAI,EAAE;AAAA,MAC7E,CAAC;AAAA,IACL;AACA,QAAI,gBAAgB,SAAS,GAAG;AAC5B,WAAK,oBAAoB;AAAA,IAC7B;AAAA,EACJ;AAAA,EACA,YAAY,SAAS;AACjB,UAAM,EAAE,OAAO,eAAe,IAAI,KAAK,SAAS;AAChD,UAAM,eAAe,EAAE,GAAG,MAAM;AAChC,UAAM,iBAAiB,EAAE,GAAG,eAAe;AAC3C,UAAM,eAAe,uBAAO,OAAO,IAAI;AACvC,YAAQ,QAAQ,CAAC,WAAW;AACxB,UAAI,MAAM,MAAM,GAAG;AACf,qBAAa,MAAM,IAAI,MAAM,MAAM;AACnC,eAAO,aAAa,MAAM;AAAA,MAC9B;AAAA,IACJ,CAAC;AAED,aAAS,iBAAiB,cAAc;AACpC,aAAO,aAAa,YAAY,MAAM;AAAA,IAC1C;AACA,WAAO,KAAK,cAAc,EAAE,QAAQ,CAAC,aAAa;AAC9C,YAAM,aAAa,eAAe,QAAQ,EAAE,QAAQ,OAAO,gBAAgB;AAE3E,UAAI,WAAW,WAAW,GAAG;AACzB,eAAO,eAAe,QAAQ;AAC9B;AAAA,MACJ;AACA,YAAM,EAAE,aAAa,IAAI,KAAK,SAAS;AACvC,UAAI,WAAW,WAAW,eAAe,QAAQ,EAAE,QAAQ,UACvD,CAAC,aAAa,wBAAwB;AACtC,cAAM,IAAI,MAAM,+EAA+E;AAAA,MACnG;AACA,qBAAe,QAAQ,IAAI;AAAA,QACvB,GAAG,eAAe,QAAQ;AAAA,QAC1B,SAAS;AAAA,MACb;AAAA,IACJ,CAAC;AACD,UAAM,cAAc;AAAA,MAChB,gBAAgB;AAAA,MAChB,OAAO;AAAA,IACX;AAGA,QAAI,OAAO,KAAK,YAAY,EAAE,WAAW,GAAG;AACxC,kBAAY,iBAAiB;AAC7B,kBAAY,QAAQ;AACpB,kBAAY,iBAAiB;AAAA,IACjC;AACA,SAAK,SAAS,WAAW;AACzB,SAAK,8BAA8B;AACnC,UAAM,iBAAiB,OAAO,KAAK,YAAY;AAC/C,mBAAe,QAAQ,CAAC,WAAW;AAC/B,WAAK,KAAK,gBAAgB,aAAa,MAAM,CAAC;AAAA,IAClD,CAAC;AACD,QAAI,eAAe,SAAS,GAAG;AAC3B,WAAK,IAAI,WAAW,eAAe,MAAM,QAAQ;AAAA,IACrD,OACK;AACD,WAAK,IAAI,kBAAkB,eAAe,KAAK,IAAI,CAAC,EAAE;AAAA,IAC1D;AAAA,EACJ;AAAA,EACA,WAAW,QAAQ;AACf,SAAK,YAAY,CAAC,MAAM,CAAC;AAAA,EAC7B;AAAA,EACA,YAAY,QAAQ;AAChB,QAAI,CAAC,KAAK,SAAS,EAAE,aAAa,oBAC9B,KAAK,QAAQ,MAAM,EAAE,SAAS,gBAAgB;AAC9C,aAAO;AAAA,IACX;AACA,UAAM,OAAO,KAAK,QAAQ,MAAM;AAChC,UAAM,YAAY,KAAK,YAAY;AACnC,UAAM,WAAW,CAAC;AAClB,SAAK,aAAa,QAAQ;AAAA,MACtB;AAAA,IACJ,CAAC;AACD,SAAK,KAAK,gBAAgB,MAAM,QAAQ;AACxC,WAAO;AAAA,EACX;AAAA,EACA,WAAW;AACP,UAAM,eAAe,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AAChD,UAAM,yBAAyB,OAAO,KAAK,YAAY,EAAE,OAAO,CAAC,SAAS;AACtE,aAAQ,CAAC,aAAa,IAAI,EAAE,SAAS,kBACjC,aAAa,IAAI,EAAE,SAAS;AAAA,IACpC,CAAC;AACD,2BAAuB,QAAQ,CAAC,SAAS;AACrC,YAAM,cAAc,EAAE,GAAG,aAAa,IAAI,GAAG,UAAU,KAAK;AAC5D,mBAAa,IAAI,IAAI;AAAA,IACzB,CAAC;AACD,SAAK,SAAS,EAAE,OAAO,aAAa,CAAC;AACrC,SAAK,KAAK,WAAW;AAAA,EACzB;AAAA,EACA,YAAY;AACR,UAAM,eAAe,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AAChD,UAAM,yBAAyB,OAAO,KAAK,YAAY,EAAE,OAAO,CAAC,SAAS;AACtE,aAAQ,CAAC,aAAa,IAAI,EAAE,SAAS,kBACjC,aAAa,IAAI,EAAE,SAAS;AAAA,IACpC,CAAC;AACD,2BAAuB,QAAQ,CAAC,SAAS;AACrC,YAAM,cAAc;AAAA,QAChB,GAAG,aAAa,IAAI;AAAA,QACpB,UAAU;AAAA,QACV,OAAO;AAAA,MACX;AACA,mBAAa,IAAI,IAAI;AAAA,IACzB,CAAC;AACD,SAAK,SAAS,EAAE,OAAO,aAAa,CAAC;AACrC,SAAK,KAAK,YAAY;AAAA,EAC1B;AAAA,EACA,mBAAmB;AACf,UAAM,EAAE,MAAM,IAAI,KAAK,SAAS;AAChC,WAAO,OAAO,KAAK,KAAK,EAAE,OAAO,CAAC,WAAW;AACzC,YAAM,OAAO,MAAM,MAAM;AAEzB,aAAQ,KAAK,UACR,CAAC,KAAK,6BACH,KAAK,0BAA0B,WAAW;AAAA,IACtD,CAAC;AAAA,EACL;AAAA,EACA,MAAM,cAAc;AAChB,UAAM,eAAe,KAAK,iBAAiB;AAC3C,UAAM,eAAe,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AAChD,iBAAa,QAAQ,CAAC,WAAW;AAC7B,mBAAa,MAAM,IAAI;AAAA,QACnB,GAAG,aAAa,MAAM;AAAA,QACtB,UAAU;AAAA,QACV,OAAO;AAAA,MACX;AAAA,IACJ,CAAC;AACD,SAAK,SAAS;AAAA,MACV,OAAO;AAAA,MACP,OAAO;AAAA,IACX,CAAC;AACD,SAAK,KAAK,aAAa,KAAK,cAAc,YAAY,CAAC;AACvD,QAAI,aAAa,WAAW,GAAG;AAC3B,aAAO;AAAA,QACH,YAAY,CAAC;AAAA,QACb,QAAQ,CAAC;AAAA,MACb;AAAA,IACJ;AACA,UAAM,WAAW,KAAK,cAAc,cAAc;AAAA,MAC9C,qBAAqB;AAAA;AAAA,IACzB,CAAC;AACD,WAAO,KAAK,WAAW,QAAQ;AAAA,EACnC;AAAA,EACA,MAAM,WAAW;AACb,UAAM,SAAS,MAAM,KAAK,YAAY;AACtC,SAAK,KAAK,YAAY,MAAM;AAC5B,WAAO;AAAA,EACX;AAAA,EACA,YAAY;AACR,SAAK,KAAK,YAAY;AACtB,UAAM,EAAE,MAAM,IAAI,KAAK,SAAS;AAChC,UAAM,UAAU,OAAO,KAAK,KAAK;AACjC,QAAI,QAAQ,QAAQ;AAChB,WAAK,YAAY,OAAO;AAAA,IAC5B;AACA,SAAK,SAAS,kBAAkB;AAAA,EACpC;AAAA,EACA,YAAY,QAAQ;AAChB,SAAK,aAAa,QAAQ;AAAA,MACtB,OAAO;AAAA,MACP,UAAU;AAAA,IACd,CAAC;AACD,SAAK,KAAK,gBAAgB,KAAK,QAAQ,MAAM,CAAC;AAC9C,UAAM,WAAW,KAAK,cAAc,CAAC,MAAM,GAAG;AAAA,MAC1C,qBAAqB;AAAA;AAAA,IACzB,CAAC;AACD,WAAO,KAAK,WAAW,QAAQ;AAAA,EACnC;AAAA,EACA,SAAS;AACL,SAAK,eAAe,CAAC,WAAW;AAC5B;AACA,aAAO,UAAU,SAAS;AAAA,IAC9B,CAAC;AAAA,EACL;AAAA,EACA,wBAAwB,CAAC,MAAM,aAAa;AACxC,UAAM,cAAc,OAAO,KAAK,QAAQ,KAAK,EAAE,IAAI;AACnD,QAAI,QAAQ,QAAQ,CAAC,aAAa;AAC9B,WAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,IACJ;AACA,QAAI,YAAY,SAAS,eAAe,KAAK;AACzC,WAAK,IAAI,mEAAmE,KAAK,EAAE,EAAE;AACrF;AAAA,IACJ;AACA,UAAM,cAAc;AAAA,MAChB,YAAY,SAAS;AAAA;AAAA,MAErB,YAAY,SAAS,cAAc,QAC/B,OAAO,SAAS,SAAS,UAAU,KACnC,SAAS,aAAa,IACpB,KAAK,MAAO,SAAS,gBAAgB,SAAS,aAAc,GAAG,IAC/D;AAAA,IACV;AACA,QAAI,YAAY,SAAS,iBAAiB,MAAM;AAC5C,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,UAAU;AAAA,UACN,GAAG,YAAY;AAAA,UACf,GAAG;AAAA,UACH,eAAe,SAAS;AAAA,QAC5B;AAAA,MACJ,CAAC;AAAA,IACL,OACK;AACD,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,UAAU;AAAA,UACN,GAAG,YAAY;AAAA,UACf,GAAG;AAAA,QACP;AAAA,MACJ,CAAC;AAAA,IACL;AACA,SAAK,8BAA8B;AAAA,EACvC;AAAA,EACA,uBAAuB;AACnB,UAAM,gBAAgB,KAAK,wBAAwB;AACnD,QAAI,uBAAuB;AAC3B,QAAI,iBAAiB,MAAM;AACvB,6BAAuB,KAAK,MAAM,gBAAgB,GAAG;AACrD,UAAI,uBAAuB;AACvB,+BAAuB;AAAA,eAClB,uBAAuB;AAC5B,+BAAuB;AAAA,IAC/B;AACA,SAAK,KAAK,YAAY,wBAAwB,CAAC;AAC/C,SAAK,SAAS;AAAA,MACV,eAAe,wBAAwB;AAAA,IAC3C,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,oCAAgC,gBAAAC,SAAS,MAAM,KAAK,qBAAqB,GAAG,KAAK,EAAE,SAAS,MAAM,UAAU,KAAK,CAAC;AAAA,EAClH,CAAC,uBAAO,IAAI,gCAAgC,CAAC,IAAI;AAC7C,WAAO,KAAK,qBAAqB;AAAA,EACrC;AAAA,EACA,0BAA0B;AAGtB,UAAM,QAAQ,KAAK,SAAS;AAE5B,UAAM,kBAAkB,MAAM,OAAO,CAAC,SAAS;AAC3C,aAAQ,KAAK,SAAS,iBAClB,KAAK,SAAS,cACd,KAAK,SAAS;AAAA,IACtB,CAAC;AACD,QAAI,gBAAgB,WAAW,GAAG;AAC9B,aAAO;AAAA,IACX;AACA,QAAI,gBAAgB,MAAM,CAAC,SAAS,KAAK,SAAS,cAAc,GAAG;AAI/D,aAAO;AAAA,IACX;AACA,UAAM,cAAc,CAAC,SAAS,KAAK,SAAS,cAAc,QAAQ,KAAK,SAAS,eAAe;AAC/F,UAAM,uBAAuB,gBAAgB,OAAO,WAAW;AAC/D,UAAM,yBAAyB,gBAAgB,OAAO,CAAC,SAAS,CAAC,YAAY,IAAI,CAAC;AAClF,QAAI,qBAAqB,MAAM,CAAC,SAAS,KAAK,SAAS,cAAc,KACjE,uBAAuB,SAAS,KAChC,CAAC,uBAAuB,MAAM,CAAC,SAAS,KAAK,SAAS,cAAc,GAAG;AAKvE,aAAO;AAAA,IACX;AACA,UAAM,iBAAiB,qBAAqB,OAAO,CAAC,KAAK,SAAS,OAAO,KAAK,SAAS,cAAc,IAAI,CAAC;AAC1G,UAAM,oBAAoB,qBAAqB,OAAO,CAAC,KAAK,SAAS,OAAO,KAAK,SAAS,iBAAiB,IAAI,CAAC;AAChH,WAAO,mBAAmB,IAAI,IAAI,oBAAoB;AAAA,EAC1D;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB;AAEZ,UAAM,eAAe,CAAC,OAAO,MAAM,aAAa;AAC5C,UAAI,WAAW,MAAM,WAAW;AAChC,UAAI,MAAM,SAAS;AACf,oBAAY,IAAI,MAAM,OAAO;AAAA,MACjC;AACA,WAAK,SAAS,EAAE,OAAO,SAAS,CAAC;AACjC,UAAI,QAAQ,QAAQ,KAAK,MAAM,KAAK,SAAS,EAAE,OAAO;AAClD,aAAK,aAAa,KAAK,IAAI;AAAA,UACvB,OAAO;AAAA,UACP;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AACA,SAAK,GAAG,SAAS,YAAY;AAC7B,SAAK,GAAG,gBAAgB,CAAC,MAAM,OAAO,aAAa;AAC/C,mBAAa,OAAO,MAAM,QAAQ;AAClC,UAAI,OAAO,UAAU,YAAY,MAAM,SAAS;AAC5C,aAAK,IAAI,MAAM,SAAS,OAAO;AAC/B,cAAM,WAAW,IAAI,MAAM,KAAK,KAAK,kBAAkB,EAAE,MAAM,MAAM,QAAQ,GAAG,CAAC,CAAC;AAClF,iBAAS,eAAe;AACxB,iBAAS,UAAU,MAAM;AACzB,YAAI,MAAM,SAAS;AACf,mBAAS,WAAW,IAAI,MAAM,OAAO;AAAA,QACzC;AACA,aAAK,eAAe,CAAC,QAAQ,CAAC;AAAA,MAClC,OACK;AACD,aAAK,eAAe,CAAC,KAAK,CAAC;AAAA,MAC/B;AAAA,IACJ,CAAC;AACD,QAAI,sCAAsC;AAC1C,SAAK,GAAG,kBAAkB,CAAC,OAAO,UAAU;AACxC,YAAM,EAAE,QAAQ,IAAI;AACpB,YAAM,UAAU,MAAM,IAAI,CAAC,SAAS,KAAK,KAAK,IAAI,EAAE,KAAK,IAAI;AAC7D,UAAI,CAAC,qCAAqC;AACtC,aAAK,KAAK,EAAE,SAAS,QAAQ,GAAG,WAAW,KAAK,KAAK,WAAW;AAChE,8CAAsC,WAAW,MAAM;AACnD,gDAAsC;AAAA,QAC1C,GAAG,KAAK,KAAK,WAAW;AAAA,MAC5B;AACA,WAAK,IAAI,GAAG,OAAO,IAAI,OAAO,GAAG,KAAK,GAAG,SAAS;AAAA,IACtD,CAAC;AACD,SAAK,GAAG,UAAU,MAAM;AACpB,WAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,IACjC,CAAC;AACD,UAAM,kBAAkB,CAAC,UAAU;AAC/B,YAAM,gBAAgB,MAAM,OAAO,CAAC,SAAS;AACzC,cAAM,SAAS,QAAQ,QAAQ,KAAK,QAAQ,KAAK,EAAE;AACnD,YAAI,CAAC;AACD,eAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AACjF,eAAO;AAAA,MACX,CAAC;AACD,YAAM,aAAa,OAAO,YAAY,cAAc,IAAI,CAAC,SAAS;AAAA,QAC9D,KAAK;AAAA,QACL;AAAA,UACI,UAAU;AAAA,YACN,eAAe,KAAK,IAAI;AAAA,YACxB,gBAAgB;AAAA,YAChB,eAAe;AAAA,YACf,YAAY,KAAK;AAAA,UACrB;AAAA,QACJ;AAAA,MACJ,CAAC,CAAC;AACF,WAAK,gBAAgB,UAAU;AAAA,IACnC;AACA,SAAK,GAAG,gBAAgB,eAAe;AACvC,SAAK,GAAG,mBAAmB,KAAK,qBAAqB;AACrD,SAAK,GAAG,kBAAkB,CAAC,MAAM,eAAe;AAC5C,UAAI,QAAQ,QAAQ,CAAC,KAAK,QAAQ,KAAK,EAAE,GAAG;AACxC,aAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,MACJ;AACA,YAAM,kBAAkB,KAAK,QAAQ,KAAK,EAAE,EAAE;AAC9C,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,UAAU;AAAA,UACN,GAAG;AAAA,UACH,aAAa,KAAK,gBAAgB,OAAO,IACnC;AAAA,YACE,MAAM;AAAA,UACV,IACE;AAAA,UACN,gBAAgB;AAAA,UAChB,YAAY;AAAA,UACZ,eAAe,gBAAgB;AAAA,QACnC;AAAA,QACA,UAAU;AAAA,QACV,WAAW,WAAW;AAAA,QACtB,UAAU;AAAA,MACd,CAAC;AAGD,UAAI,KAAK,QAAQ,MAAM;AACnB,aAAK,aAAa,KAAK,IAAI;AAAA,UACvB,MAAM,WAAW,iBAAiB,gBAAgB;AAAA,QACtD,CAAC;AAAA,MACL;AACA,WAAK,8BAA8B;AAAA,IACvC,CAAC;AACD,SAAK,GAAG,uBAAuB,CAAC,MAAM,aAAa;AAC/C,UAAI,QAAQ,QAAQ,CAAC,KAAK,QAAQ,KAAK,EAAE,GAAG;AACxC,aAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,MACJ;AACA,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,UAAU,EAAE,GAAG,KAAK,QAAQ,KAAK,EAAE,EAAE,UAAU,YAAY,SAAS;AAAA,MACxE,CAAC;AAAA,IACL,CAAC;AACD,SAAK,GAAG,uBAAuB,CAAC,SAAS;AACrC,UAAI,QAAQ,QAAQ,CAAC,KAAK,QAAQ,KAAK,EAAE,GAAG;AACxC,aAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,MACJ;AACA,YAAM,QAAQ,EAAE,GAAG,KAAK,SAAS,EAAE,MAAM;AACzC,YAAM,KAAK,EAAE,IAAI;AAAA,QACb,GAAG,MAAM,KAAK,EAAE;AAAA,QAChB,UAAU,EAAE,GAAG,MAAM,KAAK,EAAE,EAAE,SAAS;AAAA,MAC3C;AACA,aAAO,MAAM,KAAK,EAAE,EAAE,SAAS;AAC/B,WAAK,SAAS,EAAE,MAAM,CAAC;AAAA,IAC3B,CAAC;AACD,SAAK,GAAG,wBAAwB,CAAC,MAAM,aAAa;AAChD,UAAI,QAAQ,QAAQ,CAAC,KAAK,QAAQ,KAAK,EAAE,GAAG;AACxC,aAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,MACJ;AACA,WAAK,aAAa,KAAK,IAAI;AAAA,QACvB,UAAU;AAAA,UACN,GAAG,KAAK,SAAS,EAAE,MAAM,KAAK,EAAE,EAAE;AAAA,UAClC,aAAa;AAAA,QACjB;AAAA,MACJ,CAAC;AAAA,IACL,CAAC;AACD,SAAK,GAAG,wBAAwB,CAAC,SAAS;AACtC,UAAI,QAAQ,QAAQ,CAAC,KAAK,QAAQ,KAAK,EAAE,GAAG;AACxC,aAAK,IAAI,0DAA0D,MAAM,EAAE,EAAE;AAC7E;AAAA,MACJ;AACA,YAAM,QAAQ;AAAA,QACV,GAAG,KAAK,SAAS,EAAE;AAAA,MACvB;AACA,YAAM,KAAK,EAAE,IAAI;AAAA,QACb,GAAG,MAAM,KAAK,EAAE;AAAA,QAChB,UAAU;AAAA,UACN,GAAG,MAAM,KAAK,EAAE,EAAE;AAAA,QACtB;AAAA,MACJ;AACA,aAAO,MAAM,KAAK,EAAE,EAAE,SAAS;AAC/B,WAAK,SAAS,EAAE,MAAM,CAAC;AAAA,IAC3B,CAAC;AACD,SAAK,GAAG,YAAY,MAAM;AAEtB,WAAK,8BAA8B;AAAA,IACvC,CAAC;AAED,SAAK,GAAG,gCAAgC,CAAC,SAAS;AAC9C,UAAI,MAAM;AACN,aAAK,+BAA+B,IAAI;AAAA,MAC5C;AAAA,IACJ,CAAC;AAED,QAAI,OAAO,WAAW,eAAe,OAAO,kBAAkB;AAC1D,aAAO,iBAAiB,UAAU,KAAK,mBAAmB;AAC1D,aAAO,iBAAiB,WAAW,KAAK,mBAAmB;AAC3D,iBAAW,KAAK,qBAAqB,GAAI;AAAA,IAC7C;AAAA,EACJ;AAAA,EACA,qBAAqB;AACjB,UAAM,SAAS,OAAO,UAAU,UAAU;AAC1C,QAAI,CAAC,QAAQ;AACT,WAAK,KAAK,YAAY;AACtB,WAAK,KAAK,KAAK,KAAK,sBAAsB,GAAG,SAAS,CAAC;AACvD,WAAK,aAAa;AAAA,IACtB,OACK;AACD,WAAK,KAAK,WAAW;AACrB,UAAI,KAAK,YAAY;AACjB,aAAK,KAAK,aAAa;AACvB,aAAK,KAAK,KAAK,KAAK,qBAAqB,GAAG,WAAW,GAAI;AAC3D,aAAK,aAAa;AAAA,MACtB;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,sBAAsB,KAAK,mBAAmB,KAAK,IAAI;AAAA,EACvD,QAAQ;AACJ,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAIA,IAAI,WAGD,MAAM;AACL,QAAI,OAAO,WAAW,YAAY;AAC9B,YAAM,MAAM,oCAAoC,WAAW,OAAO,SAAS,OAAO,MAAM;AAExF,YAAM,IAAI,UAAU,GAAG;AAAA,IAC3B;AAEA,UAAM,SAAS,IAAI,OAAO,MAAM,GAAG,IAAI;AACvC,UAAM,WAAW,OAAO;AACxB,QAAI,CAAC,UAAU;AACX,YAAM,IAAI,MAAM,6BAA6B;AAAA,IACjD;AACA,QAAI,CAAC,OAAO,MAAM;AACd,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAClD;AACA,UAAM,sBAAsB,KAAK,UAAU,QAAQ;AACnD,QAAI,qBAAqB;AACrB,YAAM,MAAM,iCAAiC,oBAAoB,EAAE,qBAC7C,QAAQ;AAAA;AAE9B,YAAM,IAAI,MAAM,GAAG;AAAA,IACvB;AAEA,QAAI,OAAO,SAAS;AAEhB,WAAK,IAAI,SAAS,QAAQ,KAAK,OAAO,OAAO,EAAE;AAAA,IACnD;AACA,QAAI,OAAO,QAAQ,KAAK,UAAU;AAC9B,WAAK,SAAS,OAAO,IAAI,EAAE,KAAK,MAAM;AAAA,IAC1C,OACK;AACD,WAAK,SAAS,OAAO,IAAI,IAAI,CAAC,MAAM;AAAA,IACxC;AACA,WAAO,QAAQ;AACf,SAAK,KAAK,gBAAgB,MAAM;AAChC,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,UAAU,IAAI;AACV,eAAW,WAAW,OAAO,OAAO,KAAK,QAAQ,GAAG;AAChD,YAAM,cAAc,QAAQ,KAAK,CAAC,WAAW,OAAO,OAAO,EAAE;AAC7D,UAAI,eAAe;AACf,eAAO;AAAA,IACf;AACA,WAAO;AAAA,EACX;AAAA,EACA,CAAC,uBAAO,IAAI,uBAAuB,CAAC,EAAE,MAAM;AACxC,WAAO,KAAK,SAAS,IAAI;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,QAAQ;AACnB,WAAO,OAAO,KAAK,QAAQ,EAAE,KAAK,CAAC,EAAE,QAAQ,MAAM;AAAA,EACvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,aAAa,UAAU;AACnB,SAAK,IAAI,mBAAmB,SAAS,EAAE,EAAE;AACzC,SAAK,KAAK,iBAAiB,QAAQ;AACnC,QAAI,SAAS,WAAW;AACpB,eAAS,UAAU;AAAA,IACvB;AACA,UAAM,OAAO,KAAK,SAAS,SAAS,IAAI;AAIxC,UAAM,QAAQ,KAAK,UAAU,CAAC,SAAS,KAAK,OAAO,SAAS,EAAE;AAC9D,QAAI,UAAU,IAAI;AACd,WAAK,OAAO,OAAO,CAAC;AAAA,IACxB;AACA,UAAM,QAAQ,KAAK,SAAS;AAC5B,UAAM,eAAe;AAAA,MACjB,SAAS;AAAA,QACL,GAAG,MAAM;AAAA,QACT,CAAC,SAAS,EAAE,GAAG;AAAA,MACnB;AAAA,IACJ;AACA,SAAK,SAAS,YAAY;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA,EAIA,UAAU;AACN,SAAK,IAAI,yBAAyB,KAAK,KAAK,EAAE,+CAA+C;AAC7F,SAAK,UAAU;AACf,SAAK,kBAAkB;AACvB,SAAK,eAAe,CAAC,WAAW;AAC5B,WAAK,aAAa,MAAM;AAAA,IAC5B,CAAC;AACD,QAAI,OAAO,WAAW,eAAe,OAAO,qBAAqB;AAC7D,aAAO,oBAAoB,UAAU,KAAK,mBAAmB;AAC7D,aAAO,oBAAoB,WAAW,KAAK,mBAAmB;AAAA,IAClE;AAAA,EACJ;AAAA,EACA,WAAW;AACP,UAAM,EAAE,KAAK,IAAI,KAAK,SAAS;AAC/B,SAAK,SAAS,EAAE,MAAM,KAAK,MAAM,CAAC,EAAE,CAAC;AACrC,SAAK,KAAK,aAAa;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,KAAK,SAAS,OAAO,QAAQ,WAAW,KAAM;AAC1C,UAAM,mBAAmB,OAAO,YAAY;AAC5C,SAAK,SAAS;AAAA,MACV,MAAM;AAAA,QACF,GAAG,KAAK,SAAS,EAAE;AAAA,QACnB;AAAA,UACI;AAAA,UACA,SAAS,mBAAmB,QAAQ,UAAU;AAAA,UAC9C,SAAS,mBAAmB,QAAQ,UAAU;AAAA,QAClD;AAAA,MACJ;AAAA,IACJ,CAAC;AACD,eAAW,MAAM,KAAK,SAAS,GAAG,QAAQ;AAC1C,SAAK,KAAK,cAAc;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,IAAI,SAAS,MAAM;AACf,UAAM,EAAE,OAAO,IAAI,KAAK;AACxB,YAAQ,MAAM;AAAA,MACV,KAAK;AACD,eAAO,MAAM,OAAO;AACpB;AAAA,MACJ,KAAK;AACD,eAAO,KAAK,OAAO;AACnB;AAAA,MACJ;AACI,eAAO,MAAM,OAAO;AACpB;AAAA,IACR;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,qBAAqB,oBAAI,IAAI;AAAA,EAC7B,sBAAsB,IAAI,QAAQ;AAC9B,SAAK,mBAAmB,IAAI,IAAI,MAAM;AAAA,EAC1C;AAAA;AAAA,EAEA,wBAAwB,MAAM;AAC1B,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,oDAAoD,KAAK,EAAE,EAAE;AACjF,UAAM,gBAAgB,KAAK,mBAAmB,IAAI,KAAK,OAAO,eAAe;AAC7E,QAAI,iBAAiB;AACjB,YAAM,IAAI,MAAM,oBAAoB,KAAK,OAAO,eAAe,8BAA8B,KAAK,EAAE,GAAG;AAC3G,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,QAAQ,UAAU;AACpB,SAAK,IAAI,uCAAuC,QAAQ,GAAG;AAC3D,QAAI,CAAC,KAAK,SAAS,EAAE,eAAe,QAAQ,GAAG;AAC3C,WAAK,cAAc,QAAQ;AAC3B,YAAM,IAAI,MAAM,oBAAoB;AAAA,IACxC;AACA,UAAM,SAAS,MAAM,KAAK,WAAW,QAAQ;AAC7C,SAAK,KAAK,YAAY,MAAM;AAC5B,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc,SAAS,OAAO,CAAC,GAAG;AAE9B,UAAM,EAAE,sBAAsB,MAAM,IAAI;AACxC,UAAM,EAAE,gBAAgB,eAAe,IAAI,KAAK,SAAS;AACzD,QAAI,CAAC,kBAAkB,CAAC,qBAAqB;AACzC,YAAM,IAAI,MAAM,gDAAgD;AAAA,IACpE;AACA,UAAM,WAAW,OAAO;AACxB,SAAK,KAAK,UAAU,UAAU,KAAK,cAAc,OAAO,CAAC;AACzD,SAAK,SAAS;AAAA,MACV,gBAAgB,KAAK,KAAK,+BAA+B,SACrD,KAAK,KAAK,yBAAyB;AAAA,MACvC,gBAAgB;AAAA,QACZ,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,QAAQ,CAAC;AAAA,QACb;AAAA,MACJ;AAAA,IACJ,CAAC;AACD,WAAO;AAAA,EACX;AAAA,EACA,CAAC,uBAAO,IAAI,yBAAyB,CAAC,KAAK,MAAM;AAE7C,WAAO,KAAK,cAAc,GAAG,IAAI;AAAA,EACrC;AAAA,EACA,WAAW,UAAU;AACjB,UAAM,EAAE,eAAe,IAAI,KAAK,SAAS;AACzC,WAAO,eAAe,QAAQ;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAIA,cAAc,UAAU,MAAM;AAC1B,QAAI,CAAC,KAAK,WAAW,QAAQ,GAAG;AAC5B,WAAK,IAAI,2DAA2D,QAAQ,EAAE;AAC9E;AAAA,IACJ;AACA,UAAM,EAAE,eAAe,IAAI,KAAK,SAAS;AACzC,UAAM,gBAAgB;AAAA,MAClB,GAAG,eAAe,QAAQ;AAAA,MAC1B,QAAQ,EAAE,GAAG,eAAe,QAAQ,EAAE,QAAQ,GAAG,KAAK;AAAA,IAC1D;AACA,SAAK,SAAS;AAAA,MACV,gBAAgB,EAAE,GAAG,gBAAgB,CAAC,QAAQ,GAAG,cAAc;AAAA,IACnE,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc,UAAU;AACpB,UAAM,iBAAiB,EAAE,GAAG,KAAK,SAAS,EAAE,eAAe;AAC3D,WAAO,eAAe,QAAQ;AAC9B,SAAK,SAAS;AAAA,MACV;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,WAAW,UAAU;AACvB,UAAM,mBAAmB,MAAM;AAC3B,YAAM,EAAE,eAAe,IAAI,KAAK,SAAS;AACzC,aAAO,eAAe,QAAQ;AAAA,IAClC;AACA,QAAI,gBAAgB,iBAAiB;AACrC,UAAM,QAAQ;AAAA,MACV,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,IACZ;AACA,QAAI;AACA,eAAS,OAAO,cAAc,QAAQ,GAAG,OAAO,MAAM,QAAQ,QAAQ;AAClE,YAAI,CAAC,eAAe;AAChB;AAAA,QACJ;AACA,cAAM,KAAK,MAAM,IAAI;AACrB,aAAK,SAAS;AAAA,UACV,gBAAgB;AAAA,YACZ,GAAG,KAAK,SAAS,EAAE;AAAA,YACnB,CAAC,QAAQ,GAAG;AAAA,cACR,GAAG;AAAA,cACH;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ,CAAC;AACD,cAAM,EAAE,QAAQ,IAAI;AAGpB,cAAM,GAAG,SAAS,QAAQ;AAE1B,wBAAgB,iBAAiB;AAAA,MACrC;AAAA,IACJ,SACO,KAAK;AACR,WAAK,cAAc,QAAQ;AAC3B,YAAM;AAAA,IACV;AAEA,QAAI,eAAe;AAWf,oBAAc,QAAQ,QAAQ,CAAC,WAAW;AACtC,cAAM,OAAO,KAAK,QAAQ,MAAM;AAChC,YAAI,MAAM,SAAS,aAAa;AAC5B,eAAK,KAAK,wBAAwB,IAAI;AAAA,QAC1C;AAAA,MACJ,CAAC;AACD,YAAM,QAAQ,cAAc,QAAQ,IAAI,CAAC,WAAW,KAAK,QAAQ,MAAM,CAAC;AACxE,YAAM,aAAa,MAAM,OAAO,CAAC,SAAS,CAAC,KAAK,KAAK;AACrD,YAAM,SAAS,MAAM,OAAO,CAAC,SAAS,KAAK,KAAK;AAChD,WAAK,cAAc,UAAU,EAAE,YAAY,QAAQ,SAAS,CAAC;AAE7D,sBAAgB,iBAAiB;AAAA,IACrC;AAKA,QAAI;AACJ,QAAI,eAAe;AACf,eAAS,cAAc;AACvB,WAAK,cAAc,QAAQ;AAAA,IAC/B;AACA,QAAI,UAAU,MAAM;AAChB,WAAK,IAAI,2DAA2D,QAAQ,EAAE;AAC9E,eAAS;AAAA,QACL,YAAY,CAAC;AAAA,QACb,QAAQ,CAAC;AAAA,QACT;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,SAAS;AACX,QAAI,CAAC,KAAK,SAAS,UAAU,QAAQ;AACjC,WAAK,IAAI,qCAAqC,SAAS;AAAA,IAC3D;AACA,QAAI,EAAE,MAAM,IAAI,KAAK,SAAS;AAE9B,UAAM,eAAe,KAAK,iBAAiB;AAC3C,QAAI,aAAa,SAAS,GAAG;AACzB,YAAM,cAAc,MAAM,KAAK,YAAY;AAC3C,YAAM,cAAc,KAAK,SAAS,EAAE,OAAO,CAAC,SAAS,KAAK,SAAS,iBAAiB,IAAI,EACnF,SAAS;AAEd,UAAI,CAAC,aAAa;AACd,aAAK,KAAK,YAAY,WAAW;AACjC,eAAO;AAAA,MACX;AAEA;AACA,OAAC,EAAE,MAAM,IAAI,KAAK,SAAS;AAAA,IAC/B;AAEA,UAAM,uBAAuB,KAAK,KAAK,eAAe,KAAK;AAC3D,QAAI,yBAAyB,OAAO;AAChC,aAAO,QAAQ,OAAO,IAAI,MAAM,+DAA+D,CAAC;AAAA,IACpG;AACA,QAAI,wBAAwB,OAAO,yBAAyB,UAAU;AAClE,cAAQ;AAGR,WAAK,SAAS;AAAA,QACV;AAAA,MACJ,CAAC;AAAA,IACL;AACA,WAAO,QAAQ,QAAQ,EAClB,KAAK,MAAM,KAAK,YAAY,yBAAyB,KAAK,CAAC,EAC3D,MAAM,CAAC,QAAQ;AAChB,WAAK,eAAe,CAAC,GAAG,CAAC;AACzB,YAAM;AAAA,IACV,CAAC,EACI,KAAK,MAAM;AACZ,UAAI,CAAC,KAAK,yBAAyB,KAAK,GAAG;AACvC,cAAM,IAAI,iBAAiB,KAAK,KAAK,0BAA0B,CAAC;AAAA,MACpE;AAAA,IACJ,CAAC,EACI,MAAM,CAAC,QAAQ;AAIhB,YAAM;AAAA,IACV,CAAC,EACI,KAAK,YAAY;AAClB,YAAM,EAAE,eAAe,IAAI,KAAK,SAAS;AAEzC,YAAM,0BAA0B,OAAO,OAAO,cAAc,EAAE,QAAQ,CAAC,SAAS,KAAK,OAAO;AAC5F,YAAM,iBAAiB,CAAC;AACxB,aAAO,KAAK,KAAK,EAAE,QAAQ,CAAC,WAAW;AACnC,cAAM,OAAO,KAAK,QAAQ,MAAM;AAEhC,YAAI,CAAC,KAAK,SAAS,iBACf,wBAAwB,QAAQ,MAAM,MAAM,IAAI;AAChD,yBAAe,KAAK,KAAK,EAAE;AAAA,QAC/B;AAAA,MACJ,CAAC;AACD,YAAM,WAAW,KAAK,cAAc,cAAc;AAClD,YAAM,SAAS,MAAM,KAAK,WAAW,QAAQ;AAC7C,WAAK,KAAK,YAAY,MAAM;AAC5B,aAAO;AAAA,IACX,CAAC,EACI,MAAM,CAAC,QAAQ;AAChB,WAAK,KAAK,SAAS,GAAG;AACtB,WAAK,IAAI,KAAK,OAAO;AACrB,YAAM;AAAA,IACV,CAAC;AAAA,EACL;AACJ;AACA,IAAO,eAAQ;",
  "names": ["prettierBytes", "separator", "pattern", "Symbol", "Symbol", "e", "Symbol", "debounce", "debounce", "throttle", "i", "l", "e", "i", "i", "i", "n", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "createRef", "current", "Fragment", "BaseComponent", "context", "this", "getDomSibling", "childIndex", "sibling", "updateParentDomPointers", "child", "base", "enqueueRender", "c", "__d", "push", "process", "__r", "debounceRendering", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "shift", "__P", "diff", "__n", "namespaceURI", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "newChildrenLength", "constructNewChildrenArray", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "String", "undefined", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "nodeType", "toChildArray", "out", "some", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "toLowerCase", "_attached", "addEventListener", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "hasRefUnmount", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "firstChild", "cloneElement", "vnode", "props", "children", "key", "ref", "i", "defaultProps", "normalizedProps", "assign", "type", "undefined", "arguments", "length", "slice", "call", "createVNode", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "vnodeId", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "defaultProps", "options", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "A", "d", "y", "q", "u", "f", "prettierBytes", "match", "p", "i", "package_default", "m", "package_default", "ee", "defaultOptions", "throttle"]
}
